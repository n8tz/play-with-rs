/*!
 * MIT License
 * 
 * Copyright (c) 2018 Wise Wild Web
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
module.exports=function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=14)}([function(t,e){t.exports=require("is")},function(t,e){t.exports=require("@babel/runtime/helpers/toConsumableArray")},function(t,e,s){"use strict";s.r(e),s.d(e,"walknSet",function(){return o}),s.d(e,"walknGet",function(){return a}),s.d(e,"keyWalknSet",function(){return c}),s.d(e,"keyWalknGet",function(){return u});var i=s(1),r=s.n(i),n=s(0);function o(t,e,s,i){return n.string(e)&&(e=e.split(".")),!!e.length&&(1==e.length?t[e[0]]=i?[].concat(r()(t[e[0]]||[]),[s]):s:o(t[e[0]]=t[e[0]]||{},e.slice(1),s,i))}function a(t,e,s){return n.string(e)&&(e=e.split(".")),e.length?t[e[0]]&&a(t[e[0]],e.slice(1)):t}function c(t,e,s,i){return n.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),o(t,e,s)}function u(t,e,s){return n.string(e)&&(e=e.split(/(\>|\/)/gi).filter(function(t){return">"!==t&&t})),e.length?t[e[0]]&&a(t[e[0]],e.slice(1)):t}!function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var r=void 0;try{r=s[i]}catch(t){continue}t.register(r,i,"G:\\n8tz\\libs\\rScopes\\rescope\\src\\utils\\utils.js")}}else t.register(s,"module.exports","G:\\n8tz\\libs\\rScopes\\rescope\\src\\utils\\utils.js")}}()},function(t,e){t.exports=require("@babel/runtime/helpers/defineProperty")},function(t,e){t.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(t,e){t.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(t,e){t.exports=require("@babel/runtime/helpers/createClass")},function(t,e){t.exports=require("@babel/runtime/helpers/classCallCheck")},function(t,e){t.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(t,e){t.exports=require("@babel/runtime/helpers/get")},function(t,e){t.exports=require("@babel/runtime/helpers/inherits")},function(t,e){t.exports=require("shortid")},function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return h});var i=s(1),r=s.n(i),n=s(7),o=s.n(n),a=s(6),c=s.n(a),u=s(0),l=s.n(u),h=function(){function t(){o()(this,t),this._events={}}return c()(t,[{key:"on",value:function(t,e){var s=this;if(!l.a.string(t)&&t)return Object.keys(t).forEach(function(e){return s.on(e,t[e])});this._events[t]=this._events[t]||[],this._events[t].push(e)}},{key:"un",value:function(t,e){var s=this;if(!l.a.string(t)&&t)return Object.keys(t).forEach(function(e){return s.un(e,t[e])});if(this._events[t]){var i=this._events[t].indexOf(e);this._events[t].splice(i,1)}}},{key:"emit",value:function(t){if(this._events[t]){for(var e=r()(this._events[t]),s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];for(var o=0;o<e.length;o++)e[o].apply(e,i)}}},{key:"addListener",value:function(){this.on.apply(this,arguments)}},{key:"removeListener",value:function(){this.un.apply(this,arguments)}},{key:"removeAllListeners",value:function(){this._events={}}},{key:"once",value:function(t,e){var s,i=this;this.on(t,s=function(){i.un(t,s),e.apply(void 0,arguments)})}}]),t}();!function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var r=void 0;try{r=s[i]}catch(t){continue}t.register(r,i,"G:\\n8tz\\libs\\rScopes\\rescope\\src\\utils\\Emitter.js")}}else t.register(s,"module.exports","G:\\n8tz\\libs\\rScopes\\rescope\\src\\utils\\Emitter.js")}}()},function(t,e,s){"use strict";s.r(e);var i=s(1),r=s.n(i),n=s(3),o=s.n(n),a=s(7),c=s.n(a),u=s(8),l=s.n(u),h=s(5),p=s.n(h),f=s(4),d=s.n(f),_=s(6),v=s.n(_),y=s(10),b=s.n(y),g=s(0),m=s.n(g),S=s(11),k=s.n(S),w=s(12),O=s(2);function j(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)}return s}function T(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?j(s,!0).forEach(function(e){o()(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):j(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var x=function(t,e,s){var i=function(){};i.prototype=s?new s._[e]:t[e]||{},t[e]=new i,t._[e]=i},C={},E=function(t){function e(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.parent,n=i.upperScope,o=i.key,a=i.id,u=i.snapshot,h=i.state,f=i.data,_=i.incrementId,v=void 0===_?!!o:_,y=i.persistenceTm,b=i.autoDestroy,g=i.rootEmitter,S=i.boundedActions;c()(this,e),s=l()(this,p()(e).call(this));var w={keyPID:n&&n._id||r&&r._id||k.a.generate(),key:o,incrementId:v,baseId:a};if(a=a||o&&w.keyPID+">"+o,w.isLocalId=!a,a=a||"_____"+k.a.generate(),C[a]&&!v)return s._id=a,C[a].register(t),l()(s,C[a]);if(C[a]&&v){for(var O=-1;C[a+"["+ ++O+"]"];);a=a+"["+O+"]"}if(C[a]=d()(s),s._id=a,s._rev=0,s._=w,s.actions={},s.stores={},s.state={},s.data={},s.parent=r,"inherit"==b&&(b=r&&r._autoDestroy),s._autoDestroy=b,w.persistenceTm=y||s.constructor.persistenceTm,r&&r.dead)throw new Error("Can't use a dead scope as parent !");return x(d()(s),"actions",r),x(d()(s),"stores",r),x(d()(s),"state",r),x(d()(s),"data",r),s.sources=[],w.childScopes=[],w.childScopesList=[],w.unStableChilds=0,w.seenChilds=0,w._listening={},w._scope={},w._mixed=[],w._mixedList=[],w.followers=[],s.__retains={all:0},s.__locks={all:1},w._boundedActions=m.a.array(S)?{test:S.includes.bind(S)}:S,r&&(r.retain("isMyParent"),g?r.on(w._parentList={update:function(t){return s._propag()}}):(!r._stable&&s.wait("waitingParent"),r.on(w._parentList={stable:function(t){return s.release("waitingParent")},unstable:function(t){return s.wait("waitingParent")},update:function(t){return s._propag()}}))),s.register(t,h,f),s.__locks.all--,s._stable=!s.__locks.all,r&&r._addChild(d()(s)),s.restore(u),b&&setTimeout(function(t){s.retain("autoDestroy"),s.dispose("autoDestroy")}),s}return b()(e,t),v()(e,null,[{key:"stateMapToRefList",value:function(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object.keys(t).forEach(function(a){var c=o?o+"."+a:a;t[a]instanceof e.scopeRef?r.push(t[a].path+":"+c):t[a]&&t[a]instanceof Function?"$apply"===a?s=t[a]:n[a]=t[a]:t[a]&&t[a].prototype instanceof e.Store?r.push(t[a].as(c)):i[c]=t[a]}),s}},{key:"getScope",value:function(t){var s=m.a.array(t)?t.sort(function(t,e){return t.firstname<e.firstname?-1:t.firstname>e.firstname?1:0}).join("+"):t;return C[s]=C[s]||new e({},{id:s})}}]),v()(e,[{key:"mount",value:function(t,e,s,i){var r=this;return m.a.array(t)?t.forEach(function(t){return r._mount(t,e,s,i)}):this._mount.apply(this,arguments),this}},{key:"_mount",value:function(t,s,i,r){var n,o=this._;if(n=this.parseRef(t),"$parent"!=t){if(!o._scope[n.storeId]){var a;if(o._mixed.reduceRight(function(e,n){return e||n._mount(t,s,i,r)},!1)||!this.parent)return;return(a=this.parent)._mount.apply(a,arguments)}var c=o._scope[n.storeId],u=[];if(e.isStoreClass(c))for(o._scope[n.storeId]=new c(this,{name:n.storeId,state:i,data:r},u);u.length;)u.shift()();else e.isScopeClass(c)&&(c=o._scope[n.storeId]=new c({$parent:this},{key:n.storeId,incrementId:!0,upperScope:this}),n.path.length>1&&o._scope[n.storeId].mount(n.path.slice(1).join("."),s,i,r));return e.isStore(c)&&(void 0!==i&&void 0===r?c.setState(i):void 0!==i&&(c.state=i),void 0!==r&&c.push(r)),e.isScope(c)&&(void 0!==i&&c.setState(i),n.path.length>1&&c._mount(n.path.slice(1).join("."))),this._watchStore(n.storeId),o._scope[n.storeId]}}},{key:"register",value:function(t){var s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.relink(t,this,!1,!1),Object.keys(t).forEach(function(n){if("$parent"!=n)return e.isScopable(t[n])?void(t[n].singleton||m.a.fn(t[n])&&(i[n]||r[n])?s._mount(n,void 0,i[n],r[n]):i[n]||r[n]?r[n]?(i[n]&&(s.stores[n].state=i[n]),s.stores[n].push(r[n])):i[n]&&s.stores[n].setState(i[n]):s._watchStore(n)):console.warn("RS: ",s._id,", can't register not scopable object :",n)})}},{key:"relink",value:function(t){var s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=this._;Object.keys(t).forEach(function(a){var c,u;if(!(!n&&i._._scope[a]===t[a]||i._._scope[a]&&i._._scope[a].constructor===t[a])){if(!n&&i._._scope[a]?r||m.a.fn(i._._scope[a])?!r&&m.a.fn(i._._scope[a])&&(i._._scope[a]=t[a]):(i._._scope[a].__proto__=t[a].prototype,i._._scope[a].__onHotReloaded&&i._._scope[a].__onHotReloaded(t[a])):n||r||(o._scope[a]=t[a]),Object.defineProperty(i._.stores.prototype,a,{enumerable:!0,configurable:!0,get:function(){return o._scope[a]}}),u=i._.actions.prototype,"$parent"!==a){if(Object.defineProperty(i._.state.prototype,a,{enumerable:!0,configurable:!0,get:function(){return o._scope[a]&&o._scope[a].state},set:function(t){return s._mount(a,void 0,t)}}),Object.defineProperty(i._.data.prototype,a,{enumerable:!0,configurable:!0,get:function(){return o._scope[a]&&o._scope[a].data},set:function(t){return s._mount(a,void 0,void 0,t)}}),c=t[a]instanceof e.Store?t[a].constructor.actions:t[a].actions,e.isScopeClass(o._scope[a])&&s._mount(a),e.isScope(o._scope[a]))u[a]&&console.warn("RS : Sub scope actions is mapped over an existing function !",a),u[a]=o._scope[a].actions;else if(!e.isStore(o._scope[a])&&!e.isStoreClass(o._scope[a]))return;c&&s._mapActions(c,u,a)}else u[a]=t[a].actions;void 0}})}},{key:"_mapActions",value:function(t,e,s){for(var i in t)t.hasOwnProperty(i)&&(m.a.object(t[i])?(e[i]&&!m.a.object(e[i])&&console.warn("RS : Actions namespace is mapped over an existing function !",s,i),e[i]=e[i]||{__targetStores:0},this._mapActions(t[i],e[i]),e[i].__targetStores++):e.hasOwnProperty(i)?e[i].__targetStores++:(m.a.object(e[i])&&console.warn("RS : Action is mapped over existing namespace  !",s,i),e[i]=this.dispatch.bind(this,i),e[i].__targetStores=1))}},{key:"_watchStore",value:function(t){var e=this,s=this._;return s._listening[t]||m.a.fn(s._scope[t])||(!s._scope[t]._autoDestroy&&s._scope[t].retain("scoped"),!s._scope[t].isStable()&&this.wait(t),s._scope[t].on(s._listening[t]={destroy:function(e){delete s._listening[t],s._scope[t]=s._scope[t].constructor},update:function(t){return e.propag()},stable:function(s){return e.release(t)},unstable:function(s){return e.wait(t)}})),!0}},{key:"mixin",value:function(t){var e,s=this,i=this.parent,r=this._;r._mixed.push(t),t.retain("mixedTo"),t._stable||this.wait(t._id),r._mixedList.push(e={stable:function(e){return s.release(t._id)},unstable:function(e){return s.wait(t._id)},update:function(t){return s._propag()}}),t.on(e),x(this,"actions",i),x(this,"stores",i),x(this,"state",i),x(this,"data",i),this.relink(r._scope,this,!1,!0),r._mixed.forEach(function(t){x(s,"actions"),x(s,"stores"),x(s,"state"),x(s,"data"),s.stores.__origin="mixed "+t._id,t.relink(t._._scope,s,!0,!0)})}},{key:"bind",value:function(t,e,s){var i,r,n,a=this,c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(e&&!m.a.array(e)&&(e=[e]),!1!==s&&!0!==s||(c=s,s=null),n=e.map(function(t){return m.a.string(t)?t:t.name}).map(function(t){return a.parseRef(t)}),this._.followers.push([t,e,s||void 0,i=n.reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},u)]),this.mount(e),this.retainStores(Object.keys(i),"listeners"),c&&this._stable){if(!(r=this.getUpdates(i)))return this;"function"!=typeof t?s?t.setState(o()({},s,r)):t.setState(r):t(r)}return this}},{key:"unBind",value:function(t,e,s){for(var i=this._.followers,r=i&&i.length;i&&r--;)if(i[r][0]===t&&""+i[r][1]==""+e&&i[r][2]==s)return this.disposeStores(Object.keys(i[r][3]),"listeners"),i.splice(r,1)}},{key:"map",value:function(t,e){var s=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,n=this.constructor.Store,o=(e=m.a.array(e)?e:[e]).map(this.parseRef);if(this.mount(e),i&&t instanceof n)n.map(t,e,this,this,!1);else if(i){this.bind(t,e,void 0,!1);var a,c=t.isReactComponent?"componentWillUnmount":"destroy";t.hasOwnProperty(c)&&(a=t[c]),t[c]=function(){return delete t[c],a&&(t[c]=a),s.unBind(t,e),t[c]&&t[c].apply(t,arguments)}}return r&&this.getUpdates(r)||o.reduce(function(t,e){return Object(O.walknSet)(t,e.alias||e.path,s.retrieve(e.path)),t},{})}},{key:"retrieve",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t=m.a.string(t)?t.split("."):t)&&this.stores[t[0]]&&this.stores[t[0]].retrieve&&this.stores[t[0]].retrieve(t.slice(1))}},{key:"restoreRefPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=m.a.string(t)?t.split("."):t;for(var s,i=0,r=this;i<t.length;){if(s=r.stores[t[i]],(e.isScopeClass(s)||e.isStoreClass(s))&&(r.mount(t[0]),s=r.stores[t[i]]),!e.isScope(s)){if(e.isStore(s)){s.restore();break}break}r=s,i++}}},{key:"retrieveStore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t=m.a.string(t)?t.split("."):t)&&t.length&&(1!=t.length&&this.stores[t[0]].retrieveStore?this.stores[t[0]].retrieveStore(t.slice(1)):1==t.length&&this.stores[t[0]])}},{key:"getStoresRevs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,s=this._._scope;return t||(t={}),Object.keys(s).forEach(function(e){"$parent"!=e&&(m.a.fn(s[e])?t.hasOwnProperty(e)||(t[e]=!1):t[e]=s[e]._rev)}),e||(this._._mixed.reduce(function(e,s){return s.getStoresRevs(t),t},t),this.parent&&this.parent.getStoresRevs(t)),t}},{key:"_getRevMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._._scope;return Object.keys(e).forEach(function(s){"$parent"==s||t[s]||(t[s]={rev:e[s]._rev,refs:[]})}),this._._mixed.reduceRight(function(t,e){return e._getRevMap(t)},t),this.parent&&this.parent._getRevMap(t),t}},{key:"getRefsUpdates",value:function(t,e,s){var i=this;return e=e||t.map(function(t){return m.a.string(t)?t:t.name}).map(function(t){return i.parseRef(t)}).reduce(function(t,e){return t[e.storeId]=t[e.storeId]||{rev:0,refs:[]},t[e.storeId].refs.push(e),t},{}),this.getUpdates(e,s)}},{key:"getUpdates",value:function(t,e,s){var i=this;return e=e||{},t=t||this._getRevMap(),Object.keys(t).forEach(function(r){var n=i.stores[r];t[r]=t[r]||{rev:0,refs:[]},n&&m.a.fn(n)?(s=!0,e[r]=void 0):n&&n._rev>t[r].rev&&(t[r].rev=n._rev,s=!0,t[r].refs.forEach(function(t){e[t.alias]=i.retrieve(t.path)}))}),s&&e}},{key:"_getAllChilds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.push.apply(t,r()(this._.childScopes)),this._.childScopes.forEach(function(e){e._getAllChilds(t)}),t}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(this._._scope,this._),i=s.baseId,r=s.key,n=s.keyPID,o=(s.incrementId,t.alias),a=t.parentAlias,c=r?(a||n)+">"+r:o||a&&a+"/"+i||this._id;return this.serialize_ex(t,e,c,o,["$parent"])}},{key:"serialize_ex",value:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=this._,c=a._scope,u=a.incrementId,l=s.withChilds,h=void 0===l||l,p=s.withMixed,f=void 0===p||p,d=s.norefs;if(Object(O.keyWalknGet)(i,r)){if(!u)return i;if(u){for(var _=-1;Object(O.keyWalknGet)(i,r+"["+ ++_+"]"););r=r+"["+_+"]"}}return Object(O.keyWalknSet)(i,r,{}),Object.keys(c).forEach(function(t){o.includes(t)||e.isStoreClass(c[t])||e.isScopeClass(c[t])||c[t].serialize(T({},s,{parentAlias:r}),i)}),h&&a.childScopes.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!0,withParents:!1,parentAlias:r,withMixed:f,norefs:d},i)}),f&&a._mixed.forEach(function(t){!t._.isLocalId&&t.serialize({withChild:!1,withParents:!1,withMixed:f,norefs:d},i)}),n&&(i=Object.keys(i).reduce(function(e,s){return e[s===t._id?n:s]=i[s],e},{})),i}},{key:"restore",value:function(t){var e,s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.a.bool(i)&&i,n=this._._scope;t&&i&&i.alias&&i.alias!=this._id&&(delete(e=T({},t,o()({},this._id,t[i.alias])))[i.alias],t=e),(t=t&&Object(O.keyWalknGet)(t,this._id)||this.takeSnapshotByKey(this._id))&&(this._.snapshot=T({},t),e=t["/"],t["/"]=T({},e),e&&Object.keys(e).forEach(function(t){"$parent"!=t&&n[t]&&(r&&!m.a.fn(n[t])&&n[t].destroy(),s._mount(t))}),this._._mixed.forEach(function(t){!t._.isLocalId&&t.restore(void 0,r)}),this._.childScopes.forEach(function(t){!t._.isLocalId&&t.restore(void 0,r)}))}},{key:"getSnapshotByKey",value:function(t,e){return this._.snapshot&&t.startsWith(this._id)?Object(O.keyWalknGet)(this._.snapshot,t.substr(this._id.length)):!e&&this.parent&&this.parent.getSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.getSnapshotByKey(t)}},{key:"getSnapshotByKeyExt",value:function(t,e,s){if(t)return Object(O.keyWalknGet)(t,e)}},{key:"takeSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var s=Object(O.keyWalknGet)(this._.snapshot,t.substr(this._id.length));return s&&this.deleteSnapshotByKey(t,!0),s}return!e&&this.parent&&this.parent.takeSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.takeSnapshotByKey(t)}},{key:"deleteSnapshotByKey",value:function(t,e){if(this._.snapshot&&t.startsWith(this._id)){var s=Object(O.keyWalknGet)(this._.snapshot,t.substr(this._id.length).replace(/^(.*[\>|\/])[^\>|\/]+$/gi,"$1"));s&&delete s[t.replace(/^.*[\>|\/]([^\>|\/]+)$/gi,"$1")]}return!e&&this.parent&&this.parent.deleteSnapshotByKey(t)||this.stores.$parent&&this.stores.$parent.deleteSnapshotByKey(t)}},{key:"setState",value:function(t){var e=this;Object.keys(t).forEach(function(s){return e.state[s]=t[s]})}},{key:"parseRef",value:function(t){"string"!=typeof t&&(this.register(o()({},t.name,t.store)),t=t.name);var e=t.split(":");return e[0]=e[0].split("."),{storeId:e[0][0],path:e[0],alias:e[1]||e[0][e[0].length-1],ref:t}}},{key:"dispatch",value:function(t){for(var e,s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];if(!this.dead){var n=this._._boundedActions;for(var o in this._._scope){var a;"$parent"!==o&&(m.a.fn(this._._scope[o])||(a=this._._scope[o]).trigger.apply(a,[t].concat(i)))}return n&&n.test(t)?this:(this._._mixed.forEach(function(e){return e.dispatch.apply(e,[t].concat(i))}),this.parent&&(e=this.parent).dispatch.apply(e,[t].concat(i)),this)}console.warn("Dispatch was called on a dead scope, check you're async functions in this stack...",(new Error).stack)}},{key:"trigger",value:function(){this.dispatch.apply(this,arguments)}},{key:"then",value:function(t){var e=this;return this._stable?t(this.data):this.once("stable",function(s){return e.then(t)})}},{key:"onceStableTree",value:function(t){var e=this;return this._.unStableChilds?this.once("stableTree",function(s){return e.onceStableTree(t)}):t(this.data)}},{key:"retainStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;e.forEach(function(e){return t.stores[e]&&t.stores[e].retain&&t.stores[e].retain(s)})}},{key:"disposeStores",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;e.forEach(function(e){return t.stores[e]&&t.stores[e].dispose&&t.stores[e].dispose(s)})}},{key:"wait",value:function(t){this._stable&&!this.__locks.all&&this.emit("unstable",this),this._stable=!1,this.__locks.all++,t&&(this.__locks[t]=this.__locks[t]||0,this.__locks[t]++)}},{key:"release",value:function(t){var e=this;if(t&&(0==this.__locks[t]&&console.error("Release more than locking !",t),this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),t||0!=this.__locks.all||console.error("Release more than locking !"),this.__locks.all--,!this.__locks.all){if(this._.stabilizerTM)return;this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.stabilizerTM=setTimeout(function(t){e._.stabilizerTM=null,e.__locks.all||(e._.propagTM&&clearTimeout(e._.propagTM),e._rev++,e._stable=!0,e.emit("stable",e),!e.dead&&e._propag())})}}},{key:"propag",value:function(){var t=this;this._.propagTM&&clearTimeout(this._.propagTM),this._.propagTM=setTimeout(function(e){t._.propagTM=null,t._propag()},2)}},{key:"_propag",value:function(){var t=this;this._.followers.length&&this._.followers.forEach(function(e){var s=e[0],i=(e[1],e[2]),r=e[3],n=(e[3],t.getUpdates(r));n&&("function"!=typeof s?i?s.setState(o()({},i,n)):s.setState(n):s(n,r&&T({},r)||"no revs"))}),this.emit("update",this.getUpdates())}},{key:"isStable",value:function(){return this._stable}},{key:"isStableTree",value:function(){return!this._.unStableChilds}},{key:"_addChild",value:function(t){var e=this;this._.childScopes.push(t),this._.seenChilds++;var s={stable:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstable:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},stableTree:function(t){e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)},unstableTree:function(t){e._.unStableChilds++,1==e._.unStableChilds&&e.emit("unstableTree",e)},destroy:function(t){t._.unStableChilds&&e._.unStableChilds--,t.isStable()||e._.unStableChilds--,e._.unStableChilds||e.emit("stableTree",e)}},i=this._.unStableChilds;!t.isStable()&&this._.unStableChilds++,t._.unStableChilds&&this._.unStableChilds++,this._.childScopesList.push(s),!i&&this._.unStableChilds&&this.emit("unstableTree",this),t.on(s)}},{key:"_rmChild",value:function(t){var e=this._.childScopes.indexOf(t),s=this._.unStableChilds;-1!=e&&(this._.childScopes.splice(e,1),!t.isStable()&&this._.unStableChilds--,t._.unStableChilds&&this._.unStableChilds--,t.un(this._.childScopesList.splice(e,1)[0]),s&&!this._.unStableChilds&&this.emit("stableTree"))}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("Dispose more than retaining : "+t);this.__retains[t]--}if(!this.__retains.all)throw new Error("Dispose more than retaining !");this.__retains.all--,this.__retains.all||(this._.persistenceTm?(this._.destroyTM&&clearTimeout(this._.destroyTM),this._.destroyTM=setTimeout(function(t){e.then(function(t){!e.__retains.all&&!e.dead&&e.destroy()})},this._.persistenceTm)):this.then(function(t){return!e.__retains.all&&!e.dead&&e.destroy()}))}},{key:"destroy",value:function(){var t=this,e=this._._scope;for(var s in r()(this._.childScopes).map(function(t){return t.destroy()}),e)if(!m.a.fn(e[s])){if("$parent"==s)continue;!e[s]._autoDestroy&&e[s].dispose("scoped")}for(this._.stabilizerTM&&clearTimeout(this._.stabilizerTM),this._.propagTM&&clearTimeout(this._.propagTM),Object.keys(this._._listening).forEach(function(e){return"$parent"!==e&&t._._scope[e].removeListener(t._._listening[e])});this._._mixedList.length;)this._._mixed[0].removeListener(this._._mixedList.shift()),this._._mixed.shift().dispose("mixedTo");r()(this._.followers).map(function(e){return t.unBind.apply(t,r()(e))}),this._._parentList&&(this.parent._rmChild(this),this.parent.removeListener(this._._parentList),this.parent.dispose("isMyParent"),this._._parentList=null),this.dead=!0,delete C[this._id],this.emit("destroy",this)}}]),e}(w.default);E.persistenceTm=1,E.Store=null,E.scopeRef=function(t){this.path=t},E.scopes=C,E.isScopable=function(t){return E.isScope(t)||E.isScopeClass(t)||E.isStore(t)||E.isStoreClass(t)},E.isScope=function(t){return t instanceof E},E.isScopeClass=function(t){return E.isPrototypeOf(t)||t===E},e.default=E,function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var r=void 0;try{r=s[i]}catch(t){continue}t.register(r,i,"G:\\n8tz\\libs\\rScopes\\rescope\\src\\Scope.js")}}else t.register(s,"module.exports","G:\\n8tz\\libs\\rScopes\\rescope\\src\\Scope.js")}}()},function(t,e,s){t.exports=s(15)},function(t,e,s){"use strict";s.r(e),function(t){s.d(e,"Scope",function(){return r}),s.d(e,"Store",function(){return n}),s.d(e,"scopeRef",function(){return a});var i="undefined"!=typeof window?window:t,r=s(13).default,n=s(17).default,o=i.___rescope||{};function a(t,e){return t[e]=new r.scopeRef(t[e]),t}i.___rescope?(console.warn("ReScope is defined multiple times !! \nCheck you're packaging"),r=o.Scope,n=o.Store,a=o.scopeRef):(i.___rescope=o,r.Store=n),e.default={Scope:r,Store:n,scopeRef:a},function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var r=void 0;try{r=s[i]}catch(t){continue}t.register(r,i,"G:\\n8tz\\libs\\rScopes\\rescope\\src\\index.js")}}else t.register(s,"module.exports","G:\\n8tz\\libs\\rScopes\\rescope\\src\\index.js")}}()}.call(this,s(16))},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";s.r(e);var i=s(3),r=s.n(i),n=s(1),o=s.n(n),a=s(7),c=s.n(a),u=s(6),l=s.n(u),h=s(8),p=s.n(h),f=s(4),d=s.n(f),_=s(5),v=s.n(_),y=s(9),b=s.n(y),g=s(10),m=s.n(g);function S(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)}return s}function k(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?S(s,!0).forEach(function(e){r()(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):S(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var w=s(0),O=s(13).default,j=s(2),T=j.keyWalknSet,x=j.keyWalknGet,C=s(12).default,E=s(18).default,P=s(11),R=Object.getPrototypeOf({}),L=function(t){function e(){var t,s,i;c()(this,e),i=p()(this,v()(e).call(this));var r=Array.prototype.slice.call(arguments),n=i.constructor,a=r[0]instanceof O?r.shift():n.scope?O.getScope(n.scope):w.string(r[0])?O.getScope(r.shift()):n.staticScope,u=!r[0]||w.array(r[0])||w.string(r[0])?{}:r.shift(),l=w.array(r[0])?r.shift():null,h=u.name||n.name,f=u.use||[],_=u.apply||null,y=n.state||n.initialState||n.defaultState;return i._uid=u._uid||P.generate(),i.__retains={all:0},i.__locks={all:0},i._onStabilize=[],i._autoDestroy=!!i._persistenceTm,i._persistenceTm=u.persistenceTm||n.persistenceTm||(u.autoDestroy||n.autoDestroy)&&5,i._cfg=u,u&&u.on&&i.on(u.on),i.name=h,a.stores?(i.scopeObj=a,i.scope=a.stores):(i.scopeObj=new O(a),i.scope=a.stores),i.$scope=i.scopeObj,i.$stores=i.scopeObj.stores,i.$actions=i.scopeObj.actions,i.$dispatch=i.scopeObj.dispatch.bind(i.scopeObj),i._rev=i.constructor._rev||0,i._revs={},i.stores={},i._require=[],i._sources=[h],w.array(n.use)?i._use=[].concat(o()(f),o()((n.use||[]).map(function(t){var e=t.match(/^(\!?)([^\:]*)(?:\:(.*))?$/);if(e[1]){var s=e[2].split(".");return i._require.push(e[3]||s[s.length-1]),t.substr(1)}return t}))):i._use=[].concat(o()(f),o()(n.use?Object.keys(n.use).map(function(t){var e=t.match(/^(\!?)(.*)$/);return e[1]&&i._require.push(n.use[t]),e[2]+(!0===n.use[t]?"":":"+n.use[t])}):[])),n.require&&(t=i._require).push.apply(t,o()(n.require)),u.require&&(s=i._require).push.apply(s,o()(u.require)),i._followers=[],i._changesSW=y||{},i.state=y&&{},_&&(i.apply=_),l?l.push(i._afterConstructor.bind(d()(i))):setTimeout(i._afterConstructor.bind(d()(i))),i}return m()(e,t),l()(e,[{key:"_afterConstructor",value:function(){var t,e=this._cfg,s=this.constructor,i=(this.restore(void 0,!0),this.state),r=this.data;r?this.data=r:void 0!==s.data?this.data=k({},s.data):e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("state")&&void 0!==e.state&&(i=k({},i,{},e.state)),void 0===this.data?(i||this._use.length)&&(this._nextState=this._changesSW=k({},this._changesSW,{},i||{},{},this.$scope.map(this,this._use)),this.state={},this.shouldApply(this._nextState)&&void 0===this.data&&(this.data=this.apply(this.data,this._nextState,this._changesSW),t=!0,this.state=this._changesSW,this._nextState=this._changesSW=null)):(t=!0,this.state=k({},this._changesSW,{},i||{},{},this.$scope.map(this,this._use)),this._nextState=this._changesSW=null),void 0===this.data&&!t||this.__locks.all?(this._stable=!1,s.managed||this.state||this._use&&this._use.length||console.warn("ReScope store '",this.name,"' have no initial data, state or use. It can't stabilize...")):(this._stable=!0,this._rev++),!this._stable&&this.emit("unstable",this.state)}},{key:"shouldPropag",value:function(t){return!0}},{key:"shouldSerialize",value:function(){return!0}},{key:"hasDataChange",value:function(t){this.constructor;var e,s=this.data;return!(e=!s&&t||s!==t)&&s&&Object.keys(s).forEach(function(i){e=e||(t?s[i]!==t[i]:s&&s[i])}),!e&&t&&Object.keys(t).forEach(function(i){e=e||(t?s[i]!==t[i]:s&&s[i])}),e}},{key:"shouldApply",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,s=this.constructor;return!!this.isComplete(e)&&(w.array(s.follow)?s.follow.reduce(function(t,s){return t||e&&e[s]},!1):!s.follow||Object.keys(s.follow).reduce(function(i,r){return i||e&&w.fn(s.follow[r])&&s.follow[r].call(t,e[r])||s.follow[r]&&e[r]!==t.state[r]},!1))}},{key:"apply",value:function(t,e,s){return e}},{key:"stabilize",value:function(t){t&&this.once("stable",t),this._stabilizer||(this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this._stabilizer=E.pushTask(this,"pushState"))}},{key:"retrieve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data;return t=w.string(t)?t.split("."):t,s&&t&&t.length?t.length==e+1?s[t[e]]:this.retrieve(t,e+1,s[t[e]]):s}},{key:"dispatch",value:function(t){for(var e,s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];(e=this.scopeObj).dispatch.apply(e,[t].concat(i))}},{key:"trigger",value:function(t){var e=this.constructor.actions;if(e&&e[t]){for(var s,i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];var o=(s=e[t]).call.apply(s,[this].concat(r));w.function(o)&&(o=o(this.nextState)),o&&this.setState(o)}}},{key:"push",value:function(t,e,s){if(s=!0===e?s:e,!(e=!0===e)&&!this.hasDataChange(t)){if(s&&s(),!this.__locks.all){var i=this._stable;this._stable=!0,!i&&this.emit("stable",this.state,this.data)}return!1}this.data=t,this.wait(),this.release(s)}},{key:"pushState",value:function(t){if(this._stabilizer=null,t||this._changesSW||!this.data){var e,s=t||this._nextState||this.state;if(Object.keys(s).forEach(function(t){return void 0===s[t]&&delete s[t]}),e=this.apply(this.data,s,this._changesSW),this.state=s,this._nextState=null,this._changesSW=null,!t&&!this.hasDataChange(e)){if(!this.__locks.all){var i=this._stable;this._stable=!0,!i&&this.emit("stable",this.state,this.data),this._stabilizer=null}return!1}this.data=e,this.wait(),this.release()}}},{key:"setState",value:function(t,e,s){var i,r,n=this._changesSW=this._changesSW||{},o=this._nextState=this._nextState||k({},this.state);for(r in t)(!this.state||n.hasOwnProperty(r)&&t[r]!==n[r]||t.hasOwnProperty(r)&&t[r]!==this.state[r])&&(i=!0,o[r]=n[r]=t[r]);if(this.shouldApply(o))return s?(this.pushState(),e&&e()):i?this.stabilize(e):e&&e(),this}},{key:"setStateSync",value:function(t){var e=this._changesSW=this._changesSW||{};for(var s in t)(!this.state||t.hasOwnProperty(s)&&t[s]!==this.state[s])&&(!0,this._revs[s]=t[s]&&t[s]._rev||!0,e[s]=t[s]);return this.shouldApply(k({},this.state||{},{},e))&&this.pushState(),this.data}},{key:"as",value:function(t){return{store:this,name:t}}},{key:"on",value:function(t){var s=this;!w.string(t)&&t?Object.keys(t).forEach(function(i){return b()(v()(e.prototype),"on",s).call(s,i,t[i])}):b()(v()(e.prototype),"on",this).apply(this,arguments)}},{key:"removeListener",value:function(t){var s=this;!w.string(t)&&t?Object.keys(t).forEach(function(i){return b()(v()(e.prototype),"removeListener",s).call(s,i,t[i])}):b()(v()(e.prototype),"removeListener",this).apply(this,arguments)}},{key:"isComplete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return!this._require||!this._require.length||t&&this._require.reduce(function(e,s){return e&&t[s]},!0)}},{key:"isStable",value:function(){return this._stable}},{key:"serialize",value:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.parentAlias||this.scopeObj._id,n=0,o=!s.norefs&&w.array(this._use)&&this._use.reduce(function(s,i){var r=t.$scope.parseRef(i),o=t.$stores[r.storeId];return o&&e.isStore(o)&&!o.scopeObj._.isLocalId&&(n++,s[r.alias]=r.path),s},{}),a=this.state||{},c=this.shouldSerialize();if(!c)return T(i,r+"/"+this.name,{dataRefs:s.dataRefs,refs:o}),i;var u=Object.keys(a)||[],l=u.map(function(t){return a[t]}),h=0,p=s.dataRefs||{},f=!s.norefs&&this.data&&Object.keys(this.data).reduce(function(e,s){var i=l.indexOf(t.data[s]);return-1!=i&&(h++,e[s]=u[i]),e},{}),d={dataRefs:s.dataRefs,state:a&&(s.norefs?k({},a):Object.keys(a).reduce(function(t,e){return!o[e]&&(t[e]=a[e]),t},{})),data:(this.data&&this.data.__proto__===R?Object.keys(this.data).reduce(function(e,s){return f[s]||p[s]||(e[s]=t.data[s],h++),e},{}):(w.bool(this.data)||w.number(this.data)||w.string(this.data))&&this.data)||void 0};return o&&n&&(d.refs=o),f&&h&&(d.inRefs=f),T(i,r+"/"+this.name,d),i}},{key:"restore",value:function(t,e){var s=this;(t=t&&x(t,this.scopeObj._id+"/"+this.name)||this.$scope.takeSnapshotByKey(this.scopeObj._id+"/"+this.name))&&t&&(this.isStable()||e||this.then(function(){return s.restore(t)}),this.state=k({},t.state),t.refs&&Object.keys(t.refs).forEach(function(e){s.state[e]=s.$scope.retrieve(t.refs[e])}),!0===t.inRefs?this.data=k({},this.state):(this.data=t.data,t.inRefs&&Object.keys(t.inRefs).forEach(function(e){s.data[e]=s.state[t.inRefs[e]]})),t.dataRefs&&(this.data=this.data||{},Object.keys(t.dataRefs).forEach(function(e){s.$scope.restoreRefPath(t.dataRefs[e]),s.data[e]=s.$scope.retrieve(t.dataRefs[e])})))}},{key:"bind",value:function(t,e){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;if(this._followers.push([t,e,i]),s&&this.data&&this._stable){var n=i?this.retrieve(i):this.data;"function"!=typeof t?e?t.setState(r()({},e,n)):t.setState(n):t(n)}}},{key:"unBind",value:function(t,e,s){for(var i=this._followers,r=i&&i.length;i&&r--;)if(i[r][0]===t&&i[r][1]===e&&i[r][2]===s)return i.splice(r,1)}},{key:"then",value:function(t){var e=this;if(this._stable)return t(this.data);this.once("stable",function(s){return t(e.data)})}},{key:"wait",value:function(t){if("number"==typeof t)return this.__locks.all+=t;if(w.array(t))return t.map(this.wait.bind(this));this._stable&&this.emit("unstable",this.state,this.data),this._stable=!1,this.__locks.all++;var e=w.string(t)?t:null;return e&&(this.__locks[e]=this.__locks[e]||0,this.__locks[e]++),t&&w.fn(t.then)&&t.then(this.release.bind(this,null)),this}},{key:"release",value:function(t,e){this.constructor;var s=this,i=this._stable;if(w.fn(t)&&(e=t,t=null),t&&(0==this.__locks[t]&&console.error("Release more than locking !",t),this.__locks[t]=this.__locks[t]||0,this.__locks[t]--),t||0!=this.__locks.all||console.error("Release more than locking !"),!--this.__locks.all&&this.isComplete()){var n=this.shouldPropag(this.data);this._stable=!0,n&&this._rev++,n&&this._followers.length&&this._followers.forEach(function(t){var e=t[2]?s.retrieve(t[2]):s.data;"function"==typeof t[0]?t[0](e):t[0].setState(t[1]?r()({},t[1],e):e)}),!i&&this.emit("stable",this.data),n&&this.emit("update",this.data),e&&e()}else e&&this.then(e);return this}},{key:"propag",value:function(t){this.emit("update",t)}},{key:"retain",value:function(t){this.__retains.all++,t&&(this.__retains[t]=this.__retains[t]||0,this.__retains[t]++)}},{key:"dispose",value:function(t){var e=this;if(t){if(!this.__retains[t])throw new Error("RS : Dispose more than retaining on store '"+this.name+"' : "+t);this.__retains[t]--}if(0==this.__retains.all)throw new Error("RS : Dispose more than retaining on store "+this.name);this.__retains.all--,this.__retains.all||(this._persistenceTm?(this._destroyTM&&clearTimeout(this._destroyTM),this._destroyTM=setTimeout(function(t){e._destroyTM=null,!e.__retains.all&&!e.dead&&e.destroy()},this._persistenceTm)):!this.__retains.all&&!this.dead&&this.destroy())}},{key:"destroy",value:function(){this._stabilizer&&(this._stabilizer=null,clearTimeout(this._stabilizer)),this.emit("destroy",this),this._followers.length&&this._followers.forEach(function(t){"function"!=typeof t[0]&&t[0].stores&&delete t[0].stores[t[1]]}),this._followers.length=0,this.constructor._rev=this.rev,this.dead=!0,this._revs=this.data=this.state=this.scope=null,this.removeAllListeners()}},{key:"nextState",get:function(){return this._nextState||this.state}}]),e}(C);L.follow=void 0,L.require=void 0,L.staticScope=new O({},{id:"static"}),L.state=void 0,L.persistenceTm=!1,L.as=function(t){return{store:this,name:t}},L.map=function(t,e,s,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=t._revs||{},a=t.stores||(t.stores={}),c={};return e=w.array(e)?o()(e):[e],s=s||L.staticScope,e=e.filter(function(e){var u,l,h,p,f,d;if(!e)return console.error("Not a mappable store item '"+e+"' in "+i+" !!"),!1;if(e.store&&e.name?(h=l=e.name,f=e.store):w.fn(e)?(l=h=e.name||e.defaultName,f=e):(l=(d=e.match(/([^\.\:]+)((?:\.[^\.\:]+)*)(?:\:([^\.\:]+))?/))[1],p=d[2]&&d[2].substr(1),f=s.stores[d[1]],h=d[3]||p&&p.match(/([^\.]*)$/)[0]||d[1]),!f){var _=[];for(var v in s.stores)_.push(v);return console.error("Not a mappable store item '"+l+"/"+h+"' in "+(t.name||t)+" !!",f,d,s.stores,_),!1}if(O.isScopeClass(f)&&s._mount(l),O.isScope(f))f=s._mount(e);else if(n[l])return!1;return w.fn(f)?(s._mount(l),s.stores[l].bind(t,h,r,p)):f.bind(t,h,r,p),s.stores[l]._sources&&(u=t._sources).push.apply(u,o()(s.stores[l]._sources)),n[h]=n[h]||!0,!a[l]&&(a[l]=s.stores[l]),s.stores[l].hasOwnProperty("data")&&(c[l]=s.data[l]),!0}),t.once("destroy",function(){e.map(function(e){var i,r,n,o;e.store&&e.name?(r=i=e.name,o=e.store):w.fn(e)?(i=r=e.name||e.defaultName,o=s.stores[i]):(i=(e=e.match(/([^\.\:]+)((?:\.[^\.\:]+)*)(?:\:([^\.\:]+))?/))[1],n=e[2]&&e[2].substr(1),o=s.stores[e[1]],r=e[3]||n&&n.match(/([^\.]*)$/)[0]||e[1]),o&&!w.fn(o)&&o.unBind(t,r,n)})}),c},L.isStore=O.isStore=function(t){return t instanceof L},L.isStoreClass=O.isStoreClass=function(t){return L.isPrototypeOf(t)||t===L},e.default=L,function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var r=void 0;try{r=s[i]}catch(t){continue}t.register(r,i,"G:\\n8tz\\libs\\rScopes\\rescope\\src\\Store.js")}}else t.register(s,"module.exports","G:\\n8tz\\libs\\rScopes\\rescope\\src\\Store.js")}}()},function(t,e,s){"use strict";s.r(e),function(t){var s,i,r=[],n=0,o=0,a=0,c={lastError:null,dispatch:function(t){c.disable(),s&&s[0].handleError?s[0].handleError(t,s):s&&console.error("ReScope : An apply task has failed !!",s[1]," on ",s[0].name||s[0].constructor.name),i=!1,s=null,u()},enable:"undefined"!=typeof window?function(){window.addEventListener("error",c.dispatch)}:function(){t.on("uncaughtException",c.dispatch)},disable:"undefined"!=typeof window?function(){window.removeEventListener("error",c.dispatch)}:function(){t.removeListener("uncaughtException",c.dispatch)}};function u(){i||function(){Date.now();i=!0,c.enable();for(;a;){for(;!r[n]||!r[n].length;)n++;a--,s=r[n].shift();try{!s[0].dead&&s[0][s[1]](s[2])}catch(t){return c.dispatch(t)}}s=void 0,c.disable(),i=!1,a&&setTimeout(u)}()}e.default={pushTask:function(t,e,s){var i=t._sources&&t._sources.length||1,c=r[i]=r[i]||[];return o=Math.max(o,i),n=Math.min(n,i),a++,c.push([t,e,s]),setTimeout(u,0),c.length}},function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var r=void 0;try{r=s[i]}catch(t){continue}t.register(r,i,"G:\\n8tz\\libs\\rScopes\\rescope\\src\\utils\\TaskSequencer.js")}}else t.register(s,"module.exports","G:\\n8tz\\libs\\rScopes\\rescope\\src\\utils\\TaskSequencer.js")}}()}.call(this,s(19))},function(t,e){var s,i,r=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(s===setTimeout)return setTimeout(t,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(t){s=n}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var c,u=[],l=!1,h=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var t=a(p);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function _(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];u.push(new d(t,e)),1!==u.length||l||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}]);
//# sourceMappingURL=reScope.js.map
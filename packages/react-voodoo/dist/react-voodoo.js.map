{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/MapOf.react_voodoo_utils_css_demux_____js.gen.js","webpack:///./src/MapOf.react_voodoo_utils_css_demux_typed_____js.gen.js","webpack:///./src/comps/TweenAxis.js","webpack:///./src/comps/TweenRef.js","webpack:///./src/comps/TweenerContext.js","webpack:///./src/index.js","webpack:///./src/spells/asTweener.js","webpack:///./src/spells/withTweener.js","webpack:///./src/utils/CssTweenAxis.js","webpack:///./src/utils/css/cssUtils.js","webpack:///./src/utils/css/demux/backgroundColor.js","webpack:///./src/utils/css/demux/boxShadow.js","webpack:///./src/utils/css/demux/filter.js","webpack:///./src/utils/css/demux/textShadow.js","webpack:///./src/utils/css/demux/transform.js","webpack:///./src/utils/css/demux/typed/color.js","webpack:///./src/utils/css/demux/typed/int.js","webpack:///./src/utils/css/demux/typed/multi.js","webpack:///./src/utils/css/demux/typed/number.js","webpack:///./src/utils/css/demux/typed/shadow.js","webpack:///./src/utils/css/index.js","webpack:///./src/utils/dom.js","webpack:///./src/utils/inertia.js","webpack:///./src/utils/tweenTools.js","webpack:///external \"d3-ease\"","webpack:///external \"@babel/runtime/helpers/objectWithoutPropertiesLoose\"","webpack:///external \"prop-types\"","webpack:///external \"react\"","webpack:///external \"react-dom\"","webpack:///external \"is\"","webpack:///external \"fast-deep-equal\"","webpack:///external \"color-rgba\"","webpack:///external \"tween-axis\"","webpack:///external \"shortid\"","webpack:///external \"css-box-shadow\"","webpack:///external \"@babel/runtime/helpers/inheritsLoose\"","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"@babel/runtime/helpers/assertThisInitialized\""],"names":["req","_exports","cExport","fPath","i","_react_voodoo_utils_css_demux_filter_js","require","split","length","Object","keys","default","_react_voodoo_utils_css_demux_boxShadow_js","_react_voodoo_utils_css_demux_transform_js","_react_voodoo_utils_css_demux_textShadow_js","_react_voodoo_utils_css_demux_backgroundColor_js","backgroundColor","boxShadow","filter","textShadow","transform","_react_voodoo_utils_css_demux_typed_int_js","_react_voodoo_utils_css_demux_typed_color_js","_react_voodoo_utils_css_demux_typed_multi_js","_react_voodoo_utils_css_demux_typed_number_js","_react_voodoo_utils_css_demux_typed_shadow_js","color","int","multi","number","shadow","TweenAxis","state","componentWillUnmount","_tweenLines","forEach","axe","_previousTweener","rmScrollableAnim","_previousScrollable","render","props","children","scrollFirst","bounds","scrollableWindow","inertia","size","defaultPosition","items","tweener","_previousAxis","_previousInertia","initAxis","scrollableBounds","_lastTL","addScrollableAnim","_previousTweens","React","Component","propTypes","PropTypes","string","isRequired","array","object","any","setTarget","anims","target","map","tween","TweenRef","__tweenableId","shortid","generate","_tweenAxisObj","_currentTweener","rmTweenRef","setRootRef","undefined","id","style","initial","pos","noRef","reset","isRoot","tweenLines","tweenAxis","onClick","onDoubleClick","parentTweener","console","error","twRef","tweenRef","axisItemsChange","_tweenAxis","deepEqual","is","scrollY","reduce","h","_updateTweenRef","hasOwnProperty","refChild","Children","only","isValidElement","cloneElement","e","_lastRef","div","className","TweenerContext","createContext","Tweenable","asTweener","isBrowserSide","Function","isArray","_live","lastTm","_running","SimpleObjectProto","constructor","Runner","run","tl","ctx","duration","cb","apply","go","push","cpos","Date","now","setTimeout","_tick","o","tm","delta","Math","min","splice","argz","BaseComponent","prototype","shift","opts","wheelRatio","maxClickTm","maxClickOffset","TweenableComp","arguments","_updateNodeInertia","_","current","ln","activeInertia","_inertiaRaf","cancelAnimationFrame","x","active","holding","scrollLeft","update","y","scrollTop","slice","requestAnimationFrame","_swap","refs","muxByTarget","box","z","_rafLoop","bind","__isTweener","rootRef","forwardedRef","createRef","iStyle","iMap","noref","mapReset","makeTweenable","tweenableMap","initials","tweenRefs","tweenRefTargets","iMapOrigin","tweenRefOriginCss","deMuxTween","muxDataByTarget","tweenRefOrigin","key","tweenRefMaps","clearTweenableValue","tweenRefCSS","muxToCss","assign","ref","node","indexOf","resetTweenable","targets","t","_updateTweenRefs","updateRefStyle","postPone","m","getTweenableRef","ReactDom","findDOMNode","getRootNode","pushAnim","anim","then","keepResults","sl","fail","deMuxLine","warn","displayName","Promise","resolve","runningAnims","rkey","destroy","live","applyTweenState","tmap","p","_inertia","scrollableArea","_scrollableArea","_scrollableBounds","_scrollableWindow","makeScrollable","dim","axes","scrollPos","max","targetPos","Inertia","value","nextDescr","wayPoints","setBounds","_getAxis","initialScrollPos","getAxisState","scrollTo","newPos","ms","ease","reject","oldPos","setPos","componentDidScroll","goTo","_runScrollGoTo","easingFn","_detectCurrentSnap","muxed","found","twAxis","to","easing","tick","from","tweenEnabled","getScrollableNodes","scrollable","domUtils","findReactParents","hookScrollableTargets","document","getElementById","componentShouldScroll","_registerScrollListeners","_static","rendered","rootNode","debounceTm","debounceTr","scrollLoad","lastScrollEvt","_parentTweener","addWheelEvent","onScroll","prevent","deltaY","deltaX","originalEvent","_doDispatch","elementFromPoint","clientX","clientY","stopPropagation","preventDefault","lastStartTm","cLock","dX","parents","dY","parentsState","addEvent","dragList","touch","descr","scrollEnabled","element","getComputedStyle","test","getPropertyValue","scrollX","abs","xDispatched","vX","yDispatched","vY","cState","_lastPos","_startPos","dragDirectionLock","startMove","inertiaFrame","applyInertia","isAxisOut","hold","scrollHeight","clientHeight","scrollWidth","clientWidth","cancelable","release","enableMouseDrag","doRegister","isInertiaActive","dispatchScroll","dispatch","axis","v","round","dx","dy","Comps","headTarget","nodeInertia","_activateNodeInertia","findIndex","item","offsetLeft","offsetHeight","tweenRefInitialData","tweenRefDemuxed","window","addEventListener","onResize","_updateBox","windowDidResize","scrollHook","inited","offsetWidth","force","swap","changes","removeEventListener","rmWheelEvent","removeEvent","componentDidMount","scrollableAnim","__isFirst","componentDidUpdate","prevProps","prevState","String","fromCharCode","name","withRef","forwardRef","withTweener","TweenerToProps","recyclableTweenAxis","CssTweenAxis","cfg","scope","recyled","pop","localLength","mount","__marks","__marksLength","__marksKeys","__processors","__config","__activeForks","__activeProcess","__outgoing","__incoming","__cPos","__cIndex","__cMaxKey","units","unitsRe","RegExp","join","floatCut","Number","toFixed","expandShorthandProperty","property","type","childProps","properties","values","multiple","k","isShorthandProperty","isValidDeclaration","canAnimate","getProperty","expand","exports","prop","ret","Array","subProp","defaultUnits","blur","brightness","contrast","dropShadow","grayscale","hueRotate","invert","opacity","saturate","sepia","filters","twKey","cssMap","dataMap","muxerMap","keepValues","path","tmpKey","log","demux","tweenable","data","fkey","dkey","mux","fValue","match","parseFloat","translateX","translateY","translateZ","scale","scaleZ","scaleX","scaleY","rotate","skewX","skewY","rotateX","rotateY","rotateZ","perspective","defaultBox","left","right","top","bottom","width","height","defaultValue","demuxOne","unitIndex","twVal","baseKey","unit","transforms","tmpValue","ti","unitKey","u","iValue","substr","muxOne","noPropLock","realKey","reOrder","baseData","vect","rgba","alias","center","offset","count","nowhere","rKey","muxer","shadows","shadowData","shadowObj","inset","blurRadius","offsetX","offsetY","spreadRadius","fKey","cssShadowParser","stringify","parsedValues","parse","cssDemux","cssDemuxers","marginTop","marginLeft","marginRight","marginBottom","paddingTop","paddingLeft","paddingRight","paddingBottom","transformOrigin","zIndex","cssKey","css","demuxers","deMuxedTween","fTween","excluded","tweenLine","allPropsById","line","demuxedTween","addCss","isBrowser","isTouch","is_touch_device","prefixes","mq","query","matchMedia","matches","DocumentTouch","_dom","prefix","navigator","appVersion","userAgent","dashedPrefix","__","onPageHided","onPageShown","dragging","dragEnabled","dragEnabledDesc","fingers","nbFingers","dragstartAnywhere","me","finger","desc","Dom","dragAnywhere","dropAnywhere","dropWithoutClick","changedTouches","identifier","pageX","pageY","_startTs","timeStamp","dragstart","call","stopped","drag","preventNextClick","stopImmediatePropagation","mouseDrag","dropped","getDraggable","locks","dragEnd","freeDraggable","addOverflowEvent","addFlowListener","fn","flow","orient","horizontalOverflow","verticalOverflow","bubble","attachEvent","related","detachEvent","rmDragFn","arr","passive","elem","dims","parseInt","offsetTop","offsetParent","_addEventListener","_rmEventListener","onwheel","support","createElement","onmousewheel","addWheelListener","callback","useCapture","_addWheelListener","PIXEL_STEP","LINE_HEIGHT","PAGE_HEIGHT","normalizeWheel","event","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","HORIZONTAL_AXIS","deltaMode","spinX","spinY","pixelX","pixelY","eventName","_wheelList","srcElement","delatZ","returnValue","normalized","rmWheelListener","_EventListener","fiberNode","comps","startsWith","return","stateNode","includes","parentNode","signOf","sign","NaN","floor","consts","velocityResetTm","clickTm","velSign","lastVelocity","loopsTarget","loopsVelSum","pow","targetDist","refFPS","targetDuration","inertiaByNode","nodes","opt","conf","config","currentStop","lastInertiaPos","stops","inertiaFn","easePolyOut","targetWayPointIndex","at","nextValue","loop","shouldLoop","teleport","inertiaStartTm","targetWayPoint","currentWayPoint","currentWayPointIndex","onInertiaEnd","setWayPoints","loopDist","inertiaLastTm","_doSnap","isOutbound","forceSnap","maxDuration","mid","i2","maxJump","d","willSnap","infinite","baseTS","startTS","lastIVelocity","lastAccel","posDiff","sinceLastPos","iVel","re_cssValueWithUnit","cssAdd","val1","val2","units1","units2","remap","result","cssMult","val","start","withOffset","iDuration","inverseValues","reverse","sources","source","addAllType","v1","v2","values1","values2","r","extractCss","inverse","shiftTransforms","unshift"],"mappings":"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","file":"react-voodoo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* This is a virtual file generated by webpack-inherit */\nlet req, _exports = {}, cExport, fPath, i;\nconst _react_voodoo_utils_css_demux_filter_js = require(\"react-voodoo/utils/css/demux/filter.js\");\ncExport=_exports;\nfPath=\"filter\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_filter_js).length === 1 && _react_voodoo_utils_css_demux_filter_js.default || _react_voodoo_utils_css_demux_filter_js;\n}\n\nconst _react_voodoo_utils_css_demux_boxShadow_js = require(\"react-voodoo/utils/css/demux/boxShadow.js\");\ncExport=_exports;\nfPath=\"boxShadow\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_boxShadow_js).length === 1 && _react_voodoo_utils_css_demux_boxShadow_js.default || _react_voodoo_utils_css_demux_boxShadow_js;\n}\n\nconst _react_voodoo_utils_css_demux_transform_js = require(\"react-voodoo/utils/css/demux/transform.js\");\ncExport=_exports;\nfPath=\"transform\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_transform_js).length === 1 && _react_voodoo_utils_css_demux_transform_js.default || _react_voodoo_utils_css_demux_transform_js;\n}\n\nconst _react_voodoo_utils_css_demux_textShadow_js = require(\"react-voodoo/utils/css/demux/textShadow.js\");\ncExport=_exports;\nfPath=\"textShadow\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_textShadow_js).length === 1 && _react_voodoo_utils_css_demux_textShadow_js.default || _react_voodoo_utils_css_demux_textShadow_js;\n}\n\nconst _react_voodoo_utils_css_demux_backgroundColor_js = require(\"react-voodoo/utils/css/demux/backgroundColor.js\");\ncExport=_exports;\nfPath=\"backgroundColor\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_backgroundColor_js).length === 1 && _react_voodoo_utils_css_demux_backgroundColor_js.default || _react_voodoo_utils_css_demux_backgroundColor_js;\n}\n\nexport const backgroundColor = _exports.backgroundColor;\n\nexport const boxShadow = _exports.boxShadow;\n\nexport const filter = _exports.filter;\n\nexport const textShadow = _exports.textShadow;\n\nexport const transform = _exports.transform;\n\nexport default _exports;","/* This is a virtual file generated by webpack-inherit */\nlet req, _exports = {}, cExport, fPath, i;\nconst _react_voodoo_utils_css_demux_typed_int_js = require(\"react-voodoo/utils/css/demux/typed/int.js\");\ncExport=_exports;\nfPath=\"int\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_typed_int_js).length === 1 && _react_voodoo_utils_css_demux_typed_int_js.default || _react_voodoo_utils_css_demux_typed_int_js;\n}\n\nconst _react_voodoo_utils_css_demux_typed_color_js = require(\"react-voodoo/utils/css/demux/typed/color.js\");\ncExport=_exports;\nfPath=\"color\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_typed_color_js).length === 1 && _react_voodoo_utils_css_demux_typed_color_js.default || _react_voodoo_utils_css_demux_typed_color_js;\n}\n\nconst _react_voodoo_utils_css_demux_typed_multi_js = require(\"react-voodoo/utils/css/demux/typed/multi.js\");\ncExport=_exports;\nfPath=\"multi\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_typed_multi_js).length === 1 && _react_voodoo_utils_css_demux_typed_multi_js.default || _react_voodoo_utils_css_demux_typed_multi_js;\n}\n\nconst _react_voodoo_utils_css_demux_typed_number_js = require(\"react-voodoo/utils/css/demux/typed/number.js\");\ncExport=_exports;\nfPath=\"number\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_typed_number_js).length === 1 && _react_voodoo_utils_css_demux_typed_number_js.default || _react_voodoo_utils_css_demux_typed_number_js;\n}\n\nconst _react_voodoo_utils_css_demux_typed_shadow_js = require(\"react-voodoo/utils/css/demux/typed/shadow.js\");\ncExport=_exports;\nfPath=\"shadow\".split('/');\ni=0;while(i<fPath.length-1) cExport=cExport[fPath[i]]=cExport[fPath[i]]||{}, i++;\n\nif (!cExport[fPath[i]]){\n    cExport[fPath[i]] = Object.keys(_react_voodoo_utils_css_demux_typed_shadow_js).length === 1 && _react_voodoo_utils_css_demux_typed_shadow_js.default || _react_voodoo_utils_css_demux_typed_shadow_js;\n}\n\nexport const color = _exports.color;\n\nexport const int = _exports.int;\n\nexport const multi = _exports.multi;\n\nexport const number = _exports.number;\n\nexport const shadow = _exports.shadow;\n\nexport default _exports;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport PropTypes from \"prop-types\";\nimport React     from 'react';\n\nimport TweenerContext from \"./TweenerContext\";\n\nexport default class TweenAxis extends React.Component {\n\tstatic propTypes = {\n\t\taxe            : PropTypes.string.isRequired,\n\t\titems          : PropTypes.array,\n\t\tbounds         : PropTypes.object,\n\t\tinertia        : PropTypes.any,\n\t\tdefaultPosition: PropTypes.number,\n\t\tsize           : PropTypes.any\n\t};\n\tstate            = {};\n\t\n\tcomponentWillUnmount() {\n\t\t\n\t\tif ( this._tweenLines ) {\n\t\t\tObject.keys(this._tweenLines)\n\t\t\t      .forEach(axe => this._previousTweener.rmScrollableAnim(this._tweenLines[axe], axe));\n\t\t\t\n\t\t}\n\t\tdelete this._previousTweener;\n\t\tdelete this._previousScrollable;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    axe, scrollFirst, bounds,\n\t\t\t    scrollableWindow, inertia, size, defaultPosition,\n\t\t\t    items = [],\n\t\t    } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\ttweener => {\n\t\t\t\t\t//if ( React.isValidElement(children) ) {\n\t\t\t\t\t//\tchildren = React.cloneElement(\n\t\t\t\t\t//\t\tchildren,\n\t\t\t\t\t//\t\t{\n\t\t\t\t\t//\t\t\t...tweener.tweenRef(id, style || children.props.style, initial, pos, noRef, reset),\n\t\t\t\t\t//\t\t\tonDoubleClick: onDoubleClick && (e => onDoubleClick(e, tweener)),\n\t\t\t\t\t//\t\t\tonClick      : onClick && (e => onClick(e, tweener))\n\t\t\t\t\t//\t\t}\n\t\t\t\t\t//\t);\n\t\t\t\t\t//\n\t\t\t\t\t//}\n\t\t\t\t\tif ( !this._previousAxis || this._previousAxis !== axe ) {//....\n\t\t\t\t\t\tthis._previousAxis    = axe;\n\t\t\t\t\t\tthis._previousInertia = inertia;\n\t\t\t\t\t\ttweener.initAxis(axe, {\n\t\t\t\t\t\t\tinertia,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscrollableWindow,\n\t\t\t\t\t\t\tdefaultPosition,\n\t\t\t\t\t\t\tscrollFirst,\n\t\t\t\t\t\t\tscrollableBounds: bounds\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t}\n\t\t\t\t\telse if ( !this._previousInertia || this._previousInertia !== inertia ) {//....\n\t\t\t\t\t\tthis._previousInertia = inertia;\n\t\t\t\t\t\tthis._previousAxis    = axe;\n\t\t\t\t\t\ttweener.initAxis(axe, {\n\t\t\t\t\t\t\tinertia,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscrollableWindow,\n\t\t\t\t\t\t\tdefaultPosition,\n\t\t\t\t\t\t\tscrollFirst,\n\t\t\t\t\t\t\tscrollableBounds: bounds\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif ( !this._previousTweener || this._previousTweener !== tweener ) {// mk axe not modifiable\n\t\t\t\t\t\tthis._previousTweener && this._lastTL && this._previousTweener.rmScrollableAnim(this._lastTL, this._previousAxis);\n\t\t\t\t\t\tif ( items.length )\n\t\t\t\t\t\t\tthis._lastTL = tweener.addScrollableAnim(items, axe, size);\n\t\t\t\t\t\tthis._previousTweener = tweener;\n\t\t\t\t\t\tthis._previousTweens  = items;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( this._previousTweens !== items ) {\n\t\t\t\t\t\tthis._lastTL && tweener.rmScrollableAnim(this._lastTL, this._previousAxis);\n\t\t\t\t\t\tthis._lastTL = null;\n\t\t\t\t\t\tif ( items.length )\n\t\t\t\t\t\t\tthis._lastTL = tweener.addScrollableAnim(items, axe, size);\n\t\t\t\t\t\tthis._previousTweens = items;\n\t\t\t\t\t}\n\t\t\t\t\treturn <React.Fragment/>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport deepEqual from \"fast-deep-equal\";\nimport is        from \"is\";\nimport React     from 'react';\nimport shortid   from 'shortid';\n\nimport TweenerContext from \"./TweenerContext\";\n\nfunction setTarget( anims, target ) {\n\treturn anims.map(\n\t\ttween => ({\n\t\t\t...tween,\n\t\t\ttarget\n\t\t})\n\t)\n}\n\nexport default class TweenRef extends React.Component {\n\t\n\tstatic propTypes = {};\n\tstate            = {};\n\t__tweenableId    = shortid.generate();\n\t\n\tcomponentWillUnmount() {\n\t\tif ( this._tweenAxisObj ) {\n\t\t\tObject.keys(this._tweenAxisObj)\n\t\t\t      .forEach(axe => this._currentTweener.rmScrollableAnim(this._tweenAxisObj[axe], axe));\n\t\t\t\n\t\t}\n\t\tif ( this._currentTweener ) {\n\t\t\tthis._currentTweener.rmTweenRef(this.__tweenableId)\n\t\t\tthis._currentTweener.setRootRef(undefined);\n\t\t}\n\t\tdelete this._currentTweener;\n\t\tdelete this._tweenAxisObj;\n\t\tdelete this._previousScrollable;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    id            = this.__tweenableId,\n\t\t\t    style, initial, pos, noRef, reset, tweener,\n\t\t\t    isRoot,\n\t\t\t    tweenLines,\n\t\t\t    tweenAxis     = tweenLines,\n\t\t\t    onClick       = children && children.props && children.props.onClick,\n\t\t\t    onDoubleClick = children && children.props && children.props.onDoubleClick\n\t\t    } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\tparentTweener => {//@todo : must be better method\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tparentTweener = tweener || parentTweener;\n\t\t\t\t\t\n\t\t\t\t\tif ( !parentTweener ) {\n\t\t\t\t\t\tconsole.error(\"No voodoo tweener found in the context, is there any parent with asTweener ?\")\n\t\t\t\t\t\treturn <React.Fragment/>;\n\t\t\t\t\t}\n\t\t\t\t\t//console.warn(\"render : \", this.__tweenableId, this._currentTweener, parentTweener,\n\t\t\t\t\t// this._currentTweener !== parentTweener)\n\t\t\t\t\tlet twRef = parentTweener.tweenRef(id, children.props && children.props.style, style || initial,\n\t\t\t\t\t                                   pos, noRef),\n\t\t\t\t\t    axisItemsChange;\n\t\t\t\t\t\n\t\t\t\t\t//console.warn(\"render2 : \", this.__tweenableId, this._currentTweener, parentTweener,\n\t\t\t\t\t// this._currentTweener !== parentTweener)\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif ( this._currentTweener !== parentTweener || this._previousScrollable !== tweenAxis ) {\n\t\t\t\t\t\taxisItemsChange = this._tweenAxis !== tweenAxis && !(this._tweenAxis && deepEqual(tweenAxis, this._tweenAxis));\n\t\t\t\t\t\tif ( this._currentTweener && axisItemsChange ) {\n\t\t\t\t\t\t\tObject.keys(this._tweenAxisObj)\n\t\t\t\t\t\t\t      .forEach(axe => this._currentTweener.rmScrollableAnim(this._tweenAxisObj[axe], axe));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(twRef, axisItemsChange, this._tweenAxis, tweenAxis)\n\t\t\t\t\t\tif ( this._currentTweener && this._currentTweener !== parentTweener ) {\n\t\t\t\t\t\t\tthis._currentTweener.rmTweenRef(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( axisItemsChange ) {\n\t\t\t\t\t\t\tthis._tweenAxis = tweenAxis;\n\t\t\t\t\t\t\tif ( tweenAxis && is.array(tweenAxis) )\n\t\t\t\t\t\t\t\tthis._tweenAxisObj = { scrollY: parentTweener.addScrollableAnim(setTarget(tweenAxis, id)) };\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis._tweenAxisObj = Object.keys(tweenAxis)\n\t\t\t\t\t\t\t\t                           .reduce(( h, axe ) => (h[axe] = parentTweener.addScrollableAnim(setTarget(tweenAxis[axe], id), axe), h), {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\ttwRef.style = { ...parentTweener._updateTweenRef(id) };\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( this.props.hasOwnProperty(\"isRoot\") ) {\n\t\t\t\t\t\t\tthis._currentTweener && this._currentTweener.setRootRef(undefined);\n\t\t\t\t\t\t\ttweener.setRootRef(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._currentTweener     = parentTweener;\n\t\t\t\t\t\tthis._previousScrollable = tweenAxis;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if ( twRef ) {\n\t\t\t\t\t\ttwRef.style = { ...parentTweener._updateTweenRef(id) };\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet refChild = React.Children.only(children);\n\t\t\t\t\t\n\t\t\t\t\tif ( refChild && React.isValidElement(refChild) ) {\n\t\t\t\t\t\trefChild      = React.cloneElement(\n\t\t\t\t\t\t\trefChild,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...twRef,\n\t\t\t\t\t\t\t\tonDoubleClick: onDoubleClick && (e => onDoubleClick(e, parentTweener)),\n\t\t\t\t\t\t\t\tonClick      : onClick && (e => onClick(e, parentTweener))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._lastRef = twRef;\n\t\t\t\t\t\treturn refChild;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconsole.error(\"Invalid voodoo TweenRef child : \", id)\n\t\t\t\t\t}\n\t\t\t\t\treturn <div>Invalid</div>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}\n\nTweenRef.div = ( { children, className, ...props } ) => {\n\treturn <TweenRef {...props}>\n\t\t<div className={className}>{children}</div>\n\t</TweenRef>;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\n\nconst TweenerContext = React.createContext(null);\nexport default TweenerContext","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {Component}     from 'react';\nimport TweenAxis       from './comps/TweenAxis';\nimport TweenerContext  from './comps/TweenerContext';\nimport TweenRef        from './comps/TweenRef';\nimport asTweener       from './spells/asTweener';\nimport withTweener     from './spells/withTweener';\nimport * as tweenTools from './utils/tweenTools.js';\n\n@asTweener\nclass Tweenable extends Component {\n\trender() {\n\t\treturn this.props.children;\n\t}\n}\n\n\nexport {asTweener, withTweener, tweenTools, Tweenable, TweenRef, TweenerContext, TweenAxis};\nexport default Tweenable;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as easingFn                                          from \"d3-ease\";\nimport deepEqual                                              from \"fast-deep-equal\";\nimport is                                                     from \"is\";\nimport React                                                  from \"react\";\nimport ReactDom                                               from \"react-dom\";\nimport TweenerContext                                         from \"../comps/TweenerContext\";\nimport {clearTweenableValue, deMuxLine, deMuxTween, muxToCss} from \"../utils/css\";\nimport tweenAxis                                              from \"../utils/CssTweenAxis\";\nimport domUtils                                               from \"../utils/dom\";\nimport Inertia                                                from '../utils/inertia';\n\n/**\n * @todo : clean & comments\n */\n\n\nlet isBrowserSide           = (new Function(\"try {return this===window;}catch(e){ return false;}\"))(),\n    isArray                 = is.array,\n    _live, lastTm, _running = [];\n\nconst SimpleObjectProto = ({}).constructor;\n\nconst Runner = {\n\trun  : function ( tl, ctx, duration, cb ) {\n\t\tlet apply = ( pos, size ) => tl.go(pos / size, ctx);\n\t\t_running.push({ apply, duration, cpos: 0, cb });\n\t\ttl.go(0, ctx, true);//reset tl\n\t\t\n\t\tif ( !_live ) {\n\t\t\t_live  = true;\n\t\t\tlastTm = Date.now();\n\t\t\t// console.log(\"TL runner On\");\n\t\t\tsetTimeout(this._tick, 16);\n\t\t}\n\t},\n\t_tick: function _tick() {\n\t\tlet i  = 0, o, tm = Date.now(), delta = tm - lastTm;\n\t\tlastTm = tm;\n\t\tfor ( ; i < _running.length; i++ ) {\n\t\t\t_running[i].cpos = Math.min(delta + _running[i].cpos, _running[i].duration);//cpos\n\t\t\t_running[i].apply(\n\t\t\t\t_running[i].cpos, _running[i].duration\n\t\t\t);\n\t\t\t// console.log(\"TL runner \",_running[i][3]);\n\t\t\tif ( _running[i].cpos == _running[i].duration ) {\n\t\t\t\t\n\t\t\t\t_running[i].cb && setTimeout(_running[i].cb);\n\t\t\t\t_running.splice(i, 1), i--;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tif ( _running.length )\n\t\t\tsetTimeout(_tick, 16);\n\t\telse {\n\t\t\t// console.log(\"TL runner Off\");\n\t\t\t_live = false;\n\t\t}\n\t},\n};\n\n\n/**\n * asTweener decorator\n * @param argz\n * @returns {*}\n */\nexport default function asTweener( ...argz ) {\n\t\n\tlet BaseComponent = (!argz[0] || argz[0].prototype instanceof React.Component || argz[0] === React.Component) && argz.shift(),\n\t    opts          = (!argz[0] || argz[0] instanceof SimpleObjectProto) && argz.shift() || {};\n\t\n\tif ( !BaseComponent ) {\n\t\treturn function ( BaseComponent ) {\n\t\t\treturn asTweener(BaseComponent, opts)\n\t\t}\n\t}\n\t\n\topts = {\n\t\twheelRatio    : 5,\n\t\tmaxClickTm    : 200,\n\t\tmaxClickOffset: 20,\n\t\t...opts,\n\t};\n\t\n\tclass TweenableComp extends React.Component {\n\t\tstatic displayName = String.fromCharCode(0xD83E, 0xDDD9) + (BaseComponent.displayName || BaseComponent.name);// mage\n\t\t\n\t\tconstructor() {\n\t\t\tsuper(...arguments);\n\t\t\tthis._           = {\n\t\t\t\trefs       : {},\n\t\t\t\tmuxByTarget: {},\n\t\t\t};\n\t\t\tthis._.box       = {\n\t\t\t\tx: 100,\n\t\t\t\ty: 100,\n\t\t\t\tz: 800\n\t\t\t};\n\t\t\tthis._._rafLoop  = this._rafLoop.bind(this);\n\t\t\tthis.__isTweener = true;\n\t\t\tthis._.rootRef   = this.props.forwardedRef || React.createRef();\n\t\t}\n\t\t\n\t\t// ------------------------------------------------------------\n\t\t// -------------------- TweenRefs utils -----------------------\n\t\t// ------------------------------------------------------------\n\t\t\n\t\t/**\n\t\t * Register tweenable element\n\t\t * return its current style\n\t\t * @param id\n\t\t * @param iStyle\n\t\t * @param iMap\n\t\t * @param pos\n\t\t * @param noref\n\t\t * @param mapReset\n\t\t * @returns {style,ref}\n\t\t */\n\t\ttweenRef( id, iStyle = {}, iMap = {}, pos, noref, mapReset ) {// ref initial style\n\t\t\tthis.makeTweenable();\n\t\t\t\n\t\t\tlet _            = this._,\n\t\t\t    tweenableMap = {};\n\t\t\t\n\t\t\tlet initials = {};\n\t\t\tif ( !_.tweenRefs[id] )\n\t\t\t\t_.tweenRefTargets.push(id);\n\t\t\t\n\t\t\t//debugger\n\t\t\t//console.warn('ref ', id, { ...iMap })\n\t\t\t\n\t\t\tif ( _.tweenRefs[id] && (\n\t\t\t\tmapReset\n\t\t\t\t|| (_.iMapOrigin[id] !== iMap && !deepEqual(iMap, _.iMapOrigin[id]))\n\t\t\t\t|| (_.tweenRefOriginCss[id] !== iStyle && !deepEqual(iStyle, _.tweenRefOriginCss[id]))\n\t\t\t) ) {\n\t\t\t\t// hot switch initial values\n\t\t\t\t//console.warn('ref exist & style is !==', id, iStyle,\n\t\t\t\t//             _.tweenRefOriginCss[id], mapReset)\n\t\t\t\t_.iMapOrigin[id]        = iMap;\n\t\t\t\t_.tweenRefOriginCss[id] = iStyle;\n\t\t\t\tiStyle                  = iStyle || {};\n\t\t\t\tiMap                    = iMap || {};\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id], false, true) };\n\t\t\t\t\n\t\t\t\t//console.log(\"update ref\", id)\n\t\t\t\t\n\t\t\t\t// minus initial values\n\t\t\t\tObject.keys(_.tweenRefOrigin[id])\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] -= _.tweenRefOrigin[id][key])\n\t\t\t\t      );\n\t\t\t\t// set defaults values in case of\n\t\t\t\tObject.keys(initials)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] = is.number(_.tweenRefMaps[id][key])\n\t\t\t\t\t                                        ? _.tweenRefMaps[id][key]\n\t\t\t\t\t                                        : initials[key])\n\t\t\t\t      );\n\t\t\t\t// add new initial values\n\t\t\t\tObject.keys(tweenableMap)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] += tweenableMap[key])\n\t\t\t\t      );\n\t\t\t\t\n\t\t\t\tObject.keys(_.tweenRefOrigin[id])// unset\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => {\n\t\t\t\t\t\t      clearTweenableValue(key, key, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id])\n\t\t\t\t\t      }\n\t\t\t\t      );\n\t\t\t\t_.tweenRefOrigin[id] = { ...tweenableMap };\n\t\t\t\t\n\t\t\t\tmuxToCss(_.tweenRefMaps[id], _.tweenRefCSS[id], _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t\t\tthis._updateTweenRef(id, true);\n\t\t\t}\n\t\t\telse if ( !_.tweenRefs[id] ) {\n\t\t\t\t//console.log(\"init ref\", id)\n\t\t\t\t\n\t\t\t\t_.iMapOrigin[id] = iMap;\n\t\t\t\tiStyle           = iStyle || {};\n\t\t\t\tiMap             = iMap || {};\n\t\t\t\t\n\t\t\t\t_.tweenRefs[id]       = true;\n\t\t\t\t_.muxByTarget[id]     = _.muxByTarget[id] || {};\n\t\t\t\t_.muxDataByTarget[id] = _.muxDataByTarget[id] || {};\n\t\t\t\t\n\t\t\t\t_.tweenRefOriginCss[id] = iStyle;\n\t\t\t\t\n\t\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id]) };\n\t\t\t\t\n\t\t\t\t_.tweenRefOrigin[id] = { ...tweenableMap };\n\t\t\t\t_.tweenRefCSS[id]    = iStyle;\n\t\t\t\t_.tweenRefMaps[id]   = _.tweenRefMaps[id] || {};\n\t\t\t\t\n\t\t\t\t// init / reset or get the tweenable view\n\t\t\t\ttweenableMap = Object.assign({}, initials, tweenableMap || {});\n\t\t\t\t\n\t\t\t\t// set defaults values in case of\n\t\t\t\t// add new initial values\n\t\t\t\tObject.keys(tweenableMap)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] = (_.tweenRefMaps[id][key] || 0) + tweenableMap[key])\n\t\t\t\t      );\n\t\t\t\ttweenableMap = _.tweenRefMaps[id];\n\t\t\t\tmuxToCss(tweenableMap, iStyle, _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t\t\t//console.log('tweenRef::tweenRef:newref: ', id, { ..._.tweenRefCSS[id] }, { ..._.tweenRefMaps[id] });\n\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//console.log(\"maj ref\", id)\n\t\t\t\t\n\t\t\t\tmuxToCss(_.tweenRefMaps[id], _.tweenRefCSS[id], _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t\t}\n\t\t\t//console.log('tweenRef::tweenRef:519: ', id, { ..._.muxDataByTarget[id] }, { ..._.tweenRefCSS[id] });\n\t\t\tif ( noref )\n\t\t\t\treturn {\n\t\t\t\t\tstyle: { ..._.tweenRefCSS[id] }\n\t\t\t\t};\n\t\t\telse\n\t\t\t\treturn {\n\t\t\t\t\tstyle: { ..._.tweenRefCSS[id] },\n\t\t\t\t\tref  : node => (_.refs[id] = node)\n\t\t\t\t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Delete tweenable element\n\t\t * @param id\n\t\t */\n\t\trmTweenRef( id ) {\n\t\t\tif ( this._.tweenRefs[id] ) {\n\t\t\t\tthis._.tweenRefTargets.splice(this._.tweenRefTargets.indexOf(id), 1);\n\t\t\t\tdelete this._.tweenRefs[id];\n\t\t\t\tdelete this._.muxByTarget[id];\n\t\t\t\tdelete this._.muxDataByTarget[id];\n\t\t\t\tdelete this._.iMapOrigin[id];\n\t\t\t\tdelete this._.tweenRefOrigin[id];\n\t\t\t\tdelete this._.tweenRefCSS[id];\n\t\t\t\tdelete this._.tweenRefMaps[id];\n\t\t\t\tdelete this._.refs[id];\n\t\t\t}\n\t\t}\n\t\t\n\t\t/**\n\t\t * Reset tweenRefs\n\t\t * @param targets\n\t\t */\n\t\tresetTweenable( ...targets ) {\n\t\t\tlet _ = this._;\n\t\t\ttargets.forEach(\n\t\t\t\t( t ) => {\n\t\t\t\t\tthis.tweenRef(t, _.tweenRefOriginCss[t], _.iMapOrigin[t], null, null, true)\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis._updateTweenRefs();\n\t\t}\n\t\t\n\t\t/**\n\t\t * Update tweenRefs style ( anims & axis will still update the ref )\n\t\t * @param target\n\t\t * @param style\n\t\t * @param postPone\n\t\t * @returns {*}\n\t\t */\n\t\tupdateRefStyle( target, style, postPone ) {\n\t\t\tlet _ = this._, initials = {};\n\t\t\tif ( isArray(target) && isArray(style) )\n\t\t\t\treturn target.map(( m, i ) => this.updateRefStyle(m, style[i], postPone));\n\t\t\tif ( isArray(target) )\n\t\t\t\treturn target.map(( m ) => this.updateRefStyle(m, style, postPone));\n\t\t\t\n\t\t\tif ( !this._.tweenRefCSS )\n\t\t\t\tthis.makeTweenable();\n\t\t\t\n\t\t\tdeMuxTween(style, _.tweenRefMaps[target], initials, _.muxDataByTarget[target], _.muxByTarget[target], true);\n\t\t\tthis._updateTweenRef(target);\n\t\t}\n\t\t\n\t\t/**\n\t\t * Retrieve the tween ref dom node\n\t\t * @param id\n\t\t * @returns {*}\n\t\t */\n\t\tgetTweenableRef( id ) {\n\t\t\treturn this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]);\n\t\t}\n\t\t\n\t\t/**\n\t\t * Get the root dom node of the tweener element\n\t\t * @returns {*}\n\t\t */\n\t\tgetRootNode() {\n\t\t\treturn this._.rootRef && this.getTweenableRef(this._.rootRef) || ReactDom.findDOMNode(this);\n\t\t}\n\t\t\n\t\t// ------------------------------------------------------------\n\t\t// -------------------- Pushable anims ------------------------\n\t\t// ------------------------------------------------------------\n\t\t\n\t\t/**\n\t\t * Push anims\n\t\t * @param anim\n\t\t * @param then\n\t\t * @param skipInit\n\t\t * @returns {tweenAxis}\n\t\t */\n\t\tpushAnim( anim, then, keepResults = true ) {\n\t\t\tlet sl,\n\t\t\t    initial,\n\t\t\t    _        = this._,\n\t\t\t    initials = {},\n\t\t\t    fail;\n\t\t\t\n\t\t\tif ( isArray(anim) ) {\n\t\t\t\tsl = anim;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsl      = anim.anims;\n\t\t\t\tinitial = anim.initial;\n\t\t\t}\n\t\t\t\n\t\t\tif ( !(sl instanceof tweenAxis) ) {\n\t\t\t\t// tweenLine, initials, data, demuxers\n\t\t\t\tsl = deMuxLine(sl, initials, this._.muxDataByTarget, this._.muxByTarget);\n\t\t\t\tsl = new tweenAxis(sl, this._.tweenRefMaps);\n\t\t\t\tObject.keys(initials)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      id => (\n\t\t\t\t\t\t      this._.tweenRefMaps[id] &&\n\t\t\t\t\t\t      Object.assign(this._.tweenRefMaps[id], {\n\t\t\t\t\t\t\t      ...initials[id],\n\t\t\t\t\t\t\t      ...this._.tweenRefMaps[id]\n\t\t\t\t\t\t      }) || (fail = console.warn(\"react-voodoo : Can't find tween target \", id, \" in \", TweenableComp.displayName) || true)\n\t\t\t\t\t      )\n\t\t\t\t      )\n\t\t\t}\n\t\t\tif ( fail )\n\t\t\t\treturn;\n\t\t\t\n\t\t\tthis.makeTweenable();\n\t\t\t\n\t\t\treturn new Promise(\n\t\t\t\tresolve => {\n\t\t\t\t\t\n\t\t\t\t\t// start timer launch @todo\n\t\t\t\t\tsl.run(this._.tweenRefMaps, () => {\n\t\t\t\t\t\tlet i = this._.runningAnims.indexOf(sl);\n\t\t\t\t\t\tif ( i != -1 )\n\t\t\t\t\t\t\tthis._.runningAnims.splice(i, 1);\n\t\t\t\t\t\t//console.log( _.muxDataByTarget)\n\t\t\t\t\t\tObject.keys(initials)// unset\n\t\t\t\t\t\t      .forEach(\n\t\t\t\t\t\t\t      id => {\n\t\t\t\t\t\t\t\t      Object.keys(initials[id])// unset\n\t\t\t\t\t\t\t\t            .forEach(\n\t\t\t\t\t\t\t\t\t            rkey => {\n\t\t\t\t\t\t\t\t\t\t            // todo\n\t\t\t\t\t\t\t\t\t\t            clearTweenableValue(rkey, rkey, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id], keepResults)\n\t\t\t\t\t\t\t\t\t            })\n\t\t\t\t\t\t\t      });\n\t\t\t\t\t\tsl.destroy();\n\t\t\t\t\t\tresolve(sl);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis._.runningAnims.push(sl);\n\t\t\t\t\t\n\t\t\t\t\tif ( !this._.live ) {\n\t\t\t\t\t\tthis._.live = true;\n\t\t\t\t\t\trequestAnimationFrame(this._._rafLoop = this._._rafLoop || this._rafLoop.bind(this));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(sl => (then && then(sl)));\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * Update tweenRef raw tweened values\n\t\t * @param id\n\t\t * @param map\n\t\t * @param reset\n\t\t */\n\t\tapplyTweenState( id, map, reset ) {\n\t\t\tlet tmap = {}, initials = {};\n\t\t\tdeMuxTween(map, tmap, initials, this._.muxDataByTarget[id], this._.muxByTarget[id], true)\n\t\t\tObject.keys(tmap).map(\n\t\t\t\t( p ) => this._.tweenRefMaps[id][p] = (!reset && this._.tweenRefMaps[id][p] || initials[p]) + tmap[p]\n\t\t\t);\n\t\t}\n\t\t\n\t\t// ------------------------------------------------------------\n\t\t// ------------------ Scrollable axes -------------------------\n\t\t// ------------------------------------------------------------\n\t\t\n\t\t/**\n\t\t * Will init / update a scrollable axis\n\t\t * @param axe\n\t\t * @param _inertia\n\t\t * @param _scrollableArea\n\t\t * @param _scrollableBounds\n\t\t * @param _scrollableWindow\n\t\t * @param defaultPosition\n\t\t * @param scrollFirst\n\t\t * @param reset\n\t\t */\n\t\tinitAxis( axe, {\n\t\t\tinertia         : _inertia,\n\t\t\tscrollableArea  : _scrollableArea = 0,\n\t\t\tscrollableBounds: _scrollableBounds,\n\t\t\tscrollableWindow: _scrollableWindow,\n\t\t\tdefaultPosition,\n\t\t\tscrollFirst\n\t\t}, reset ) {\n\t\t\tthis.makeTweenable();\n\t\t\tthis.makeScrollable();\n\t\t\tlet _                = this._,\n\t\t\t    dim              = _.axes[axe],\n\t\t\t    scrollableBounds = _scrollableBounds,\n\t\t\t    scrollPos        = !reset && dim\n\t\t\t                       ? dim.scrollPos\n\t\t\t                       : defaultPosition || scrollableBounds && scrollableBounds.min || 0,\n\t\t\t    scrollableArea   = Math.max(dim && dim.scrollableArea || 0, _scrollableArea),\n\t\t\t    scrollableWindow = Math.max(dim && dim.scrollableWindow || 0, _scrollableWindow),\n\t\t\t    targetPos        = dim ? dim.targetPos : scrollPos,\n\t\t\t    inertia          = _inertia !== false && (\n\t\t\t\t    dim ? dim.inertia : new Inertia({// todo mk pure\n\t\t\t\t\t                                    ...(_inertia || {}),\n\t\t\t\t\t                                    value: scrollPos\n\t\t\t\t                                    })),\n\t\t\t    nextDescr        = {\n\t\t\t\t    //...(_inertia || {}),\n\t\t\t\t    scrollFirst,\n\t\t\t\t    tweenAxis: dim && dim.tweenAxis || [],\n\t\t\t\t    scrollPos,\n\t\t\t\t    targetPos,\n\t\t\t\t    inertia,\n\t\t\t\t    scrollableWindow,\n\t\t\t\t    scrollableBounds,\n\t\t\t\t    scrollableArea\n\t\t\t    };\n\t\t\t\n\t\t\tthis._.axes[axe] = nextDescr;\n\t\t\t(_inertia) && inertia && (inertia._.wayPoints = _inertia.wayPoints);\n\t\t\t(_inertia) && inertia && !inertia.active && (inertia._.pos = scrollPos);\n\t\t\tif ( inertia && scrollableBounds )\n\t\t\t\tinertia.setBounds(scrollableBounds.min, scrollableBounds.max);\n\t\t\telse\n\t\t\t\tinertia && inertia.setBounds(0, scrollableArea)\n\t\t}\n\t\t\n\t\t_getAxis( axe = \"scrollY\" ) {\n\t\t\tlet _ = this._;\n\t\t\t\n\t\t\t_.axes[axe] = _.axes[axe] || {\n\t\t\t\ttweenAxis       : [],\n\t\t\t\tscrollPos       : opts.initialScrollPos && opts.initialScrollPos[axe] || 0,\n\t\t\t\ttargetPos       : 0,\n\t\t\t\tscrollableWindow: 0,\n\t\t\t\tscrollableArea  : 0,\n\t\t\t\tinertia         : new Inertia({\n\t\t\t\t\t                              value: opts.initialScrollPos && opts.initialScrollPos[axe] || 0,\n\t\t\t\t\t                              ...(opts.axes && opts.axes[axe] && opts.axes[axe].inertia || {})\n\t\t\t\t                              }),\n\t\t\t};\n\t\t\t\n\t\t\treturn _.axes[axe];\n\t\t}\n\t\t\n\t\t/**\n\t\t * Return axis infos\n\t\t */\n\t\tgetAxisState( axe ) {\n\t\t\tlet _ = this._, state = {};\n\t\t\t_.axes && Object.keys(_.axes)\n\t\t\t                .forEach(\n\t\t\t\t                axe => (state[axe] = _.axes[axe].targetPos || _.axes[axe].scrollPos)\n\t\t\t                );\n\t\t\treturn state;\n\t\t}\n\t\t\n\t\t/**\n\t\t * Do scroll an axis\n\t\t * @param newPos\n\t\t * @param ms\n\t\t * @param axe\n\t\t * @param ease\n\t\t * @returns {Promise<any | never>}\n\t\t */\n\t\tscrollTo( newPos, ms = 0, axe = \"scrollY\", ease ) {\n\t\t\tlet _ = this._;\n\t\t\treturn new Promise(\n\t\t\t\t(( resolve, reject ) => {\n\t\t\t\t\tif ( _.axes && _.axes[axe] ) {\n\t\t\t\t\t\tlet oldPos = _.axes[axe].targetPos,\n\t\t\t\t\t\t    setPos = pos => {\n\t\t\t\t\t\t\t    //console.log('TweenableComp::setPos:514: ',  newPos,pos, ms, axe);\n\t\t\t\t\t\t\t    pos                   = (~~(pos * 10000)) / 10000;\n\t\t\t\t\t\t\t    _.axes[axe].targetPos = _.axes[axe].scrollPos = pos;\n\t\t\t\t\t\t\t    if ( _.axes[axe].inertia ) {\n\t\t\t\t\t\t\t\t    _.axes[axe].inertia.setPos(pos);\n\t\t\t\t\t\t\t\t    //_.axes[axe].inertia._doSnap()\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t    _.rootRef &&\n\t\t\t\t\t\t\t    _.rootRef.current &&\n\t\t\t\t\t\t\t    _.rootRef.current.componentDidScroll &&\n\t\t\t\t\t\t\t    _.rootRef.current.componentDidScroll(~~pos, axe);\n\t\t\t\t\t\t\t    this._updateTweenRefs()\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t;\n\t\t\t\t\t\t\n\t\t\t\t\t\tnewPos                = Math.max(0, newPos);\n\t\t\t\t\t\tnewPos                = Math.min(newPos, _.axes[axe].scrollableArea || 0);\n\t\t\t\t\t\t_.axes[axe].targetPos = newPos;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( !ms ) {\n\t\t\t\t\t\t\t_.axes[axe].tweenAxis.forEach(\n\t\t\t\t\t\t\t\tsl => sl.goTo(newPos, _.tweenRefMaps)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsetPos(newPos);\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis._runScrollGoTo(axe, newPos, ms, easingFn[ease], setPos, resolve)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( !_.live ) {\n\t\t\t\t\t\t\t_.live = true;\n\t\t\t\t\t\t\trequestAnimationFrame(_._rafLoop);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})).then(\n\t\t\t\tp => {\n\t\t\t\t\tif ( _.axes[axe].inertia ) {\n\t\t\t\t\t\t_.axes[axe].inertia._detectCurrentSnap();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\t\n\t\t/**\n\t\t * Add scrollable tween axis (scrollable anims) to a global axis\n\t\t * @param anim\n\t\t * @param axe\n\t\t * @param size\n\t\t * @returns {tweenAxis}\n\t\t */\n\t\taddScrollableAnim( anim, axe = \"scrollY\", size ) {\n\t\t\tlet sl,\n\t\t\t    _        = this._,\n\t\t\t    initials = {},\n\t\t\t    muxed    = {},\n\t\t\t    dim      = this._getAxis(axe);\n\t\t\t\n\t\t\tif ( isArray(anim) ) {\n\t\t\t\tsl = anim;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsl   = anim.anims;\n\t\t\t\tsize = anim.length;\n\t\t\t}\n\t\t\t\n\t\t\t//console.warn(\"add scrollable\")\n\t\t\tif ( !(sl instanceof tweenAxis) ) {\n\t\t\t\tsl = deMuxLine(sl, initials, this._.muxDataByTarget, this._.muxByTarget);\n\t\t\t\t//debugger\n\t\t\t\t//deepExtend(this._.muxDataByTarget, muxed)\n\t\t\t\t\n\t\t\t\tsl          = new tweenAxis(sl, _.tweenRefMaps);\n\t\t\t\tsl.initials = initials;\n\t\t\t\tObject.keys(initials)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      id => {\n\t\t\t\t\t\t      this._.tweenRefMaps[id] = this._.tweenRefMaps[id] || {};\n\t\t\t\t\t\t      Object.assign(this._.tweenRefMaps[id], {\n\t\t\t\t\t\t\t      ...initials[id],\n\t\t\t\t\t\t\t      ...this._.tweenRefMaps[id]\n\t\t\t\t\t\t      })\n\t\t\t\t\t      }\n\t\t\t\t      )\n\t\t\t}\n\t\t\t\n\t\t\tthis.makeTweenable();\n\t\t\tthis.makeScrollable();\n\t\t\t// init scroll\n\t\t\tdim.tweenAxis.push(sl);\n\t\t\tdim.scrollPos      = dim.scrollPos || 0;\n\t\t\tdim.scrollableArea = dim.scrollableArea || 0;\n\t\t\tdim.scrollableArea = Math.max(dim.scrollableArea, sl.duration);\n\t\t\tif ( !dim.scrollableBounds )\n\t\t\t\tdim.inertia.setBounds(0, dim.scrollableArea);\n\t\t\tsl.goTo(dim.scrollPos, this._.tweenRefMaps);\n\t\t\tthis._updateTweenRefs();\n\t\t\treturn sl;\n\t\t}\n\t\t\n\t\t/**\n\t\t * Remove a tweenAxis object from a component scrollable axis\n\t\t * @param sl\n\t\t * @param axe\n\t\t */\n\t\trmScrollableAnim( sl, axe = \"scrollY\" ) {\n\t\t\tlet _   = this._, found,\n\t\t\t    dim = this._getAxis(axe), twAxis;\n\t\t\tlet i   = dim.tweenAxis.indexOf(sl);\n\t\t\tif ( i !== -1 ) {\n\t\t\t\t\n\t\t\t\t//dim.tweenAxis[i].destroy();\n\t\t\t\tdim.tweenAxis.splice(i, 1);\n\t\t\t\tdim.scrollableArea = Math.max(...dim.tweenAxis.map(tl => tl.duration), 0);\n\t\t\t\tif ( !dim.scrollableBounds )\n\t\t\t\t\tdim.inertia.setBounds(0, dim.scrollableArea || 0);\n\t\t\t\t//console.warn(\"rm scrollable\", { ...this._.tweenRefMaps })\n\t\t\t\tsl.goTo(0, this._.tweenRefMaps);\n\t\t\t\t//console.warn(\"rm scrollable\", { ...this._.tweenRefMaps[\"card\"] })\n\t\t\t\t\n\t\t\t\tObject.keys(sl.initials)// unset\n\t\t\t\t      .forEach(\n\t\t\t\t\t      id => {\n\t\t\t\t\t\t      Object.keys(sl.initials[id])// unset\n\t\t\t\t\t\t            .forEach(\n\t\t\t\t\t\t\t            rkey => {\n\t\t\t\t\t\t\t\t            //debugger\n\t\t\t\t\t\t\t\t            clearTweenableValue(rkey, rkey, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id])\n\t\t\t\t\t\t\t\t            //!_.tweenRefCSS[id] &&\n\t\t\t\t\t\t\t\t            //_.refs[id] && _.refs[id].style && _.refs[id].style[rkey] &&\n\t\t\t\t\t\t\t\t            // (_.refs[id].style[rkey] = null);\n\t\t\t\t\t\t\t            })\n\t\t\t\t\t      });\n\t\t\t\tdelete sl.initials;\n\t\t\t\tsl.destroy();\n\t\t\t\tfound = true;\n\t\t\t\tthis._updateTweenRefs();\n\t\t\t}\n\t\t\t!found && console.warn(\"TweenAxis not found !\")\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * @private fn to push scrollTo\n\t\t * @param axe\n\t\t * @param to\n\t\t * @param tm\n\t\t * @param easing\n\t\t * @param tick\n\t\t * @param cb\n\t\t * @private\n\t\t */\n\t\t_runScrollGoTo( axe, to, tm, easing = x => x, tick, cb ) {\n\t\t\tlet from   = this._.axes[axe].scrollPos,\n\t\t\t    length = to - from;\n\t\t\t\n\t\t\t_running.push(\n\t\t\t\t{\n\t\t\t\t\tapply   : ( pos, max ) => {\n\t\t\t\t\t\tlet x = (from + (easing(pos / max)) * length);\n\t\t\t\t\t\tif ( this._.tweenEnabled ) {\n\t\t\t\t\t\t\t//console.log('TweenableComp::setPos:514: ', x);\n\t\t\t\t\t\t\tthis._.axes[axe].tweenAxis.forEach(\n\t\t\t\t\t\t\t\tsl => sl.goTo(x, this._.tweenRefMaps)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\ttick && tick(x);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tduration: tm,\n\t\t\t\t\tcpos    : 0,\n\t\t\t\t\tcb\n\t\t\t\t})\n\t\t\t;\n\t\t\t\n\t\t\tif ( !_live ) {\n\t\t\t\t_live  = true;\n\t\t\t\tlastTm = Date.now();\n\t\t\t\t// console.log(\"TL runner On\");\n\t\t\t\tsetTimeout(Runner._tick, 16);\n\t\t\t}\n\t\t}\n\t\t\n\t\t/**\n\t\t * Return scrollable parent node list basing a dom node\n\t\t * @param node\n\t\t * @returns {T[]}\n\t\t */\n\t\tgetScrollableNodes( node ) {\n\t\t\tlet scrollable = domUtils.findReactParents(node), _ = this._;\n\t\t\tscrollable     = _.rootRef &&\n\t\t\t\t_.rootRef.current &&\n\t\t\t\t_.rootRef.current.hookScrollableTargets &&\n\t\t\t\t_.rootRef.current.hookScrollableTargets(scrollable)\n\t\t\t\t|| scrollable;\n\t\t\t\n\t\t\treturn scrollable.map(\n\t\t\t\tid => (is.string(id)\n\t\t\t\t       ? this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]) || this.refs[id] || document.getElementById(id)\n\t\t\t\t       : id));\n\t\t}\n\t\t\n\t\t/**\n\t\t * Hook to know if the composed element allow scrolling\n\t\t * @returns {boolean}\n\t\t */\n\t\tcomponentShouldScroll() {\n\t\t\tlet _ = this._;\n\t\t\treturn _.rootRef &&\n\t\t\t       _.rootRef.current &&\n\t\t\t       _.rootRef.current.componentShouldScroll ?\n\t\t\t       _.rootRef.current.componentShouldScroll(...arguments) : true\n\t\t}\n\t\t\n\t\t/**\n\t\t * todo rewrite or use lib\n\t\t * Init touch & scroll listeners\n\t\t * Drive scroll & drag values updates\n\t\t * @private\n\t\t */\n\t\t_registerScrollListeners() {\n\t\t\tlet _static = this.constructor,\n\t\t\t    _       = this._;\n\t\t\tif ( this._.rendered ) {\n\t\t\t\tlet rootNode   = this.getRootNode(),\n\t\t\t\t    debounceTm = 0,\n\t\t\t\t    debounceTr = 0,\n\t\t\t\t    scrollLoad = { x: 0, y: 0 },\n\t\t\t\t    lastScrollEvt;\n\t\t\t\tif ( !this._parentTweener && isBrowserSide ) {\n\t\t\t\t\t\n\t\t\t\t\tif ( !rootNode )\n\t\t\t\t\t\tconsole.warn(\"fail registering scroll listener !! \")\n\t\t\t\t\telse\n\t\t\t\t\t\tdomUtils.addWheelEvent(\n\t\t\t\t\t\t\trootNode,\n\t\t\t\t\t\t\tthis._.onScroll = ( e ) => {//@todo\n\t\t\t\t\t\t\t\tlet now       = Date.now(), prevent;\n\t\t\t\t\t\t\t\tscrollLoad.y += e.deltaY;\n\t\t\t\t\t\t\t\tscrollLoad.x += e.deltaX;\n\t\t\t\t\t\t\t\tlastScrollEvt = e.originalEvent;\n\t\t\t\t\t\t\t\tprevent       = this._doDispatch(document.elementFromPoint(lastScrollEvt.clientX, lastScrollEvt.clientY), scrollLoad.x * 5, scrollLoad.y * 5)\n\t\t\t\t\t\t\t\tscrollLoad.y  = 0;\n\t\t\t\t\t\t\t\tscrollLoad.x  = 0;\n\t\t\t\t\t\t\t\tdebounceTm    = 0;\n\t\t\t\t\t\t\t\tdebounceTr    = lastScrollEvt = undefined;\n\t\t\t\t\t\t\t\tif ( prevent ) {\n\t\t\t\t\t\t\t\t\te.originalEvent.stopPropagation();\n\t\t\t\t\t\t\t\t\te.originalEvent.preventDefault();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\n\t\t\t\t\tlet lastStartTm,\n\t\t\t\t\t    cLock, dX,\n\t\t\t\t\t    parents, dY,\n\t\t\t\t\t    parentsState;\n\t\t\t\t\tif ( !rootNode )\n\t\t\t\t\t\tconsole.warn(\"fail registering drag listener !! \")\n\t\t\t\t\telse\n\t\t\t\t\t\tdomUtils.addEvent(\n\t\t\t\t\t\t\trootNode, this._.dragList = {\n\t\t\t\t\t\t\t\t'dragstart': ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\t\t\t\tlet tweener,\n\t\t\t\t\t\t\t\t\t    x,\n\t\t\t\t\t\t\t\t\t    y, i, style;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tparents      = this.getScrollableNodes(e.target);\n\t\t\t\t\t\t\t\t\t//console.log(\"start\")\n\t\t\t\t\t\t\t\t\tlastStartTm  = Date.now();\n\t\t\t\t\t\t\t\t\tdX           = 0;\n\t\t\t\t\t\t\t\t\tdY           = 0;\n\t\t\t\t\t\t\t\t\tparentsState = [];\n\t\t\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\t\t\ttweener = parents[i];\n\t\t\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\t\t\tif ( tweener.__isTweener && tweener._.scrollEnabled ) {\n\t\t\t\t\t\t\t\t\t\t\tx = tweener._getAxis(\"scrollX\");\n\t\t\t\t\t\t\t\t\t\t\ty = tweener._getAxis(\"scrollY\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t\t\t\t\tstyle = getComputedStyle(tweener, null);\n\t\t\t\t\t\t\t\t\t\t\tif ( /(auto|scroll)/.test(\n\t\t\t\t\t\t\t\t\t\t\t\tstyle.getPropertyValue(\"overflow\")\n\t\t\t\t\t\t\t\t\t\t\t\t+ style.getPropertyValue(\"overflow-x\")\n\t\t\t\t\t\t\t\t\t\t\t\t+ style.getPropertyValue(\"overflow-y\")) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tparentsState[i] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\ty      : tweener.scrollTop,\n\t\t\t\t\t\t\t\t\t\t\t\t\tx      : tweener.scrollLeft,\n\t\t\t\t\t\t\t\t\t\t\t\t\tscrollX: /(auto|scroll)/.test(style.getPropertyValue(\"overflow-x\")),\n\t\t\t\t\t\t\t\t\t\t\t\t\tscrollY: /(auto|scroll)/.test(style.getPropertyValue(\"overflow-y\"))\n\t\t\t\t\t\t\t\t\t\t\t\t\t//inertia: this._activateNodeInertia(tweener)\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis._updateNodeInertia()\n\t\t\t\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t\t\t\t//e.preventDefault();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'click'    : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\t\t\t\tif ( lastStartTm && !((lastStartTm > Date.now() - opts.maxClickTm) && Math.abs(dY) < opts.maxClickOffset && Math.abs(dX) < opts.maxClickOffset) )// skip tap & click\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t//console.log(\"prevented click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t\t\t//console.log(':o ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//else console.log(\"click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'drag'     : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\t\t\t\tlet tweener,\n\t\t\t\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tdX = -(descr._lastPos.x - descr._startPos.x);\n\t\t\t\t\t\t\t\t\tdY = -(descr._lastPos.y - descr._startPos.y);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( lastStartTm && ((lastStartTm > Date.now() - opts.maxClickTm) && Math.abs(dY) < opts.maxClickOffset && Math.abs(dX) < opts.maxClickOffset) )// skip tap & click\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t//console.log(':u ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\txDispatched = !dX;\n\t\t\t\t\t\t\t\t\t\tyDispatched = !dY;\n\t\t\t\t\t\t\t\t\t\tif ( opts.dragDirectionLock ) {\n\t\t\t\t\t\t\t\t\t\t\tif ( cLock === \"Y\" || !cLock && Math.abs(dY * .5) > Math.abs(dX) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tcLock = \"Y\";\n\t\t\t\t\t\t\t\t\t\t\t\tdX    = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t//xDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse if ( cLock === \"X\" || !cLock && Math.abs(dX * .5) > Math.abs(dY) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tcLock = \"X\";\n\t\t\t\t\t\t\t\t\t\t\t\tdY    = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t//yDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//console.log(\"drag\", dX, dY, cLock, opts.dragDirectionLock);\n\t\t\t\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\t\t\t\ttweener = parents[i];\n\t\t\t\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\t\t\t\tif ( tweener.__isTweener && tweener._.scrollEnabled ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tx = tweener._getAxis(\"scrollX\");\n\t\t\t\t\t\t\t\t\t\t\t\ty = tweener._getAxis(\"scrollY\");\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tif ( !parentsState[i] ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tparentsState[i] = { x: x.scrollPos, y: y.scrollPos };\n\t\t\t\t\t\t\t\t\t\t\t\t\tx.inertia.startMove();\n\t\t\t\t\t\t\t\t\t\t\t\t\ty.inertia.startMove();\n\t\t\t\t\t\t\t\t\t\t\t\t\t!x.inertiaFrame && tweener.applyInertia(x, \"scrollX\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t!y.inertiaFrame && tweener.applyInertia(y, \"scrollY\");\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tdeltaX = dX && (dX / tweener._.box.x) * (x.scrollableWindow || x.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tdeltaY = dY && (dY / tweener._.box.y) * (y.scrollableWindow || y.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tif ( !xDispatched && !tweener.isAxisOut(\"scrollX\", parentsState[i].x + deltaX, true)\n\t\t\t\t\t\t\t\t\t\t\t\t\t&& (tweener.componentShouldScroll(\"scrollX\", deltaX)) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tx.inertia.hold(parentsState[i].x + deltaX);\n\t\t\t\t\t\t\t\t\t\t\t\t\txDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t//console.log(\"scrollY\", tweener.isAxisOut(\"scrollY\", parentsState[i].y\n\t\t\t\t\t\t\t\t\t\t\t\t// + deltaY, true));\n\t\t\t\t\t\t\t\t\t\t\t\tif ( !yDispatched && !tweener.isAxisOut(\"scrollY\", parentsState[i].y + deltaY, true)\n\t\t\t\t\t\t\t\t\t\t\t\t\t&& (tweener.componentShouldScroll(\"scrollY\", deltaY)) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ty.inertia.hold(parentsState[i].y + deltaY);\n\t\t\t\t\t\t\t\t\t\t\t\t\tyDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tcState = parentsState[i];\n\t\t\t\t\t\t\t\t\t\t\t\tif ( cState ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( !yDispatched &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcState.scrollY &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((dY < 0 && tweener.scrollTop !== 0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(dY > 0 && tweener.scrollTop !== (tweener.scrollHeight - tweener.clientHeight)))\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.lastY = cState.y + dY;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 top: cState.y + dY,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 //left    : undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 //behavior: 'smooth'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//                 })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.dispatchEvent(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.inertia.y.hold(cState.y + dY)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTop = cState.y + dY;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( opts.dragDirectionLock && cLock === \"Y\" )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if ( !opts.dragDirectionLock ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tyDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} // let the node do this scroll\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( !xDispatched &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcState.scrollX &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((dX < 0 && tweener.scrollLeft !== 0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(dX > 0 && tweener.scrollLeft !== (tweener.scrollWidth - tweener.clientWidth)))\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.lastX = cState.x + dX;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 left: cState.x + dX,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 //behavior: 'smooth'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//                 })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.dispatchEvent(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTo(style.x + dX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.inertia.x.hold(cState.x + dX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollLeft = cState.x + dX;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} // let the node do this scroll\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif ( yDispatched && xDispatched ) {\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\te.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//dX = 0;\n\t\t\t\t\t\t\t\t\t\t//dY = 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t,\n\t\t\t\t\t\t\t\t'dropped': ( e, touch, descr ) => {\n\t\t\t\t\t\t\t\t\tlet tweener,\n\t\t\t\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tcLock = undefined;\n\t\t\t\t\t\t\t\t\t//lastStartTm                     = undefined;\n\t\t\t\t\t\t\t\t\t//document.body.style.userSelect  = '';\n\t\t\t\t\t\t\t\t\t//document.body.style.touchAction = '';\n\t\t\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\t\t\ttweener = parents[i];\n\t\t\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\t\t\tif ( tweener.__isTweener && tweener._.scrollEnabled && parentsState[i] ) {\n\t\t\t\t\t\t\t\t\t\t\ttweener._getAxis(\"scrollY\").inertia.release();\n\t\t\t\t\t\t\t\t\t\t\ttweener._getAxis(\"scrollX\").inertia.release();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//else if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t\t\t\t//\tcState = parentsState[i];\n\t\t\t\t\t\t\t\t\t\t//\tif ( cState ) {\n\t\t\t\t\t\t\t\t\t\t//\t\tcState.inertia.x.release();\n\t\t\t\t\t\t\t\t\t\t//\t\tcState.inertia.y.release();\n\t\t\t\t\t\t\t\t\t\t//\t}\n\t\t\t\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( lastStartTm && !((lastStartTm > Date.now() - opts.maxClickTm) && Math.abs(dY)\n\t\t\t\t\t\t\t\t\t\t< opts.maxClickOffset && Math.abs(dX) < opts.maxClickOffset) )// skip tap\n\t\t\t\t\t\t\t\t\t                                                                  // &\n\t\t\t\t\t\t\t\t\t                                                                  // click\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\te.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t\t\t\t//console.log(\"prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//else {\n\t\t\t\t\t\t\t\t\t//console.log(\"not prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\t\t//lastStartTm = 0;\n\t\t\t\t\t\t\t\t\tparents = parentsState = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\topts.enableMouseDrag\n\t\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tthis._.doRegister = !!rootNode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._.doRegister = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// ------------------------------------------------------------\n\t\t// --------------- Inertia & scroll modifiers -----------------\n\t\t// ------------------------------------------------------------\n\t\t\n\t\t/**\n\t\t * Retrieve updates from an axis inertia & apply them\n\t\t * @param dim\n\t\t * @param axe\n\t\t */\n\t\tapplyInertia( dim, axe ) {\n\t\t\tlet x = dim.inertia.update(), _ = this._;\n\t\t\t\n\t\t\tthis._.axes[axe].tweenAxis.forEach(\n\t\t\t\tsl => {\n\t\t\t\t\tthis._.axes[axe].targetPos = this._.axes[axe].scrollPos = x;\n\t\t\t\t\tsl.goTo(x, this._.tweenRefMaps)\n\t\t\t\t}\n\t\t\t);\n\t\t\t//console.log(\"scroll at \" + x, axe, dim.inertia.active || dim.inertia.holding);\n\t\t\t//this.scrollTo(x, 0, axe);\n\t\t\t_.rootRef &&\n\t\t\t_.rootRef.current &&\n\t\t\t_.rootRef.current.componentDidScroll &&\n\t\t\t_.rootRef.current.componentDidScroll(x, axe);\n\t\t\tthis._updateTweenRefs()\n\t\t\tif ( dim.inertia.active || dim.inertia.holding ) {\n\t\t\t\tdim.inertiaFrame = setTimeout(this.applyInertia.bind(this, dim, axe), 33);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdim.inertiaFrame = null;\n\t\t\t\t//console.log(\"complete\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t/**\n\t\t * Return true if at least 1 of this tweener axis have it's inertia active\n\t\t * @returns {boolean}\n\t\t */\n\t\tisInertiaActive() {//todo\n\t\t\tlet _ = this._, active = false;\n\t\t\t_.axes &&\n\t\t\tObject.keys(_.axes)\n\t\t\t      .forEach(\n\t\t\t\t      axe => (active = active || _.axes[axe] && _.axes[axe].inertia.active)\n\t\t\t      );\n\t\t\treturn active;\n\t\t}\n\t\t\n\t\tdispatchScroll( delta, axe = \"scrollY\" ) {\n\t\t\tlet prevent,\n\t\t\t    dim    = this._.axes[axe],\n\t\t\t    oldPos = dim && dim.scrollPos,\n\t\t\t    newPos = oldPos + delta;\n\t\t\t\n\t\t\tif ( dim && oldPos !== newPos ) {\n\t\t\t\t\n\t\t\t\tdim.inertia.dispatch(delta, 100);\n\t\t\t\t!dim.inertiaFrame && this.applyInertia(dim, axe);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\treturn prevent;\n\t\t}\n\t\t\n\t\tisAxisOut( axis, v, abs ) {\n\t\t\tlet _   = this._,\n\t\t\t    dim = _.axes && _.axes[axis],\n\t\t\t    pos = abs ? v : dim && (dim.scrollPos + v);\n\t\t\t\n\t\t\tpos = pos && Math.round(pos);\n\t\t\t\n\t\t\treturn !dim\n\t\t\t\t|| (\n\t\t\t\t\tdim.scrollableBounds\n\t\t\t\t\t?\n\t\t\t\t\t(pos <= dim.scrollableBounds.min || pos >= dim.scrollableBounds.max)\n\t\t\t\t\t:\n\t\t\t\t\t(pos <= 0 || pos >= dim.scrollableArea)\n\t\t\t\t);\n\t\t}\n\t\t\n\t\t_doDispatch( target, dx, dy, holding ) {\n\t\t\tlet style,\n\t\t\t    Comps,\n\t\t\t    headTarget = target,\n\t\t\t    nodeInertia,\n\t\t\t    i;\n\t\t\t\n\t\t\t// check if there scrollable stuff in dom targets\n\t\t\t// get all the parents components & dom node of an dom element ( from fibers )\n\t\t\t\n\t\t\tComps = this.getScrollableNodes(headTarget);\n\t\t\t//console.log(\"dispatching \", dx, dy, Comps);\n\t\t\tfor ( i = 0; i < Comps.length; i++ ) {\n\t\t\t\t// react comp with tweener support\n\t\t\t\tif ( Comps[i].__isTweener ) {\n\t\t\t\t\t//debugger\n\t\t\t\t\t//console.log(Comps[i], dx, dy, Comps[i].isAxisOut(\"scrollX\", dx), Comps[i].isAxisOut(\"scrollY\",\n\t\t\t\t\t// dy));\n\t\t\t\t\tif ( !Comps[i].isAxisOut(\"scrollX\", dx) && (!Comps[i].componentShouldScroll || Comps[i].componentShouldScroll(\"scrollX\", dx)) ) {\n\t\t\t\t\t\tComps[i].dispatchScroll(dx, \"scrollX\", holding);\n\t\t\t\t\t\tdx = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( !Comps[i].isAxisOut(\"scrollY\", dy) && (!Comps[i].componentShouldScroll || Comps[i].componentShouldScroll(\"scrollY\", dy)) ) {\n\t\t\t\t\t\tComps[i].dispatchScroll(dy, \"scrollY\", holding);\n\t\t\t\t\t\tdy = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// dom element\n\t\t\t\telse if ( is.element(Comps[i]) ) {\n\t\t\t\t\tstyle = getComputedStyle(Comps[i], null)\n\t\t\t\t\tif ( /(auto|scroll)/.test(\n\t\t\t\t\t\tstyle.getPropertyValue(\"overflow\")\n\t\t\t\t\t\t+ style.getPropertyValue(\"overflow-x\")\n\t\t\t\t\t\t+ style.getPropertyValue(\"overflow-y\")\n\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(dy < 0 && Comps[i].scrollTop !== 0)\n\t\t\t\t\t\t\t||\n\t\t\t\t\t\t\t(dy > 0 && Comps[i].scrollTop !== (Comps[i].scrollHeight - Comps[i].clientHeight))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t//nodeInertia.y.dispatch(dy * 10)\n\t\t\t\t\t\t\t//dy = 0;\n\t\t\t\t\t\t} // let the node do this scroll\n\t\t\t\t\t\t//if ( nodeInertia.x.isOutbound(dx) ) {\n\t\t\t\t\t\t//\tnodeInertia.x.dispatch(dx * 10)\n\t\t\t\t\t\t//\tdx = 0;\n\t\t\t\t\t\t//} // let the node do this scroll\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//headTarget = headTarget.parentNode;\n\t\t\t\t\t//if ( headTarget === document || headTarget === target )\n\t\t\t\t\t//\tbreak;\n\t\t\t\t}\n\t\t\t\tif ( !dx && !dy )\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis._updateNodeInertia();\n\t\t\tif ( !dx && !dy )\n\t\t\t\treturn true;\n\t\t}\n\t\t\n\t\t_activateNodeInertia( node ) {\n\t\t\tlet _ = this._,\n\t\t\t    i = _.activeInertia.findIndex(item => (item.target === node));\n\t\t\tif ( i === -1 ) {\n\t\t\t\t_.activeInertia.push(\n\t\t\t\t\t{\n\t\t\t\t\t\tinertia: {\n\t\t\t\t\t\t\tx: new Inertia({ max: node.scrollWidth - node.offsetLeft, value: node.scrollLeft }),\n\t\t\t\t\t\t\ty: new Inertia({ max: node.scrollHeight - node.offsetHeight, value: node.scrollTop })\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttarget : node\n\t\t\t\t\t});\n\t\t\t\ti = _.activeInertia.length - 1;\n\t\t\t}\n\t\t\treturn _.activeInertia[i].inertia;\n\t\t\t\n\t\t}\n\t\t\n\t\t_updateNodeInertia = () => {\n\t\t\tlet _ = this._, current, ln = _.activeInertia.length;\n\t\t\t\n\t\t\tif ( this._inertiaRaf )\n\t\t\t\tcancelAnimationFrame(this._inertiaRaf);\n\t\t\t\n\t\t\tfor ( let i = 0; ln > i; i++ ) {\n\t\t\t\tcurrent = _.activeInertia[i];\n\t\t\t\tif ( current.inertia.x.active || current.inertia.x.holding ) {\n\t\t\t\t\tcurrent.target.scrollLeft = ~~current.inertia.x.update()\n\t\t\t\t}\n\t\t\t\tif ( current.inertia.y.active || current.inertia.y.holding ) {\n\t\t\t\t\tcurrent.target.scrollTop = ~~current.inertia.y.update()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( !current.inertia.x.active && !current.inertia.y.active && !current.inertia.x.holding && !current.inertia.y.holding ) {\n\t\t\t\t\t_.activeInertia.slice(i, 1);\n\t\t\t\t\ti--;\n\t\t\t\t\tln--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( ln !== 0 )\n\t\t\t\tthis._inertiaRaf = requestAnimationFrame(this._updateNodeInertia)\n\t\t\telse this._inertiaRaf = null;\n\t\t}\n\t\t\n\t\t\n\t\t// ------------------------------------------------------------\n\t\t// --------------- Initialization & drawers -------------------\n\t\t// ------------------------------------------------------------\n\t\t\n\t\tmakeTweenable() {\n\t\t\tlet _ = this._;\n\t\t\t\n\t\t\tif ( !_.tweenEnabled ) {\n\t\t\t\t_.tweenRefCSS         = {};\n\t\t\t\t_.tweenRefs           = {};\n\t\t\t\t_.tweenRefMaps        = {};\n\t\t\t\t_.iMapOrigin          = {};\n\t\t\t\t_.tweenRefInitialData = {};\n\t\t\t\t_.tweenEnabled        = true;\n\t\t\t\t_.tweenRefOrigin      = {};\n\t\t\t\t_.tweenRefOriginCss   = {};\n\t\t\t\t_.axes                = {};\n\t\t\t\t_.muxDataByTarget     = _.muxDataByTarget || {};\n\t\t\t\t_.tweenRefDemuxed     = _.tweenRefDemuxed || {};\n\t\t\t\t_.tweenRefTargets     = _.tweenRefTargets || [];\n\t\t\t\t_.runningAnims        = _.runningAnims || [];\n\t\t\t\t\n\t\t\t\tisBrowserSide && window.addEventListener(\n\t\t\t\t\t\"resize\",\n\t\t\t\t\tthis._.onResize = ( e ) => {//@todo\n\t\t\t\t\t\tthis._updateBox();\n\t\t\t\t\t\tthis._updateTweenRefs();\n\t\t\t\t\t\t_.rootRef &&\n\t\t\t\t\t\t_.rootRef.current &&\n\t\t\t\t\t\t_.rootRef.current.windowDidResize &&\n\t\t\t\t\t\t_.rootRef.current.windowDidResize(e)\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tsetRootRef( id ) {\n\t\t\tthis._.rootRef = id;\n\t\t}\n\t\t\n\t\t\n\t\tmakeScrollable() {\n\t\t\tif ( !this._.scrollEnabled ) {\n\t\t\t\tthis._.scrollEnabled = true;\n\t\t\t\tthis._.scrollHook    = [];\n\t\t\t\tthis._.activeInertia = [];\n\t\t\t\tthis._registerScrollListeners();\n\t\t\t}\n\t\t}\n\t\t\n\t\t_updateBox() {\n\t\t\tlet node = this.getRootNode();\n\t\t\tif ( node ) {\n\t\t\t\tthis._.box.inited = true;\n\t\t\t\tthis._.box.x      = node.offsetWidth;\n\t\t\t\tthis._.box.y      = node.offsetHeight;\n\t\t\t}\n\t\t}\n\t\t\n\t\t_rafLoop() {\n\t\t\tthis._updateTweenRefs();\n\t\t\tif ( this._.runningAnims.length ) {\n\t\t\t\trequestAnimationFrame(this._._rafLoop);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//this._.live && console.log(\"RAF off\", this.constructor.displayName);\n\t\t\t\tthis._.live = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\t_updateTweenRefs() {\n\t\t\tif ( this._.tweenEnabled ) {\n\t\t\t\tfor ( let i = 0, target, node, style; i < this._.tweenRefTargets.length; i++ ) {\n\t\t\t\t\ttarget = this._.tweenRefTargets[i];\n\t\t\t\t\tstyle  = this._updateTweenRef(target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t_swap = {};\n\t\t\n\t\t_updateTweenRef( target, force ) {\n\t\t\tlet node, swap = this._swap, changes;\n\t\t\tthis._.tweenRefCSS[target] &&\n\t\t\tmuxToCss(this._.tweenRefMaps[target], swap, this._.muxByTarget[target], this._.muxDataByTarget[target], this._.box);\n\t\t\tnode = this.getTweenableRef(target);\n\t\t\tif ( node )\n\t\t\t\tfor ( let o in swap )\n\t\t\t\t\tif ( this._.tweenRefCSS[target].hasOwnProperty(o) ) {\n\t\t\t\t\t\tif ( force || swap[o] !== this._.tweenRefCSS[target][o] ) {\n\t\t\t\t\t\t\tnode.style[o] = this._.tweenRefCSS[target][o] = swap[o];\n\t\t\t\t\t\t\tchanges       = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete swap[o];\n\t\t\t\t\t}\n\t\t\t//if ( !changes )\n\t\t\t//console.log('no changes', target, o,swap[o])\n\t\t\treturn this._.tweenRefCSS[target];\n\t\t}\n\t\t\n\t\t\n\t\t// ------------------------------------------------------------\n\t\t// --------------- React Hooks --------------------------------\n\t\t// ------------------------------------------------------------\n\t\t\n\t\t\n\t\tcomponentWillUnmount() {\n\t\t\tlet node = this.getRootNode();\n\t\t\tif ( this._.tweenEnabled ) {\n\t\t\t\tthis._.tweenEnabled = false;\n\t\t\t\twindow.removeEventListener(\"resize\", this._.onResize);\n\t\t\t}\n\t\t\t\n\t\t\tif ( this._.scrollEnabled ) {\n\t\t\t\tthis._.scrollEnabled = false;\n\t\t\t\t\n\t\t\t\t//this._.axes          = undefined;\n\t\t\t\tnode && this._.onScroll && !this._parentTweener && domUtils.rmWheelEvent(\n\t\t\t\t\tnode,\n\t\t\t\t\tthis._.onScroll);\n\t\t\t\tnode && this._.dragList && domUtils.removeEvent(node\n\t\t\t\t\t, this._.dragList)\n\t\t\t}\n\t\t\t\n\t\t\tsuper.componentWillUnmount && super.componentWillUnmount(...arguments);\n\t\t}\n\t\t\n\t\tcomponentDidMount() {\n\t\t\tlet _static = this.constructor;\n\t\t\t\n\t\t\tthis._.rendered = true;\n\t\t\tif ( this._.tweenEnabled ) {\n\t\t\t\t// debugger;\n\t\t\t\tthis._updateBox();\n\t\t\t\tthis._updateTweenRefs();\n\t\t\t}\n\t\t\tif ( _static.scrollableAnim ) {\n\t\t\t\tif ( is.array(_static.scrollableAnim) )\n\t\t\t\t\tthis.addScrollableAnim(_static.scrollableAnim);\n\t\t\t\telse\n\t\t\t\t\tObject.keys(_static.scrollableAnim)\n\t\t\t\t\t      .forEach(\n\t\t\t\t\t\t      axe => this.addScrollableAnim(_static.scrollableAnim[axe], axe)\n\t\t\t\t\t      )\n\t\t\t}\n\t\t\tif ( this._.doRegister || this.__isFirst ) {\n\t\t\t\t\n\t\t\t\tthis._registerScrollListeners();\n\t\t\t\tthis._.doRegister = false;\n\t\t\t}\n\t\t\tsuper.componentDidMount && super.componentDidMount(...arguments);\n\t\t}\n\t\t\n\t\tcomponentDidUpdate( prevProps, prevState ) {\n\t\t\t\n\t\t\tif ( this._.tweenEnabled ) {\n\t\t\t\tthis._updateBox();\n\t\t\t\tthis._updateTweenRefs();\n\t\t\t}\n\t\t\tsuper.componentDidUpdate && super.componentDidUpdate(...arguments);\n\t\t}\n\t\t\n\t\trender() {\n\t\t\treturn <TweenerContext.Consumer>\n\t\t\t\t{\n\t\t\t\t\tparentTweener => {\n\t\t\t\t\t\tthis._parentTweener = parentTweener;\n\t\t\t\t\t\treturn <TweenerContext.Provider value={this}>\n\t\t\t\t\t\t\t<BaseComponent {...this.props} ref={this._.rootRef} tweener={this}/>\n\t\t\t\t\t\t</TweenerContext.Provider>;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</TweenerContext.Consumer>;\n\t\t}\n\t}\n\t\n\tlet withRef         = React.forwardRef(( props, ref ) => {\n\t\treturn <TweenableComp {...props} forwardedRef={ref}/>;\n\t});\n\twithRef.displayName = TweenableComp.displayName;\n\treturn withRef;\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from \"react\";\nimport is    from \"is\";\n\nimport TweenerContext from \"../comps/TweenerContext\";\n\n\nconst SimpleObjectProto = ({}).constructor;\n\n\n/**\n * asTweener decorator\n * @param argz\n * @returns {*}\n */\nexport default function withTweener( ...argz ) {\n\t\n\tlet BaseComponent = (!argz[0] || argz[0].prototype instanceof React.Component || argz[0] === React.Component) && argz.shift(),\n\t    opts          = (!argz[0] || argz[0] instanceof SimpleObjectProto) && argz.shift() || {};\n\t\n\tif ( !(BaseComponent && (BaseComponent.prototype instanceof React.Component || BaseComponent === React.Component)) ) {\n\t\treturn function ( BaseComponent ) {\n\t\t\treturn withTweener(BaseComponent, opts)\n\t\t}\n\t}\n\t\n\tclass TweenerToProps extends React.Component {\n\t\tstatic displayName = (BaseComponent.displayName || BaseComponent.name);\n\t\t\n\t\trender() {\n\t\t\treturn <TweenerContext.Consumer>\n\t\t\t\t{\n\t\t\t\t\ttweener => {\n\t\t\t\t\t\treturn <BaseComponent { ...this.props } tweener={ tweener } ref={ this.props.forwardedRef }/>;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</TweenerContext.Consumer>;\n\t\t}\n\t}\n\t\n\t\n\tlet withRef         = React.forwardRef(( props, ref ) => {\n\t\treturn <TweenerToProps { ...props } forwardedRef={ ref }/>;\n\t});\n\twithRef.displayName = TweenerToProps.displayName;\n\treturn withRef;\n}\n","/*\r\n *\r\n * Copyright (C) 2019 Nathanael Braun\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as published by\r\n * the Free Software Foundation, either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport is        from \"is\";\r\nimport tweenAxis from \"tween-axis\";\r\n//export default tweenAxis\r\nconst recyclableTweenAxis = [];\r\nexport default class CssTweenAxis extends tweenAxis {\r\n\t\r\n\tconstructor( cfg, scope ) {\r\n\t\tif ( recyclableTweenAxis.length ) {\r\n\t\t\tlet recyled   = recyclableTweenAxis.pop();\r\n\t\t\trecyled.scope = scope;\r\n\t\t\tif ( is.array(cfg) ) {\r\n\t\t\t\trecyled.localLength = 1;\r\n\t\t\t\trecyled.mount(cfg, scope);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif ( cfg.TweenAxis )\r\n\t\t\t\t\trecyled.mount(cfg.TweenAxis, scope);\r\n\t\t\t}\r\n\t\t\treturn recyled;\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t}\r\n\t\r\n\tdestroy() {\r\n\t\t\r\n\t\tthis.scope                  = undefined;\r\n\t\tthis.__marks.length         = 0;\r\n\t\tthis.__marksLength.length   = 0;\r\n\t\tthis.__marksKeys.length     = 0;\r\n\t\tthis.__processors.length    = 0;\r\n\t\tthis.__config.length        = 0;\r\n\t\tthis.__activeForks.length   = 0;\r\n\t\tthis.__activeProcess.length = 0;\r\n\t\t\r\n\t\tthis.__activeProcess.length = 0;\r\n\t\tthis.__outgoing.length      = 0;\r\n\t\tthis.__incoming.length      = 0;\r\n\t\tthis.__cPos                 = 0;\r\n\t\tthis.duration               = 0;\r\n\t\tthis.__cIndex               = 0;\r\n\t\tthis.__cMaxKey              = 1;\r\n\t\trecyclableTweenAxis.push(this);\r\n\t}\r\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst props = {\n\t\"margin\"                     : { \"properties\": [\"marginTop\", \"marginRight\", \"marginBottom\", \"marginLeft\"] },\n\t\"marginBottom\"               : { \"types\": [\"length\"] },\n\t\"marginLeft\"                 : { \"types\": [\"length\"] },\n\t\"marginRight\"                : { \"types\": [\"length\"] },\n\t\"marginTop\"                  : { \"types\": [\"length\"] },\n\t\"padding\"                    : { \"properties\": [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\"] },\n\t\"paddingBottom\"              : { \"types\": [\"length\"] },\n\t\"paddingLeft\"                : { \"types\": [\"length\"] },\n\t\"paddingRight\"               : { \"types\": [\"length\"] },\n\t\"paddingTop\"                 : { \"types\": [\"length\"] },\n\t\"bottom\"                     : { \"types\": [\"length-percentage-calc\"] },\n\t\"left\"                       : { \"types\": [\"length-percentage-calc\"] },\n\t\"right\"                      : { \"types\": [\"length-percentage-calc\"] },\n\t\"top\"                        : { \"types\": [\"length-percentage-calc\"] },\n\t\"zIndex\"                     : { \"types\": [\"integer\"] },\n\t\"width\"                      : { \"types\": [\"length-percentage-calc\"] },\n\t\"maxWidth\"                   : { \"types\": [\"length-percentage-calc\"] },\n\t\"minWidth\"                   : { \"types\": [\"length-percentage-calc\"] },\n\t\"height\"                     : { \"types\": [\"length-percentage-calc\"] },\n\t\"maxHeight\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"minHeight\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"lineHeight\"                 : { \"types\": [\"number\", \"length\"] },\n\t\"verticalAlign\"              : { \"types\": [\"length\"] },\n\t\"visibility\"                 : { \"types\": [\"visibility\"] },\n\t\"borderSpacing\"              : { \"types\": [\"length\"], \"multiple\": true },\n\t\"color\"                      : { \"types\": [\"color\"] },\n\t\"opacity\"                    : { \"types\": [\"number\"] },\n\t\"background\"                 : { \"properties\": [\"backgroundColor\", \"backgroundPosition\", \"backgroundSize\"] },\n\t\"backgroundColor\"            : { \"types\": [\"color\"] },\n\t\"backgroundPosition\"         : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"backgroundSize\"             : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"border\"                     : { \"properties\": [\"borderColor\", \"borderWidth\"] },\n\t\"borderBottom\"               : { \"properties\": [\"borderBottomColor\", \"borderBottomWidth\"] },\n\t\"borderLeft\"                 : { \"properties\": [\"borderLeftColor\", \"borderLeftWidth\"] },\n\t\"borderRight\"                : { \"properties\": [\"borderRightColor\", \"borderRightWidth\"] },\n\t\"borderTop\"                  : { \"properties\": [\"borderTopColor\", \"borderTopWidth\"] },\n\t\"borderColor\"                : { \"properties\": [\"borderTopColor\", \"borderRightColor\", \"borderBottomColor\", \"borderLeftColor\"] },\n\t\"borderWidth\"                : { \"properties\": [\"borderTopWidth\", \"borderRightWidth\", \"borderBottomWidth\", \"borderLeftWidth\"] },\n\t\"borderBottomColor\"          : { \"types\": [\"color\"] },\n\t\"borderLeftColor\"            : { \"types\": [\"color\"] },\n\t\"borderRightColor\"           : { \"types\": [\"color\"] },\n\t\"borderTopColor\"             : { \"types\": [\"color\"] },\n\t\"borderBottomWidth\"          : { \"types\": [\"length\"] },\n\t\"borderLeftWidth\"            : { \"types\": [\"length\"] },\n\t\"borderRightWidth\"           : { \"types\": [\"length\"] },\n\t\"borderTopWidth\"             : { \"types\": [\"length\"] },\n\t\"borderRadius\"               : { \"properties\": [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomRightRadius\", \"borderBottomLeftRadius\"] },\n\t\"borderTopLeftRadius\"        : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderTopRightRadius\"       : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderBottomRightRadius\"    : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderBottomLeftRadius\"     : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"boxShadow\"                  : { \"types\": [\"shadow-list\"] },\n\t\"caretColor\"                 : { \"types\": [\"color\"] },\n\t\"outline\"                    : { \"properties\": [\"outlineColor\", \"outlineWidth\"] },\n\t\"outlineColor\"               : { \"types\": [\"color\"] },\n\t\"outlineWidth\"               : { \"types\": [\"length\"] },\n\t\"outlineOffset\"              : { \"types\": [\"length\"] },\n\t\"flex\"                       : { \"properties\": [\"flexGrow\", \"flexShrink\", \"flexBasis\"] },\n\t\"flexGrow\"                   : { \"types\": [\"number\"] },\n\t\"flexShrink\"                 : { \"types\": [\"number\"] },\n\t\"flexBasis\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"order\"                      : { \"types\": [\"integer\"] },\n\t\"font\"                       : { \"properties\": [\"fontWeight\", \"fontStretch\", \"fontSize\", \"lineHeight\"] },\n\t\"fontWeight\"                 : { \"types\": [\"font-weight\"] },\n\t\"fontStretch\"                : { \"types\": [\"font-stretch\"] },\n\t\"fontSize\"                   : { \"types\": [\"length\"] },\n\t\"fontSizeAdjust\"             : { \"types\": [\"number\"] },\n\t\"gridTemplateColumns\"        : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"gridTemplateRows\"           : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"gridTemplate\"               : { \"properties\": [\"gridTemplateRows\", \"gridTemplateColumns\"] },\n\t\"grid\"                       : { \"properties\": [\"gridTemplateRows\", \"gridTemplateColumns\"] },\n\t\"gridRowGap\"                 : { \"types\": [\"length-percentage-calc\"] },\n\t\"gridColumnGap\"              : { \"types\": [\"length-percentage-calc\"] },\n\t\"gridGap\"                    : { \"properties\": [\"gridRowGap\", \"gridColumnGap\"] },\n\t\"clip\"                       : { \"types\": [\"rectangle\"] },\n\t\"clipPath\"                   : { \"types\": [\"basic-shape\"] },\n\t\"mask\"                       : { \"properties\": [\"maskPosition\", \"maskSize\"] },\n\t\"maskPosition\"               : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"maskSize\"                   : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"shapeOutside\"               : { \"types\": [\"basic-shape\"] },\n\t\"shapeMargin\"                : { \"types\": [\"length-percentage-calc\"] },\n\t\"shapeImageThreshold\"        : { \"types\": [\"number\"] },\n\t\"scrollPadding\"              : { \"properties\": [\"scrollPaddingTop\", \"scrollPaddingRight\", \"scrollPaddingBottom\", \"scrollPaddingLeft\"] },\n\t\"scrollPaddingTop\"           : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingRight\"         : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBottom\"        : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingLeft\"          : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBlock\"         : { \"properties\": [\"scrollPaddingBlockStart\", \"scrollPaddingBlockEnd\"] },\n\t\"scrollPaddingBlockStart\"    : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBlockEnd\"      : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingInline\"        : { \"properties\": [\"scrollPaddingInlineStart\", \"scrollPaddingInlineEnd\"] },\n\t\"scrollPaddingInlineStart\"   : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingInlineEnd\"     : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollSnapMargin\"           : { \"properties\": [\"scrollSnapMarginTop\", \"scrollSnapMarginRight\", \"scrollSnapMarginBottom\", \"scrollSnapMarginLeft\"] },\n\t\"scrollSnapMarginTop\"        : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginRight\"      : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBottom\"     : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginLeft\"       : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBlock\"      : { \"properties\": [\"scrollSnapMarginBlockStart\", \"scrollSnapMarginBlockEnd\"] },\n\t\"scrollSnapMarginBlockStart\" : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBlockEnd\"   : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginInline\"     : { \"properties\": [\"scrollSnapMarginInlineStart\", \"scrollSnapMarginInlineEnd\"] },\n\t\"scrollSnapMarginInlineStart\": { \"types\": [\"length\"] },\n\t\"scrollSnapMarginInlineEnd\"  : { \"types\": [\"length\"] },\n\t\"textDecoration\"             : { \"properties\": [\"textDecorationColor\"] },\n\t\"textDecorationColor\"        : { \"types\": [\"color\"] },\n\t\"textEmphasis\"               : { \"properties\": [\"textEmphasisColor\"] },\n\t\"textEmphasisColor\"          : { \"types\": [\"color\"] },\n\t\"textShadow\"                 : { \"types\": [\"shadow-list\"] },\n\t\"columns\"                    : { \"properties\": [\"columnWidth\", \"columnCount\"] },\n\t\"columnWidth\"                : { \"types\": [\"length\"] },\n\t\"columnCount\"                : { \"types\": [\"integer\"] },\n\t\"columnGap\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"columnRule\"                 : { \"properties\": [\"columnRuleColor\", \"columnRuleWidth\"] },\n\t\"columnRuleColor\"            : { \"types\": [\"color\"] },\n\t\"columnRuleWidth\"            : { \"types\": [\"length\"] },\n\t\"letterSpacing\"              : { \"types\": [\"length\"] },\n\t\"tabSize\"                    : { \"types\": [\"length\"] },\n\t\"textIndent\"                 : { \"types\": [\"length-percentage-calc\"] },\n\t\"wordSpacing\"                : { \"types\": [\"length-percentage-calc\"] },\n\t\"transform\"                  : { \"types\": [\"transform\"] },\n\t\"transformOrigin\"            : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"perspective\"                : { \"types\": [\"length\"] },\n\t\"perspectiveOrigin\"          : { \"types\": [\"length-percentage-calc\"], \"multiple\": true }\n}\n\n//\n///**\n// * List of animatable types used by properties, with descriptions of how to interpolate each type.\n// * Data taken from https://www.w3.org/TR/css3-transitions/#animatable-types and some other W3C specs.\n// *\n// * @type {Object}\n// */\n//exports.types = {\n//\t'color'                 : {\n//\t\tname: 'color',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-color'\n//\t},\n//\t'length'                : {\n//\t\tname: 'length',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-length'\n//\t},\n//\t'percentage'            : {\n//\t\tname: 'percentage',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-percentage'\n//\t},\n//\t'length-percentage-calc': {\n//\t\tname: 'length, percentage, or calc',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-lpcalc'\n//\t},\n//\t'integer'               : {\n//\t\tname: 'integer',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-integer'\n//\t},\n//\t'font-weight'           : {\n//\t\tname: 'font weight',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-font-weight'\n//\t},\n//\t'number'                : {\n//\t\tname: 'number',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-number'\n//\t},\n//\t'rectangle'             : {\n//\t\tname: 'rectangle',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-rect'\n//\t},\n//\t'visibility'            : {\n//\t\tname: 'visibility',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-visibility'\n//\t},\n//\t'shadow-list'           : {\n//\t\tname: 'shadow list',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-shadow-list'\n//\t},\n//\t// Other specs\n//\t'transform'             : {\n//\t\tname: 'transform',\n//\t\thref: 'https://www.w3.org/TR/css3-transforms/#interpolation-of-transforms'\n//\t},\n//\t'font-stretch'          : {\n//\t\tname: 'font stretch',\n//\t\thref: 'https://www.w3.org/TR/css3-fonts/#font-stretch-animation'\n//\t},\n//\t'basic-shape'           : {\n//\t\tname: 'basic shape',\n//\t\thref: 'https://www.w3.org/TR/css-shapes-1/#basic-shape-interpolation'\n//\t},\n//};\n//\n\nexport const units    = ['deg', 'box', 'bz', 'bh', 'bw', 'deg', 'em', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'];\nexport const unitsRe  = new RegExp(\n\t\"([+-]?(?:[0-9]*[.])?[0-9]+)\\\\s*(\" +\n\t['\\\\w+', 'deg', 'bz', 'bh', 'bw', 'cap', 'ch', 'deg', 'em', 'ic', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'].join('|')\n\t+ \")\"\n);\nexport const floatCut = ( v = 0 ) => Number(v.toFixed(3));\n\nexport function expandShorthandProperty( property, value, target = {} ) {\n\tlet type       = props[property],\n\t    childProps = type && type.properties,\n\t    values     = value.split(' ');\n\t\n\tif ( type.multiple )\n\t\tchildProps && childProps.forEach(\n\t\t\t( k, i ) => {\n\t\t\t\ttarget[k] = values[i % values.length];\n\t\t\t}\n\t\t)\n\telse\n\t\tchildProps && childProps.forEach(\n\t\t\t( k, i ) => {\n\t\t\t\tif ( values[i] )\n\t\t\t\t\ttarget[k] = values[i];\n\t\t\t}\n\t\t)\n\treturn target;\n};\n\nexport function isShorthandProperty( property ) {\n\tlet type       = props[property],\n\t    childProps = type && type.properties;\n\treturn childProps && !!childProps.length;\n};\n\n\nexport function isValidDeclaration( property, value ) {\n\treturn !!props[property];\n};\n\n/**\n * Check if a CSS property can be animated\n * @param  {string} property CSS property name\n * @return {boolean}         True if the property can be animated\n */\nexport function canAnimate( property ) {\n\treturn props.hasOwnProperty(property);\n};\n\n/**\n * Get a definition of how a CSS property can be animated\n * @param  {string} property CSS property name\n * @param  {boolean} expand  Expand definitions for sub-properties, when available\n * @return {object}          Property definition, or null if it can't be animated\n */\nexport function getProperty( property, expand ) {\n\tif ( !exports.canAnimate(property) ) {\n\t\treturn null;\n\t}\n\tvar prop = props[property];\n\tvar ret  = { name: property };\n\tObject.keys(prop).forEach(function ( key ) {\n\t\tvar value = prop[key];\n\t\tif ( Array.isArray(value) ) {\n\t\t\tif ( key === 'properties' && expand ) {\n\t\t\t\tvalue = value.map(function ( subProp ) {\n\t\t\t\t\treturn exports.getProperty(subProp, expand);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalue = value.slice(); // clone\n\t\t\t}\n\t\t}\n\t\tret[key] = value;\n\t});\n\treturn ret;\n};\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/color\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/shadow\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                  from \"is\";\nimport {floatCut, unitsRe} from \"../cssUtils\";\n\nconst\n\tdefaultUnits = {\n\t\tblur      : 'px',\n\t\tbrightness: '%',\n\t\tcontrast  : '%',\n\t\tdropShadow: true,\n\t\tgrayscale : '%',\n\t\thueRotate : 'deg',\n\t\tinvert    : \"%\",\n\t\topacity   : \"%\",\n\t\tsaturate  : \"%\",\n\t\tsepia     : \"%\"\n\t};\nconst filters    = {};\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tconsole.log(\"dec\", twKey, path)\n\tif ( path.length === 4 ) {\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t\n\t\tif ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t//console.warn(\"free\", dataMap, path, tweenableMap[twKey])\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\tdelete tweenableMap[twKey];\n\t\t\tconsole.log(\"delete\", twKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]].length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]];\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t\n\tif ( data[\"filter_head\"] === key ) {\n\t\tlet filters = \"\";\n\t\tObject.keys(data[key]).forEach(\n\t\t\tfkey => {\n\t\t\t\tlet dkey        = key + '_' + fkey;\n\t\t\t\tdata[key][fkey] = true;\n\t\t\t\tfilters += fkey + \"(\" + floatCut(tweenable[dkey], 2) + data[dkey] + \") \";\n\t\t\t}\n\t\t)\n\t\ttarget.filter = filters;\n\t}\n\t\n}\n\n\nexport const mux = ( key, value, target, data, initials ) => {\n\t\n\tdata[\"filter_head\"] = data[\"filter_head\"] || key;\n\tdata[key]           = data[key] || {};\n\t//initials[key]       = 0;\n\t\n\tObject.keys(value).forEach(\n\t\tfkey => {\n\t\t\tlet fValue      = value[fkey],\n\t\t\t    dkey        = key + '_' + fkey,\n\t\t\t    match       = is.string(fValue) ? fValue.match(unitsRe) : false;\n\t\t\tdata[key][fkey] = true;\n\t\t\tinitials[dkey]  = 0;\n\t\t\tif ( match ) {\n\t\t\t\tif ( data[dkey] && data[dkey] !== match[2] ) {\n\t\t\t\t\tconsole.warn(\"Have != units on prop ! Ignore \", dkey, \"present:\" + data[dkey], \"new:\" + match[2]);\n\t\t\t\t\ttarget[dkey] = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdata[dkey]   = match[2];\n\t\t\t\t\ttarget[dkey] = parseFloat(match[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget[dkey] = fValue;\n\t\t\t\tif ( !data[dkey] && fkey in defaultUnits )\n\t\t\t\t\tdata[dkey] = defaultUnits[fkey];\n\t\t\t}\n\t\t}\n\t)\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/shadow\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../cssUtils\";\n\nconst defaultUnits    = {\n\t      //matrix     : true,\n\t      //translate  : 'px',\n\t      translateX : 'px',\n\t      translateY : 'px',\n\t      translateZ : 'px',\n\t      scale      : '',\n\t      scaleZ     : '',\n\t      scaleX     : '',\n\t      scaleY     : '',\n\t      rotate     : 'deg',\n\t      //skew       : 'deg',\n\t      skewX      : 'deg',\n\t      skewY      : 'deg',\n\t      //matrix3d   : true,\n\t      //translate3d: true,\n\t      //scale3d    : true,\n\t      //rotate3d   : true,\n\t      rotateX    : 'deg',\n\t      rotateY    : 'deg',\n\t      rotateZ    : 'deg',\n\t      perspective: 'px',\n      },\n      defaultBox      = {\n\t      translateX: 'x',\n\t      translateY: 'y',\n\t      translateZ: 'z',\n\t      rotateX   : 'x',\n\t      rotateY   : 'y',\n\t      rotateZ   : 'z',\n\t      left      : 'x',\n\t      right     : 'x',\n\t      top       : 'y',\n\t      bottom    : 'y',\n\t      width     : 'x',\n\t      height    : 'y',\n      }, defaultValue = {\n\t      //skew  : 1,\n\t      //skewX : 1,\n\t      //skewY : 1,\n\t      scale : 1,\n\t      scaleX: 1,\n\t      scaleY: 1,\n\t      scaleZ: 1\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tif ( path.length === 4 ) {\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]][path[1]][path[2]])\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t\n\t\tif ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t//console.warn(\"free\", dataMap, path, tweenableMap[twKey])\n\t\tif ( !dataMap[tmpKey] )\n\t\t\treturn console.warn(\"overRelease\", path)\n\t\t\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//console.log(\"delete\", twKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]].length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]];\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitIndex, dkey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitIndex] || defaultUnits[baseKey];\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'wh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\t\n\tif ( unit === 'deg' )\n\t\tvalue = value % 360;\n\t\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//console.log(key)\n\tlet transforms                                                 = \"\",\n\t    tmpValue                                                   = {};\n\tlet ti = 0, tmap, fkey, unitKey, unitIndex, dkey, u, iValue, y = 0, value;\n\tfor ( ; ti < data[key].length; ti++ ) {\n\t\ttmap = data[key][ti];\n\t\tfor ( fkey in tmap )\n\t\t\tif ( tmap.hasOwnProperty(fkey) ) {\n\t\t\t\tdkey  = key + '_' + ti + '_' + fkey;\n\t\t\t\tvalue = \"\";\n\t\t\t\ty     = 0;\n\t\t\t\tfor ( unitIndex = 0; unitIndex < data[dkey].length; unitIndex++ )\n\t\t\t\t\tif ( data[dkey][unitIndex] ) {\n\t\t\t\t\t\tunitKey = dkey + \"_\" + unitIndex;\n\t\t\t\t\t\t//console.log(\"mux \", key, dkey, unitKey)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( !tweenable[unitKey] )\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tiValue = demuxOne(unitIndex, dkey, tweenable[unitKey], fkey, data, box);\n\t\t\t\t\t\t//console.log(unitKey, tweenable[unitKey], iValue)\n\t\t\t\t\t\tif ( y && iValue[0] === '-' )\n\t\t\t\t\t\t\tiValue = \" - \" + iValue.substr(1);\n\t\t\t\t\t\telse if ( y )\n\t\t\t\t\t\t\tiValue = \" + \" + iValue;\n\t\t\t\t\t\tvalue += iValue;\n\t\t\t\t\t\ty++;\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( y > 1 )\n\t\t\t\t\tvalue = \"calc(\" + value + \")\";\n\t\t\t\t\n\t\t\t\tif ( y > 0 )\n\t\t\t\t\ttransforms += fkey + \"(\" + (value || \"0\") + \") \";\n\t\t\t}\n\t}\n\ttarget.transform = transforms;\n\t\n}\n\nexport function muxOne( key, baseKey, value, target, data, initials, noPropLock ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[baseKey],\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey] = defaultValue[baseKey] || 0;\n\t//if (unitKey===-1)\n\t//\tconsole.log(\"gfdgfdgdgfdgg\", key, defaultUnits[key])\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t!noPropLock && data[key][unitKey]++;\n\t//console.log(\"set \", key, baseKey, realKey)\n\tif ( match ) {\n\t\ttarget[realKey] = parseFloat(match[1]);\n\t}\n\telse {\n\t\ttarget[realKey] = parseFloat(value);\n\t}\n\t\n\treturn demux;\n};\nexport const mux = ( key, value, target, data, initials, noPropLock, reOrder ) => {\n\t\n\tdata[key] = data[key] || [];\n\t//initials[key] = 0;\n\t\n\tif ( !is.array(value) )\n\t\tvalue = [value];\n\tlet ti = 0, tmap, fkey, baseData, fValue, dkey, u;\n\tfor ( ; ti < value.length; ti++ ) {\n\t\ttmap     = value[ti];\n\t\tbaseData = reOrder ? {} : { ...(data[key][ti] || {}) };\n\t\tfor ( fkey in tmap )\n\t\t\tif ( tmap.hasOwnProperty(fkey) ) {\n\t\t\t\tfValue = tmap[fkey];\n\t\t\t\tdkey   = key + '_' + ti + '_' + fkey;\n\t\t\t\t\n\t\t\t\tbaseData[fkey] = baseData[fkey] || data[key][ti] && data[key][ti][fkey] || 0;\n\t\t\t\t!noPropLock && baseData[fkey]++;\n\t\t\t\t\n\t\t\t\t//console.warn(\"set \", key, dkey, noPropLock, baseData[fkey])\n\t\t\t\t\n\t\t\t\tdata[dkey] = data[dkey] || [];\n\t\t\t\tif ( is.array(fValue) ) {\n\t\t\t\t\tfor ( u = 0; u < fValue.length; u++ ) {\n\t\t\t\t\t\tmuxOne(dkey, fkey, fValue[u] || 0, target, data, initials, noPropLock)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmuxOne(dkey, fkey, fValue || 0, target, data, initials, noPropLock)\n\t\t\t\t}\n\t\t\t}\n\t\tdata[key][ti] =\n\t\t\treOrder\n\t\t\t? { ...baseData, ...(data[key][ti] || {}), ...baseData }\n\t\t\t:\n\t\t\tbaseData;\n\t\t//console.log(key, reOrder, data[key][ti], baseData)\n\t}\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport rgba from \"color-rgba\";\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\tconsole.log(\"wtf\", path)\n\t//}\n}\nexport function demux( key, tweenable, target, data ) {\n\tlet value = \"rgba(\" + tweenable[key + '$r'] + \", \" + tweenable[key + '$g'] + \", \" + tweenable[key + '$b'] + \", \" + tweenable[key + '$a'] + \")\";\n\treturn target ?\n\t       target[key] = value : value;\n}\n\nexport function mux( key, value, target, data, initials, noPropLock ) {\n\tlet vect  = rgba(value);\n\tdata[key] = data[key] || 0;\n\t!noPropLock && data[key]++;\n\ttarget[key + '$r'] = vect[0];\n\ttarget[key + '$g'] = vect[1];\n\ttarget[key + '$b'] = vect[2];\n\ttarget[key + '$a'] = vect[3];\n\t\n\tinitials[key + '$r'] = 0;\n\tinitials[key + '$g'] = 0;\n\tinitials[key + '$b'] = 0;\n\tinitials[key + '$a'] = 1;\n\t\n\treturn demux;\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst defaultUnits = {};\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\t\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\tdelete muxerMap[twKey];\n\t\tdelete cssMap[twKey];\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\ttarget[key] = ~~(tweenable[key]);\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\t\n\tinitials[key] = 0;\n\ttarget[key]   = ~~value;\n\tdata[key]     = data[key] || 0;\n\t!noPropLock && data[key]++;\n\t\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is          from \"is\";\nimport * as number from \"./number\";\n\nconst\n\talias = {\n\t\ttop   : '0%',\n\t\tbottom: '100%',\n\t\tcenter: '50%',\n\t\tleft  : '0%',\n\t\tright : '100%'\n\t};\n\nfunction demux( key, tweenable, target, data, box, offset ) {\n\t\n\tlet count = data[\"_\" + key], v = '', nowhere = {};\n\t\n\tfor ( let i = 0; i < count; i++ ) {\n\t\tnumber.demux(key + '_' + i, tweenable, nowhere, data, box, offset);\n\t\tv += nowhere[key + '_' + i] + ' ';\n\t}\n\t\n\ttarget[key] = v;\n}\n\n\nfunction release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\t//if ( path.length === 2 ) {\n\t//\tconsole.log(\"dec\", twKey, dataMap[path[0]][path[1]])\n\t//\tif ( !--dataMap[path[0]][path[1]] && !keepValues ) {\n\t//\t\tdelete tweenableMap[twKey];\n\t//\t\tdelete dataMap[path[0]][path[1]];\n\t//\t}\n\t//\n\t//\tif ( !keepValues )\n\t//\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t//\t\t\tdataMap[path[0]].pop();\n\t//\n\t//\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t//\t\tdelete dataMap[path[0]];\n\t//\t\tdelete muxerMap[path[0]];\n\t//\t\tdelete cssMap[path[0]];\n\t//\t\tconsole.log(\"delete\", path[0])\n\t//\t}\n\t//}\n\t//else {\n\tconsole.log(\"wtf\", path)\n\t//}\n}\n\nexport default ( count ) => ({\n\tmux: ( key, value, target, data, initials, noPropLock ) => {\n\t\tlet values = value.split(' '), v;\n\t\t\n\t\tdata[key] = data[key] || 0;\n\t\tnoPropLock && data[key]++;\n\t\tdata[\"_\" + key] = count;\n\t\t\n\t\tfor ( let i = 0; i < count; i++ ) {\n\t\t\tv = values[i % values.length];\n\t\t\tv = is.string(v) && alias[v] || v;\n\t\t\tnumber.mux(key + '_' + i, v, target, data, initials, noPropLock)\n\t\t}\n\t\t\n\t\treturn demux;\n\t}, demux, release\n})","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../../cssUtils\";\n\nconst defaultUnits    = {\n\t      left       : 'px',\n\t      right      : 'px',\n\t      top        : 'px',\n\t      bottom     : 'px',\n\t      width      : 'px',\n\t      height     : 'px',\n\t      perspective: 'px',\n      },\n      defaultBox      = {\n\t      left  : 'x',\n\t      right : 'x',\n\t      top   : 'y',\n\t      bottom: 'y',\n\t      width : 'x',\n\t      height: 'y',\n      }, defaultValue = {\n\t      opacity: 1\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\tif ( path.length === 2 ) {\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]][path[1]])\n\t\tif ( !--dataMap[path[0]][path[1]] && !keepValues ) {\n\t\t\tdelete tweenableMap[twKey];\n\t\t\tdelete dataMap[path[0]][path[1]];\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitKey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitKey] || defaultUnits[baseKey] || \"px\";\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t\t\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box, baseKey ) {\n\tlet value, i = 0, y, rKey;\n\t\n\tvalue = \"\";\n\t\n\tfor ( y = 0; y < data[key].length; y++ )\n\t\tif ( data[key][y] ) {\n\t\t\trKey = key + \"_\" + y;\n\t\t\t//if ( !tweenable[rKey] )\n\t\t\t//\tcontinue;\n\t\t\tif ( tweenable[rKey] < 0 )\n\t\t\t\tvalue += (i ? \" - \" : \"-\") + demuxOne(y, -tweenable[rKey], baseKey || key, data, box);\n\t\t\telse\n\t\t\t\tvalue += (i ? \" + \" : \"\") + demuxOne(y, tweenable[rKey], baseKey || key, data, box);\n\t\t\ti++;\n\t\t}\n\tif ( i > 1 )\n\t\tvalue = \"calc(\" + value + \")\";\n\t\n\treturn target ? target[key] = value : value;\n}\n\nexport function muxer( key, value, target, data, initials, noPropLock ) {\n\t\n\tdata[key] = data[key] || [];\n\tif ( is.array(value) ) {\n\t\tfor ( let i = 0; i < value.length; i++ ) {\n\t\t\tmuxOne(key, value[i] || 0, target, data, initials, noPropLock)\n\t\t}\n\t}\n\telse {\n\t\tmuxOne(key, value || 0, target, data, initials, noPropLock)\n\t}\n\t\n\treturn demux;\n}\n\nexport function muxOne( key, value, target, data, initials, noPropLock ) {\n\t\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[key] || \"px\",\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = defaultValue[key] || 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t!noPropLock && data[key][unitKey]++;\n\t//console.log(key, ':', data[key][unitKey])\n\t\n\t\n\tif ( match ) {\n\t\ttarget[realKey] = parseFloat(match[1]);\n\t}\n\telse {\n\t\ttarget[realKey] = parseFloat(value);\n\t}\n\t\n\treturn demux;\n};\n\nexport const mux = muxer;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport cssShadowParser from \"css-box-shadow\";\nimport is              from \"is\";\nimport {color, number} from \"./(*).js\";\n\nconst\n\tdefaultUnits = {\n\t\tblur      : 'px',\n\t\tbrightness: '%',\n\t\tcontrast  : '%',\n\t\tdropShadow: true,\n\t\tgrayscale : '%',\n\t\thueRotate : 'deg',\n\t\tinvert    : \"%\",\n\t\topacity   : \"%\",\n\t\tsaturate  : \"%\",\n\t\tsepia     : \"%\"\n\t};\nconst swap       = {};\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\t//console.log(\"dec\", twKey, dataMap[path[0]] && dataMap[path[0]][path[1]])\n\tif ( dataMap[path[0]] && path.length === 2 ) {\n\t\tif ( !--dataMap[path[0]][path[1]] && !keepValues ) {\n\t\t\tdelete tweenableMap[twKey];\n\t\t\tdelete dataMap[path[0]][path[1]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t\tcolor.release(twKey + \"_color\", tweenableMap, cssMap, dataMap, muxerMap, keepValues);\n\t\t\t//blurRadius: 2\n\t\t\tnumber.release(twKey + \"_blurRadius\", tweenableMap, cssMap, dataMap, muxerMap, keepValues);\n\t\t\t//inset: false\n\t\t\tdelete data[twKey + \"_inset\"];\n\t\t\t//offsetX: 12\n\t\t\tnumber.release(twKey + \"_offsetX\", tweenableMap, cssMap, dataMap, muxerMap, keepValues);\n\t\t\t//offsetY: 12\n\t\t\tnumber.release(twKey + \"_offsetY\", tweenableMap, cssMap, dataMap, muxerMap, keepValues);\n\t\t\t//spreadRadius: 1\n\t\t\tnumber.release(twKey + \"_spreadRadius\", tweenableMap, cssMap, dataMap, muxerMap, keepValues);\n\t\t}\n\t\t//\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t\t\n\t\t}\n\t}\n\telse {\n\t\t//console.log(\"ignore\", path)\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//if ( data[\"filter_head\"] === key ) {\n\tlet shadows = [];\n\tdata[key].forEach(\n\t\t( shadowData, i ) => {\n\t\t\tlet shadowObj = {\n\t\t\t\tinset       : data[key + '_' + i + \"_inset\"],\n\t\t\t\tcolor       : color.demux(key + '_' + i + \"_color\", tweenable, undefined, data, box),\n\t\t\t\tblurRadius  : number.demux(key + '_' + i + \"_blurRadius\", tweenable, undefined, data, box),\n\t\t\t\toffsetX     : number.demux(key + '_' + i + \"_offsetX\", tweenable, undefined, data, box),\n\t\t\t\toffsetY     : number.demux(key + '_' + i + \"_offsetY\", tweenable, undefined, data, box),\n\t\t\t\tspreadRadius: number.demux(key + '_' + i + \"_spreadRadius\", tweenable, undefined, data, box)\n\t\t\t}, fKey;\n\t\t\tshadows.push(shadowObj);\n\t\t}\n\t)\n\ttarget[key] = cssShadowParser.stringify(shadows);\n\t//console.log(key, data[key])\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\tlet parsedValues = value, i;\n\t\n\tdata[key] = data[key] || [];\n\t\n\tif ( is.string(parsedValues) )\n\t\tparsedValues = cssShadowParser.parse(parsedValues);\n\telse if ( !is.array(parsedValues) )\n\t\tparsedValues = [parsedValues];\n\t\n\t//console.log(key)\n\tparsedValues.forEach(\n\t\t( shadow, i ) => {\n\t\t\t\n\t\t\tinitials[key + \"_\" + i] = initials[key + \"_\" + i] || 0;\n\t\t\t!noPropLock && initials[key + \"_\" + i]++;\n\t\t\tif ( is.string(shadow) )\n\t\t\t\tshadow = cssShadowParser.parse(shadow)[0];\n\t\t\tif ( shadow ) {\n\t\t\t\t//color: \"rgba(0, 0, 255, .2)\"\n\t\t\t\tinitials[key + '_' + i + \"_color\"] = \"rgba(0,0,0,0)\";\n\t\t\t\tcolor.mux(key + '_' + i + \"_color\", shadow.color, target, data, initials, noPropLock);\n\t\t\t\t//blurRadius: 2\n\t\t\t\tnumber.mux(key + '_' + i + \"_blurRadius\", shadow.blurRadius || 0, target, data, initials, noPropLock);\n\t\t\t\t//inset: false\n\t\t\t\tdata[key + '_' + i + \"_inset\"] = shadow.inset;\n\t\t\t\t//offsetX: 12\n\t\t\t\tnumber.mux(key + '_' + i + \"_offsetX\", shadow.offsetX || 0, target, data, initials, noPropLock);\n\t\t\t\t//offsetY: 12\n\t\t\t\tnumber.mux(key + '_' + i + \"_offsetY\", shadow.offsetY || 0, target, data, initials, noPropLock);\n\t\t\t\t//spreadRadius: 1\n\t\t\t\tnumber.mux(key + '_' + i + \"_spreadRadius\", shadow.spreadRadius || 0, target, data, initials, noPropLock);\n\t\t\t}\n\t\t\t\n\t\t\tdata[key][i] = data[key][i] || 0;\n\t\t\t!noPropLock && data[key][i]++;\n\t\t}\n\t);\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport {addCss}                                                           from \"../tweenTools\";\nimport {expandShorthandProperty, isShorthandProperty, isValidDeclaration} from \"./cssUtils\";\nimport cssDemuxers                                                        from \"./demux/(*).js\";\n\nimport {int, multi, number} from \"./demux/typed/(*).js\";\n\nconst cssDemux = {\n\t...cssDemuxers,\n\theight         : number,\n\twidth          : number,\n\ttop            : number,\n\tleft           : number,\n\tright          : number,\n\tbottom         : number,\n\tmarginTop      : number,\n\tmarginLeft     : number,\n\tmarginRight    : number,\n\tmarginBottom   : number,\n\tpaddingTop     : number,\n\tpaddingLeft    : number,\n\tpaddingRight   : number,\n\tpaddingBottom  : number,\n\ttransformOrigin: multi(2),\n\tzIndex         : int,\n};\n\n\nexport function clearTweenableValue( cssKey, twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tcssDemux[path[0]]\n\t&& cssDemux[path[0]].release(twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues)\n}\n\nexport function muxToCss( tweenable, css, demuxers, data, box ) {\n\tObject.keys(demuxers)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      //if ( key === 'zIndex' ) debugger\n\t\t\t      demuxers[key].demux(key, tweenable, css, data, box)\n\t\t      }\n\t      )\n}\n\nexport function deMuxTween( tween, deMuxedTween, initials, data, demuxers, noPropLock, reOrder ) {\n\tlet fTween = {}, excluded = {};\n\tObject.keys(tween)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      if ( cssDemux[key] )\n\t\t\t\t      fTween[key] = tween[key];\n\t\t\t      else if ( isValidDeclaration(key, tween[key]) ) {\n\t\t\t\t      if ( isShorthandProperty(key) ) {\n\t\t\t\t\t      expandShorthandProperty(key, tween[key], fTween);\n\t\t\t\t      }\n\t\t\t\t      else fTween[key] = tween[key];\n\t\t\t      }\n\t\t\t      else excluded[key] = tween[key];\n\t\t      });\n\t\n\tObject.keys(fTween)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      if ( cssDemux[key] ) {//key, value, target, data, initials\n\t\t\t\t      (demuxers[key] = cssDemux[key]).mux(key, fTween[key], deMuxedTween, data, initials, noPropLock, reOrder)\n\t\t\t      }\n\t\t\t      else\n\t\t\t\t      (demuxers[key] = number).mux(key, fTween[key], deMuxedTween, data, initials, noPropLock, reOrder)\n\t\t      }\n\t      );\n\treturn excluded;\n}\n\nexport function deMuxLine( tweenLine, initials, data, demuxers, noPropLock ) {\n\tnoPropLock       = noPropLock && {};\n\tlet allPropsById = {},\n\t    twAxis       = tweenLine.reduce(\n\t\t    ( line, tween ) => {\n\t\t\t    let demuxedTween       = {};\n\t\t\t    demuxers[tween.target] = demuxers[tween.target] || {};\n\t\t\t    initials[tween.target] = initials[tween.target] || {};\n\t\t\t    data[tween.target]     = data[tween.target] || {};\n\t\t\t\n\t\t\t    if ( !tween.type || tween.type === \"Tween\" ) {\n\t\t\t\t    !noPropLock && addCss(allPropsById[tween.target] = allPropsById[tween.target] || {}, tween.apply);\n\t\t\t\t    //console.log(\"merged\", tween.apply)\n\t\t\t\t    deMuxTween(tween.apply, demuxedTween, initials[tween.target], data[tween.target], demuxers[tween.target], true);\n\t\t\t\t    line.push(\n\t\t\t\t\t    {\n\t\t\t\t\t\t    ...tween,\n\t\t\t\t\t\t    apply: demuxedTween\n\t\t\t\t\t    });\n\t\t\t    }\n\t\t\t    else line.push({ ...tween });\n\t\t\t    return line\n\t\t    },\n\t\t    []\n\t    );\n\t//console.log(allPropsById)\n\t!noPropLock && Object.keys(allPropsById)\n\t                     .forEach(\n\t\t                     id => deMuxTween(allPropsById[id], {}, {}, data[id], demuxers[id])\n\t                     )\n\t;\n\treturn twAxis;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nlet\n\tis        = require('is'),\n\tisBrowser = typeof window !== 'undefined',\n\tisTouch   = isBrowser && (function is_touch_device() {\n\t\tvar prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\n\t\tvar mq       = function ( query ) {\n\t\t\treturn window.matchMedia&&window.matchMedia(query).matches;\n\t\t}\n\t\t\n\t\tif ( ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch ) {\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t// include the 'heartz' as a way to have a non matching MQ to help terminate the join\n\t\t// https://git.io/vznFH\n\t\tvar query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\n\t\treturn mq(query);\n\t}()),\n\t_dom      = isBrowser ? {\n\t\tprefix      : (/webkit/i).test(navigator.appVersion) ? 'webkit' :\n\t\t              (/firefox/i).test(navigator.userAgent) ? 'Moz' :\n\t\t              (/trident/i).test(navigator.userAgent) ? 'ms' :\n\t\t              'opera' in window ? 'O' : '',\n\t\tdashedPrefix: (/webkit/i).test(navigator.appVersion) ? '-webkit-' :\n\t\t              (/firefox/i).test(navigator.userAgent) ? '-moz-' :\n\t\t              (/trident/i).test(navigator.userAgent) ? '-ms-' :\n\t\t              'opera' in window ? '-o-' : ''\n\t} : {\n\t\tprefix      : '',\n\t\tdashedPrefix: ''\n\t},\n\t__        = {\n\t\tonPageHided      : [],\n\t\tonPageShown      : [],\n\t\tdragging         : [],\n\t\tdragEnabled      : [],\n\t\tdragEnabledDesc  : [],\n\t\tfingers          : {},\n\t\tnbFingers        : 0,\n\t\tdragstartAnywhere: function ( e ) {\n\t\t\tlet o,\n\t\t\t    me            = __,\n\t\t\t    i             = me.dragEnabled.indexOf(this),\n\t\t\t    finger,\n\t\t\t    desc, fingers = [];\n\t\t\t\n\t\t\tif ( i === -1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//e.preventDefault();\n\t\t\t//e.stopPropagation();\n\t\t\t\n\t\t\tif ( !me.nbFingers ) {\n\t\t\t\tDom.addEvent(document,\n\t\t\t\t             {\n\t\t\t\t\t             'touchmove': me.dragAnywhere,\n\t\t\t\t\t             'mousemove': me.dragAnywhere,\n\t\t\t\t\t             'touchend' : me.dropAnywhere,\n\t\t\t\t\t             'mouseup'  : me.dropAnywhere,\n\t\t\t\t             });\n\t\t\t\tDom.addEvent(this,\n\t\t\t\t             {\n\t\t\t\t\t             'click': me.dropWithoutClick\n\t\t\t\t             }, null, null, true);\n\t\t\t}\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let t = 0, ln = fingers.length; t < ln; t++ ) {\n\t\t\t\tfinger = fingers[t];\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc = me.dragEnabledDesc[i];\n\t\t\t\t\n\t\t\t\tif ( desc.nbFingers ) continue;\n\t\t\t\t\n\t\t\t\tme.nbFingers++;\n\t\t\t\t\n\t\t\t\tme.fingers[finger.identifier] = me.fingers[finger.identifier] || [];\n\t\t\t\tme.fingers[finger.identifier].push(desc);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc.nbFingers++;\n\t\t\t\t\n\t\t\t\tdesc._startPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\tdesc._startPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\tdesc._startTs    = e.timeStamp;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\n\t\t\t\tfor ( o = 0; o < desc.dragstart.length; o++ )\n\t\t\t\t\tdesc.dragstart[o][0].call(desc.dragstart[o][1] ||\n\t\t\t\t\t\t                          this, e, finger, desc);\n\t\t\t}\n\t\t},\n\t\tdragAnywhere     : function ( e ) {\n\t\t\tlet o,\n\t\t\t    me              = __,\n\t\t\t    finger, fingers = [], stopped,\n\t\t\t    desc            = __.dragging[0];\n\t\t\t\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let i = 0, ln = fingers.length; i < ln; i++ ) {\n\t\t\t\tfinger = fingers[i];\n\t\t\t\tdesc   = me.fingers[finger.identifier];\n\t\t\t\tme.fingers[finger.identifier] &&\n\t\t\t\tme.fingers[finger.identifier].forEach(\n\t\t\t\t\tdesc => {\n\t\t\t\t\t\tif ( stopped ) {\n\t\t\t\t\t\t\tdesc._lastPos.x = desc._startPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\t\tdesc._lastPos.y = desc._startPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor ( o = 0; o < desc.drag.length; o++ )\n\t\t\t\t\t\t\tstopped = desc.drag[o][0].call(desc.drag[o][1] || this, e,\n\t\t\t\t\t\t\t                               finger,\n\t\t\t\t\t\t\t                               desc) === false;\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tdropWithoutClick : function ( e ) {\n\t\t\tif ( __.preventNextClick ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t__.preventNextClick = false;\n\t\t\t}\n\t\t\tDom.removeEvent(this,\n\t\t\t                {\n\t\t\t\t                'click': this.dropWithoutClick\n\t\t\t                });\n\t\t},\n\t\tdropAnywhere     : function ( e ) {\n\t\t\tlet o,\n\t\t\t    me = __, finger, fingers = [],\n\t\t\t    prevent;\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let i = 0, ln = fingers.length; i < ln; i++ ) {\n\t\t\t\tfinger = fingers[i];\n\t\t\t\tme.nbFingers--;\n\t\t\t\tme.fingers[finger.identifier] &&\n\t\t\t\tme.fingers[finger.identifier].forEach(\n\t\t\t\t\tdesc => {\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tdesc.nbFingers--;\n\t\t\t\t\t\tprevent         = prevent || desc.mouseDrag && (e.timeStamp - desc._startTs > 250);\n\t\t\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor ( o = 0; o < desc.dropped.length; o++ )\n\t\t\t\t\t\t\tdesc.dropped[o][0].call(desc.dropped[o][1] ||\n\t\t\t\t\t\t\t\t                        this, e,\n\t\t\t\t\t\t\t                        finger, desc);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tme.fingers[finger.identifier] = null;\n\t\t\t}\n\t\t\tif ( prevent ) {\n\t\t\t\tme.preventNextClick = true;\n\t\t\t}\n\t\t\tif ( !me.nbFingers ) {\n\t\t\t\tDom.removeEvent(document,\n\t\t\t\t                {\n\t\t\t\t\t                'touchmove': me.dragAnywhere,\n\t\t\t\t\t                'mousemove': me.dragAnywhere,\n\t\t\t\t\t                'touchend' : me.dropAnywhere,\n\t\t\t\t\t                'mouseup'  : me.dropAnywhere\n\t\t\t\t                });\n\t\t\t}\n\t\t},\n\t\tgetDraggable     : function ( node, mouseDrag ) {\n\t\t\tlet i = this.dragEnabled.indexOf(node), desc;\n\t\t\tif ( i === -1 ) {\n\t\t\t\tthis.dragEnabled.push(node);\n\t\t\t\tthis.dragEnabledDesc.push(\n\t\t\t\t\tdesc = {\n\t\t\t\t\t\tmouseDrag,\n\t\t\t\t\t\tnbFingers: 0,\n\t\t\t\t\t\tlocks    : 0,\n\t\t\t\t\t\t_startPos: {\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\t_lastPos : {\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdragstart: [],\n\t\t\t\t\t\tdrag     : [],\n\t\t\t\t\t\tdragEnd  : [],\n\t\t\t\t\t\tdropped  : []\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t//debugger;\n\t\t\t\tDom.addEvent(node,\n\t\t\t\t             {\n\t\t\t\t\t             'mousedown' : mouseDrag && this.dragstartAnywhere,\n\t\t\t\t\t             'touchstart': this.dragstartAnywhere\n\t\t\t\t             }, null, null, true);\n\t\t\t}\n\t\t\telse desc = this.dragEnabledDesc[i];\n\t\t\treturn desc;\n\t\t},\n\t\tfreeDraggable    : function ( node ) {\n\t\t\tlet i = this.dragEnabled.indexOf(node), desc;\n\t\t\tif ( i !== -1 ) {\n\t\t\t\tthis.dragEnabled.splice(i, 1);\n\t\t\t\tthis.dragEnabledDesc.splice(i, 1);\n\t\t\t\t\n\t\t\t\tDom.removeEvent(node,\n\t\t\t\t                {\n\t\t\t\t\t                'mousedown' : this.dragstartAnywhere,\n\t\t\t\t\t                'touchstart': this.dragstartAnywhere\n\t\t\t\t                });\n\t\t\t}\n\t\t},\n\t\taddOverflowEvent : function addFlowListener( element, fn ) {\n\t\t\t\n\t\t\tlet type = 'over', flow = type == 'over';\n\t\t\t\n\t\t\telement.addEventListener('OverflowEvent' in window ? 'overflowchanged' : type + 'flow',\n\t\t\t                         function ( e ) {\n\t\t\t\t                         if ( e.type == (type + 'flow') ||\n\t\t\t\t\t                         ((e.orient == 0 && e.horizontalOverflow == flow) ||\n\t\t\t\t\t\t                         (e.orient == 1 && e.verticalOverflow == flow) ||\n\t\t\t\t\t\t                         (e.orient == 2 && e.horizontalOverflow == flow &&\n\t\t\t\t\t\t\t                         e.verticalOverflow == flow)) ) {\n\t\t\t\t\t                         return fn.call(this, e);\n\t\t\t\t                         }\n\t\t\t                         }, false);\n\t\t\t\n\t\t},\n\t\taddEvent         : function ( node, type, fn, bubble ) {\n\t\t\tif ( node.addEventListener ) {\n\t\t\t\tnode.addEventListener(type, fn, bubble);\n\t\t\t}\n\t\t\telse if ( node.attachEvent ) {\n\t\t\t\tnode.attachEvent('on' + type,\n\t\t\t\t                 fn.related = function ( e ) {\n\t\t\t\t\t                 return fn.call(node, e);\n\t\t\t\t                 });\n\t\t\t}\n\t\t},\n\t\tremoveEvent      : function ( node, type, fn, bubble ) {\n\t\t\tif ( node.removeEventListener ) {\n\t\t\t\tnode.removeEventListener(type, fn, bubble);\n\t\t\t}\n\t\t\telse if ( node.attachEvent ) {\n\t\t\t\tnode.detachEvent('on' + type, fn.related);\n\t\t\t}\n\t\t},\n\t\trmDragFn         : function ( arr, fn, scope ) {\n\t\t\tfor ( let i = 0, ln = arr.length; i < ln; i++ ) {\n\t\t\t\tif ( arr[i][0] === fn )\n\t\t\t\t\treturn arr.splice(i, 1);\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Rm event : Listener not found !!\");\n\t\t},\n\t},\n\tDom       = {\n\t\taddEvent     : function ( node, type, fn, mouseDrag, bubble ) {\n\t\t\tif ( is.object(type) ) {\n\t\t\t\tfor ( let o in type )\n\t\t\t\t\tif ( type.hasOwnProperty(o) && type[o] )\n\t\t\t\t\t\tthis.addEvent(node, o, type[o], mouseDrag, bubble);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if ( type == 'dragstart' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).dragstart.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse if ( type == 'drag' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).drag.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse if ( type == 'dropped' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).dropped.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( node.addEventListener ) {\n\t\t\t\t\tnode.addEventListener(type, fn, { passive: false });\n\t\t\t\t}\n\t\t\t\telse if ( node.attachEvent ) {\n\t\t\t\t\tnode.attachEvent('on' + type,\n\t\t\t\t\t                 fn.related = function ( e ) {\n\t\t\t\t\t\t                 return fn.call(node, e);\n\t\t\t\t\t                 });\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tremoveEvent  : function ( node, type, fn, scope, bubble ) {\n\t\t\tlet i, desc;\n\t\t\t\n\t\t\tif ( is.object(type) ) {\n\t\t\t\tfor ( let o in type )\n\t\t\t\t\tif ( type.hasOwnProperty(o) )\n\t\t\t\t\t\tthis.removeEvent(node, o, type[o], scope);\n\t\t\t\t\n\t\t\t}\n\t\t\telse if ( /^(drag|drop)/.test(type) ) {\n\t\t\t\tdesc = __.getDraggable(node);\n\t\t\t\t__.rmDragFn(desc[type], fn, scope);\n\t\t\t\tif ( !desc.dragstart.length\n\t\t\t\t\t&& !desc.drag.length\n\t\t\t\t\t&& !desc.dragEnd.length\n\t\t\t\t\t&& !desc.dropped.length )\n\t\t\t\t\t__.freeDraggable(node);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( node.removeEventListener ) {\n\t\t\t\t\tnode.removeEventListener(type, fn, bubble);\n\t\t\t\t}\n\t\t\t\telse if ( node.attachEvent ) {\n\t\t\t\t\tnode.detachEvent('on' + type, fn.related);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\toffset       : function ( elem ) {// @todo\n\t\t\tlet dims = { top: 0, left: 0, width: elem.offsetWidth, height: elem.offsetHeight };\n\t\t\twhile ( elem ) {\n\t\t\t\tdims.top  = dims.top + parseInt(elem.offsetTop);\n\t\t\t\tdims.left = dims.left + parseInt(elem.offsetLeft);\n\t\t\t\telem      = elem.offsetParent;\n\t\t\t}\n\t\t\treturn dims;\n\t\t},\n\t\taddWheelEvent: isBrowser && (function ( window, document ) {\n\t\t\t\n\t\t\tlet prefix = \"\", _addEventListener, _rmEventListener, onwheel, support;\n\t\t\t\n\t\t\t// detect event model\n\t\t\tif ( window.addEventListener ) {\n\t\t\t\t_addEventListener = \"addEventListener\";\n\t\t\t\t_rmEventListener  = \"removeEventListener\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_addEventListener = \"attachEvent\";\n\t\t\t\t_rmEventListener  = \"detachEvent\";\n\t\t\t\tprefix            = \"on\";\n\t\t\t}\n\t\t\t\n\t\t\t// detect available wheel event\n\t\t\tsupport = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n\t\t\t          document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n\t\t\t          \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\t\t\t\n\t\t\tconst addWheelListener = function ( elem, callback, scope, useCapture ) {\n\t\t\t\t_addWheelListener(elem, support, callback, scope, useCapture);\n\t\t\t\t\n\t\t\t\t// handle MozMousePixelScroll in older Firefox\n\t\t\t\tif ( support == \"DOMMouseScroll\" ) {\n\t\t\t\t\t_addWheelListener(elem, \"MozMousePixelScroll\", callback, scope, useCapture);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// Reasonable defaults\n\t\t\tlet PIXEL_STEP         = 10;\n\t\t\tlet LINE_HEIGHT        = 40;\n\t\t\tlet PAGE_HEIGHT        = 800;\n\t\t\t\n\t\t\tfunction normalizeWheel( /*object*/ event ) /*object*/ {\n\t\t\t\tlet sX = 0, sY = 0,       // spinX, spinY\n\t\t\t\t    pX         = 0, pY = 0;       // pixelX, pixelY\n\t\t\t\t\n\t\t\t\t// Legacy\n\t\t\t\tif ( 'detail' in event ) {\n\t\t\t\t\tsY = event.detail;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDelta' in event ) {\n\t\t\t\t\tsY = -event.wheelDelta / 120;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDeltaY' in event ) {\n\t\t\t\t\tsY = -event.wheelDeltaY / 120;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDeltaX' in event ) {\n\t\t\t\t\tsX = -event.wheelDeltaX / 120;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// side scrolling on FF with DOMMouseScroll\n\t\t\t\tif ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n\t\t\t\t\tsX = sY;\n\t\t\t\t\tsY = 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpX = sX * PIXEL_STEP;\n\t\t\t\tpY = sY * PIXEL_STEP;\n\t\t\t\t\n\t\t\t\tif ( 'deltaY' in event ) {\n\t\t\t\t\tpY = event.deltaY;\n\t\t\t\t}\n\t\t\t\tif ( 'deltaX' in event ) {\n\t\t\t\t\tpX = event.deltaX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( (pX || pY) && event.deltaMode ) {\n\t\t\t\t\tif ( event.deltaMode == 1 ) {          // delta in LINE units\n\t\t\t\t\t\tpX *= LINE_HEIGHT;\n\t\t\t\t\t\tpY *= LINE_HEIGHT;\n\t\t\t\t\t}\n\t\t\t\t\telse {                             // delta in PAGE units\n\t\t\t\t\t\tpX *= PAGE_HEIGHT;\n\t\t\t\t\t\tpY *= PAGE_HEIGHT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Fall-back if spin cannot be determined\n\t\t\t\tif ( pX && !sX ) {\n\t\t\t\t\tsX = (pX < 1) ? -1 : 1;\n\t\t\t\t}\n\t\t\t\tif ( pY && !sY ) {\n\t\t\t\t\tsY = (pY < 1) ? -1 : 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tspinX : sX,\n\t\t\t\t\tspinY : sY,\n\t\t\t\t\tpixelX: pX,\n\t\t\t\t\tpixelY: pY\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tfunction _addWheelListener( elem, eventName, callback, scope, useCapture ) {\n\t\t\t\telem[_addEventListener](prefix + eventName, callback._wheelList = function ( originalEvent ) {\n\t\t\t\t\t!originalEvent && (originalEvent = window.event);\n\t\t\t\t\t\n\t\t\t\t\t// create a normalized event object\n\t\t\t\t\tlet event = {\n\t\t\t\t\t\t// keep a ref to the original event object\n\t\t\t\t\t\toriginalEvent : originalEvent,\n\t\t\t\t\t\ttarget        : originalEvent.target || originalEvent.srcElement,\n\t\t\t\t\t\ttype          : \"wheel\",\n\t\t\t\t\t\tdeltaMode     : originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n\t\t\t\t\t\tdeltaX        : 0,\n\t\t\t\t\t\tdelatZ        : 0,\n\t\t\t\t\t\tpreventDefault: function () {\n\t\t\t\t\t\t\toriginalEvent.preventDefault ?\n\t\t\t\t\t\t\toriginalEvent.preventDefault() :\n\t\t\t\t\t\t\toriginalEvent.returnValue = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnormalized    : normalizeWheel(originalEvent)\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// calculate deltaY (and deltaX) according to the event\n\t\t\t\t\tif ( support == \"mousewheel\" ) {\n\t\t\t\t\t\tevent.deltaY = -1 / 40 * originalEvent.wheelDelta;\n\t\t\t\t\t\t// Webkit also support wheelDeltaX\n\t\t\t\t\t\t//                            originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 *\n\t\t\t\t\t\t// originalEvent.wheelDeltaX );\n\t\t\t\t\t}\n\t\t\t\t\telse if ( support == \"wheel\" && _dom.prefix == \"Moz\" ) {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY / 3;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( support == \"wheel\" ) {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY / 100;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY;\n\t\t\t\t\t}\n\t\t\t\t\t//                        if (typeof originalEvent.wheelDeltaY !== 'number')\n\t\t\t\t\t//                            event.wheelDeltaY = originalEvent.deltaY/100;\n\t\t\t\t\t\n\t\t\t\t\t//                        event.wheelDelta = deltaY*120;\n\t\t\t\t\t\n\t\t\t\t\t// it's time to fire the callback\n\t\t\t\t\treturn callback.call(scope || this, event);\n\t\t\t\t\t\n\t\t\t\t}, useCapture || false);\n\t\t\t}\n\t\t\t\n\t\t\treturn addWheelListener;\n\t\t})(window, document),\n\t\trmWheelEvent : isBrowser && (function ( window, document ) {\n\t\t\t\n\t\t\tlet prefix = \"\", _rmEventListener, onwheel, support;\n\t\t\t\n\t\t\t// detect event model\n\t\t\tif ( addEventListener ) {\n\t\t\t\t_rmEventListener = \"removeEventListener\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_rmEventListener = \"detachEvent\";\n\t\t\t\tprefix           = \"on\";\n\t\t\t}\n\t\t\t\n\t\t\t// detect available wheel event\n\t\t\tsupport = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n\t\t\t          document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n\t\t\t          \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\t\t\t\n\t\t\tlet rmWheelListener = function ( elem, callback, scope, useCapture ) {\n\t\t\t\t_EventListener(elem, support, callback, scope, useCapture);\n\t\t\t\t\n\t\t\t\t// handle MozMousePixelScroll in older Firefox\n\t\t\t\tif ( support == \"DOMMouseScroll\" ) {\n\t\t\t\t\t_EventListener(elem, \"MozMousePixelScroll\", callback, scope, useCapture);\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tfunction _EventListener( elem, eventName, callback, scope, useCapture ) {\n\t\t\t\telem[_rmEventListener](prefix + eventName, callback._wheelList);\n\t\t\t}\n\t\t\t\n\t\t\treturn rmWheelListener;\n\t\t})(window, document),\n\t\t\n\t\t\n\t\t/**\n\t\t * Find the react component that generate element dom node\n\t\t * @param element\n\t\t * @returns {[React.Component]}\n\t\t */\n\t\tfindReactParents( element ) {\n\t\t\tlet fiberNode, comps = [element];\n\t\t\tfor ( const key in element ) {\n\t\t\t\t\n\t\t\t\tif ( key.startsWith('__reactInternalInstance$') ) {\n\t\t\t\t\tfiberNode = element[key];\n\t\t\t\t\twhile ( fiberNode.return ) {\n\t\t\t\t\t\tif ( fiberNode.stateNode && !comps.includes(fiberNode.stateNode) )\n\t\t\t\t\t\t\tcomps.push(fiberNode.stateNode)\n\t\t\t\t\t\tfiberNode = fiberNode.return;\n\t\t\t\t\t}\n\t\t\t\t\treturn comps;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn element.parentNode && this.findReactParents(element.parentNode);\n\t\t}\n\t\t\n\t};\nexport default Dom;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst\n\tis       = require('is'),\n\teasingFn = require('d3-ease'),\n\tsignOf   = function sign( x ) {\n\t\treturn typeof x === 'number' ? x ? x < 0 ? -1 : 1 : x === x ? x : NaN : NaN;\n\t},\n\tabs      = Math.abs,\n\tfloor    = Math.floor,\n\tround    = Math.round,\n\tmin      = Math.min,\n\tmax      = Math.max,\n\tfloatCut = ( v = 0 ) => v.toFixed(3),\n\t\n\tconsts   = {\n\t\tvelocityResetTm: 150,\n\t\tclickTm        : 250\n\t};\n\nexport function applyInertia( _ ) {\n\tlet velSign = signOf(_.lastVelocity);\n\t// calc momentum distance...\n\t// get nb loop needed to get vel < .05\n\t_.loopsTarget = floor(Math.log(.05 / abs(_.lastVelocity)) / Math.log(.9));\n\t\n\t// get velocity sum basing on nb loops needed\n\t_.loopsVelSum    = (Math.pow(.9, _.loopsTarget) - abs(_.lastVelocity)) / (.9 - 1);\n\t// deduce real dist of momentum\n\t_.targetDist     = (_.loopsVelSum * _.refFPS * velSign) / 1000 || 0;\n\t_.targetDuration = abs(_.loopsTarget * _.refFPS * velSign) || 0;\n}\n\nconst inertiaByNode = {\n\tnodes  : [],\n\tinertia: []\n};\n/**\n * Main inertia class\n * @class Caipi slideshow\n * @type {module.exports}\n */\nexport default class Inertia {\n\tstatic config = {\n\t\tbounds: true\n\t};\n\t\n\tconstructor( opt ) {\n\t\tlet _  = this._ = {};\n\t\t_.conf = {\n\t\t\t...this.constructor.config,\n\t\t\t...opt\n\t\t};\n\t\t\n\t\tthis.active           = false;\n\t\t_.pos                 = opt.value || 0;\n\t\t_.refFPS              = 16;\n\t\t_.min                 = opt.min || 0;\n\t\t_.max                 = opt.max || 0;\n\t\t_.currentStop         = 0;\n\t\t_.lastInertiaPos      = 0;\n\t\t_.stops               = _.conf.stops;\n\t\t_.wayPoints           = _.conf.wayPoints;\n\t\t_.inertiaFn           = easingFn.easePolyOut;\n\t\t_.targetWayPointIndex = 0;\n\t\t\n\t\tthis._detectCurrentSnap()\n\t\t\n\t}\n\t\n\tupdate( at = Date.now() ) {\n\t\tlet _ = this._, nextValue, loop;\n\t\tif ( !_.inertia ) {\n\t\t\tif ( _.conf.shouldLoop ) {\n\t\t\t\twhile ( (loop = _.conf.shouldLoop(_.pos)) ) {\n\t\t\t\t\tthis.teleport(loop);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _.pos;\n\t\t}\n\t\tlet\n\t\t\tpos   = _.inertiaFn((at - _.inertiaStartTm) / _.targetDuration) * _.targetDist,\n\t\t\tdelta = pos - _.lastInertiaPos;\n\t\t\n\t\t_.lastInertiaPos = pos;\n\t\t\n\t\tif ( (at - _.inertiaStartTm) >= _.targetDuration ) {\n\t\t\t_.inertia        = this.active = false;\n\t\t\t_.lastInertiaPos = delta = 0;\n\t\t\t\n\t\t\tif ( _.targetWayPoint ) {\n\t\t\t\tdelta = _.targetWayPoint.at - _.pos;\n\t\t\t\t//console.log(\"snap done \", _.targetWayPoint, _.pos + delta);\n\t\t\t\t_.currentWayPoint      = _.targetWayPoint;\n\t\t\t\t_.currentWayPointIndex = _.targetWayPointIndex;\n\t\t\t\t_.targetWayPoint       = null;\n\t\t\t\t_.targetWayPointIndex  = null;\n\t\t\t\t//_.lastSnapTm           = Date.now();\n\t\t\t}\n\t\t\t\n\t\t\tif ( _.conf.onInertiaEnd ) {\n\t\t\t\t_.conf.onInertiaEnd(_.pos, _.currentWayPoint)\n\t\t\t}\n\t\t}\n\t\t\n\t\tdelta     = delta || 0;\n\t\t//console.log(_.pos + delta);\n\t\tnextValue = _.pos + delta;\n\t\t\n\t\tif ( _.conf.shouldLoop ) {\n\t\t\t\n\t\t\twhile ( (loop = _.conf.shouldLoop(nextValue)) ) {\n\t\t\t\t//console.warn(\"loop\", loop);\n\t\t\t\tnextValue += loop;\n\t\t\t\tthis.teleport(loop);\n\t\t\t}\n\t\t}\n\t\t\n\t\t_.pos = nextValue;\n\t\t\n\t\treturn nextValue;\n\t}\n\t\n\tsetPos( pos ) {\n\t\tlet _            = this._, nextValue;\n\t\t_.inertia        = false;\n\t\tthis.active      = false;\n\t\t_.lastInertiaPos = 0;\n\t\t_.targetDist     = 0;\n\t\t_.pos            = pos;\n\t\t//console.log(\"setPos\", pos);\n\t\tif ( _.conf.bounds ) {\n\t\t\t_.pos = max(_.pos, _.min);\n\t\t\t_.pos = min(_.pos, _.max);\n\t\t}\n\t}\n\t\n\tsetWayPoints( wayPoints ) {\n\t\tlet _       = this._, nextValue;\n\t\t_.wayPoints = wayPoints;\n\t\tthis._detectCurrentSnap();\n\t}\n\t\n\tteleport( loopDist ) {\n\t\tlet _ = this._, nextValue;\n\t\tif ( !_.inertia )\n\t\t\treturn _.pos += loopDist;\n\t\t\n\t\t_.lastInertiaPos += loopDist;\n\t\t_.pos += loopDist\n\t}\n\t\n\tdispatch( delta, tm = 500 ) {\n\t\tlet _   = this._,\n\t\t    now = Date.now(),\n\t\t    pos;\n\t\t\n\t\tthis.active = true;\n\t\t\n\t\t// if no inertia has started || if direction has change\n\t\tif ( !_.inertia || signOf(delta) !== signOf(_.targetDist) ) {\n\t\t\t_.inertia        = true;\n\t\t\t_.lastInertiaPos = 0;\n\t\t\t_.inertiaStartTm =\n\t\t\t\t_.inertiaLastTm = now;\n\t\t\t\n\t\t\t_.targetDist     = delta;\n\t\t\t_.targetDuration = tm;\n\t\t}\n\t\telse {\n\t\t\t_.inertiaStartTm =\n\t\t\t\t_.inertiaLastTm = now;\n\t\t\t_.lastInertiaPos = 0;\n\t\t\t_.targetDist += delta;\n\t\t\t_.targetDuration += tm;\n\t\t}\n\t\t//\n\t\t//if ( _.conf.maxJump ) {\n\t\t//\n\t\t//}\n\t\t\n\t\tif ( _.conf.bounds ) {\n\t\t\tif ( (_.pos + _.targetDist) > _.max ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.max - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t\telse if ( (_.pos + _.targetDist) < _.min ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.min - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t}\n\t\tthis._doSnap(signOf(delta), 750)\n\t}\n\t\n\tisOutbound( delta ) {\n\t\tlet _   = this._, loop,\n\t\t    pos = _.targetDist + (_.pos - (_.lastInertiaPos || 0)) + delta;\n\t\t//if ( _.conf.infinite ) return false;\n\t\t\n\t\tif ( _.conf.shouldLoop ) {\n\t\t\twhile ( (loop = _.conf.shouldLoop(nextValue)) ) {\n\t\t\t\t//console.warn(\"loop\", loop);\n\t\t\t\tpos += loop;\n\t\t\t}\n\t\t}\n\t\treturn pos > _.min && pos < _.max;\n\t}\n\t\n\t_detectCurrentSnap() {\n\t\tlet _   = this._,\n\t\t    pos = _.pos,\n\t\t    i;\n\t\t\n\t\tif ( _.wayPoints && _.wayPoints.length ) {\n\t\t\tfor ( i = 0; i < _.wayPoints.length; i++ )\n\t\t\t\tif ( floatCut(_.wayPoints[i].at) === floatCut(pos) ) {\n\t\t\t\t\t_.currentWayPoint      = _.wayPoints[i];\n\t\t\t\t\t_.currentWayPointIndex = i;\n\t\t\t\t\t//console.warn(\"snap set\", i);\n\t\t\t\t\t\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t}\n\t}\n\t\n\t_doSnap( forceSnap, maxDuration = 2000 ) {\n\t\tlet _   = this._,\n\t\t    pos = _.targetDist + (_.pos - (_.lastInertiaPos || 0)),\n\t\t    target,\n\t\t    mid,\n\t\t    i,\n\t\t    i2;\n\t\t\n\t\tif ( _.wayPoints && _.wayPoints.length ) {\n\t\t\tfor ( i = 0; i < _.wayPoints.length; i++ )\n\t\t\t\tif ( _.wayPoints[i].at > pos )\n\t\t\t\t\tbreak;\n\t\t\t\n\t\t\tif ( i === _.wayPoints.length ) {\n\t\t\t\ti--\n\t\t\t}\n\t\t\telse if ( i === 0 ) {\n\t\t\t\ti = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmid = _.wayPoints[i - 1].at + (_.wayPoints[i].at - _.wayPoints[i - 1].at) / 2;\n\t\t\t\tif ( forceSnap ) forceSnap < 0 && i--;\n\t\t\t\telse if ( pos < mid ) i--;\n\t\t\t}\n\t\t\t\n\t\t\tif ( _.conf.maxJump && is.number(_.currentWayPointIndex) ) {\n\t\t\t\tlet d = (i - _.currentWayPointIndex);\n\t\t\t\t//console.log('Inertia::_doSnap:154: ', i, d);\n\t\t\t\tif ( abs(d) > _.conf.maxJump ) {\n\t\t\t\t\t//console.log('max: ', i, d);\n\t\t\t\t\ti = _.currentWayPointIndex + signOf(d) * _.conf.maxJump;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = _.wayPoints[i].at;\n\t\t\t\n\t\t\tif ( _.conf.willSnap ) {\n\t\t\t\t_.conf.willSnap(i, _.wayPoints[i]);\n\t\t\t}\n\t\t\t\n\t\t\t_.lastInertiaPos      = _.lastInertiaPos || 0;\n\t\t\ttarget                = target - (_.pos - _.lastInertiaPos);\n\t\t\t_.targetDuration      = max(50, min(maxDuration, abs((_.targetDuration / _.targetDist) * target))) || 0;\n\t\t\t//console.log(\"do snap\", i, target, _.targetDist, _.targetDuration);\n\t\t\t_.targetDist          = target;\n\t\t\t_.targetWayPoint      = _.wayPoints[i];\n\t\t\t_.targetWayPointIndex = i;\n\t\t}\n\t\telse {\n\t\t\ttarget = ~~(_.pos - _.lastInertiaPos);\n\t\t\t\n\t\t\tif ( !_.conf.infinite ) {\n\t\t\t\tif ( target > _.max ) {\n\t\t\t\t\ttarget           = _.max - target;\n\t\t\t\t\t_.targetDuration = min(maxDuration, abs((_.targetDuration / _.targetDist) * target));\n\t\t\t\t\t_.targetDist     = target;\n\t\t\t\t}\n\t\t\t\telse if ( target < _.min ) {\n\t\t\t\t\ttarget           = _.min - target;\n\t\t\t\t\t_.targetDuration = min(maxDuration, abs((_.targetDuration / _.targetDist) * target));\n\t\t\t\t\t_.targetDist     = target;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tsetBounds( min, max ) {\n\t\tlet _ = this._;\n\t\t//console.log('Inertia::setBounds:245: ', min, max);\n\t\t_.min = min;\n\t\t_.max = max;\n\t}\n\t\n\tstartMove() {\n\t\tlet _          = this._;\n\t\t_.baseTS       = _.startTS = Date.now() / 1000;\n\t\t_.lastVelocity = _.lastIVelocity = 0;\n\t\t_.lastAccel    = 0;\n\t\t_.posDiff      = 0;\n\t\tthis.active    = true;\n\t\tthis.holding   = true;\n\t\t_.inertia      = false;\n\t}\n\t\n\thold( pos ) {\n\t\tlet _ = this._,\n\t\t    loop;\n\t\tif ( _.conf.shouldLoop ) {\n\t\t\twhile ( (loop = _.conf.shouldLoop(pos)) ) {\n\t\t\t\t//console.warn(\"loop\", loop);\n\t\t\t\tpos += loop;\n\t\t\t}\n\t\t\twhile ( (loop = _.conf.shouldLoop(_.pos)) ) {\n\t\t\t\t//console.warn(\"loop\", loop);\n\t\t\t\t_.pos += loop;\n\t\t\t}\n\t\t}\n\t\tlet now          = Date.now() / 1000,//e.timeStamp,\n\t\t    sinceLastPos = (now - _.baseTS),\n\t\t    delta        = pos - _.pos,\n\t\t    iVel         = delta / sinceLastPos;\n\t\t//if (is.nan(pos))\n\t\t//\tdebugger\n\t\t//console.log(\"hold\", pos, _.pos);\n\t\t_.lastIVelocity = iVel;\n\t\t_.lastVelocity  = iVel;\n\t\t_.baseTS        = now;\n\t\t\n\t\t// clear snap\n\t\t_.targetWayPoint      = undefined;\n\t\t_.targetWayPointIndex = undefined;\n\t\t\n\t\tif ( _.conf.bounds ) {\n\t\t\tif ( pos > _.max ) {\n\t\t\t\tpos = _.max + min((pos - _.max) / 10, 10);\n\t\t\t}\n\t\t\telse if ( pos < _.min ) {\n\t\t\t\tpos = _.min - min((_.min - pos) / 10, 10);\n\t\t\t}\n\t\t}\n\t\t\n\t\t_.pos = pos;\n\t\t\n\t}\n\t\n\trelease() {\n\t\tlet _        = this._,\n\t\t    velSign  = signOf(_.lastVelocity);\n\t\tthis.holding = false;\n\t\t// calc momentum distance...\n\t\tapplyInertia(_);\n\t\t\n\t\tif ( _.conf.bounds ) {\n\t\t\tif ( (_.pos + _.targetDist) > _.max ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.max - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t\telse if ( (_.pos + _.targetDist) < _.min ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.min - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t}\n\t\t//else {\n\t\tif ( !_.targetDuration )\n\t\t\t_.targetDuration = 50;\n\t\t\n\t\t//console.log(_);\n\t\tthis.active      = true;\n\t\t_.inertia        = true;\n\t\t_.lastInertiaPos = 0;\n\t\t_.inertiaStartTm =\n\t\t\t_.inertiaLastTm = Date.now();\n\t\t//}\n\t\tthis._doSnap(null, 500)\n\t}\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is from \"is\";\n\nexport const re_cssValueWithUnit = new RegExp(\n\t\"([+-]?(?:[0-9]*[.])?[0-9]+)\\\\s*(\" +\n\t['box', 'bz', 'bh', 'bw', 'em', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'].join('|')\n\t+ \")\"\n);\n\n/**\n * add any css val with it unit ( todo: optims&use objects for multi unit\n * @param val1\n * @param val2\n * @returns {Array}\n */\nexport function cssAdd( val1, val2, ...argz ) {\n\tif ( !is.array(val1) )\n\t\tval1 = [val1];\n\tif ( !is.array(val2) )\n\t\tval2 = [val2];\n\t\n\tlet units1             = val1.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    units2             = val2.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    remap = {}, result = [], i;\n\t\n\ti = 0;\n\twhile ( i < units1.length ) {\n\t\tremap[units1[i][2]] = remap[units1[i][2]] || 0;\n\t\tremap[units1[i][2]] += parseFloat(units1[i][1]);\n\t\ti++;\n\t}\n\ti = 0;\n\twhile ( i < units2.length ) {\n\t\tremap[units2[i][2]] = remap[units2[i][2]] || 0;\n\t\tremap[units2[i][2]] += parseFloat(units2[i][1]);\n\t\ti++;\n\t}\n\tObject.keys(remap)\n\t      .forEach(\n\t\t      unit => (result.push(remap[unit] + unit))\n\t      );\n\treturn argz.length ? cssAdd(result, ...argz) : result;\n}\n\n/**\n * Multiply any css val with it unit ( todo: optims & use objects for multi unit\n * @param val1\n * @param val2\n * @returns {Array}\n */\nexport function cssMult( val1, val ) {\n\tif ( !is.array(val1) )\n\t\tval1 = [val1];\n\t\n\tlet units1             = val1.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    remap = {}, result = [], i;\n\t\n\ti = 0;\n\twhile ( i < units1.length ) {\n\t\tremap[units1[i][2]] = remap[units1[i][2]] || 1;\n\t\tremap[units1[i][2]] = parseFloat(units1[i][1]) * val;\n\t\ti++;\n\t}\n\tObject.keys(remap)\n\t      .forEach(\n\t\t      unit => (result.push(remap[unit] + unit))\n\t      );\n\treturn result;\n}\n\nexport function offset( items, start = 0 ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\tfrom: item.from + start\n\t\t\t}\n\t\t)\n\t)\n}\n\nexport function scale( items, duration = 0, withOffset ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\t\n\t// get items current duration\n\tlet iDuration = 0;\n\titems.forEach(\n\t\titem => {\n\t\t\tiDuration = Math.max(iDuration, item.from + item.duration)\n\t\t}\n\t)\n\t\n\titems = items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\tfrom    : (item.from / iDuration) * duration,\n\t\t\t\tduration: (item.duration / iDuration) * duration\n\t\t\t}\n\t\t)\n\t)\n\treturn withOffset ? offset(items, withOffset) : items\n}\n\nfunction inverseValues( v ) {\n\tif ( is.number(v) )\n\t\treturn -v;\n\tif ( is.object(v) )\n\t\treturn Object.keys(v).reduce(( h, key ) => (h[key] = inverseValues(v[key]), h), {});\n\tif ( is.array(v) )\n\t\treturn v.map(( item ) => (inverseValues(item)));\n\t\n\tlet values = v.split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig);\n\t\n\treturn values.map(\n\t\t( val, i ) => (i % 2 ? -parseFloat(val) : val)\n\t).join(\"\");\n}\n\nexport function reverse( items ) {\n\titems         = is.array(items) ? items : items && [items] || items;\n\t// get items current duration\n\tlet iDuration = 0;\n\titems.forEach(\n\t\titem => {\n\t\t\tiDuration = Math.max(iDuration, item.from + item.duration)\n\t\t}\n\t)\n\t\n\treturn items.map(\n\t\titem => {\n\t\t\titem =\n\t\t\t\t{\n\t\t\t\t\t...item,\n\t\t\t\t\tfrom: iDuration - (item.from + item.duration),\n\t\t\t\t\t...(item.apply ? { apply: inverseValues(item.apply) } : undefined)\n\t\t\t\t};\n\t\t\treturn item;\n\t\t}\n\t)\n}\n\nexport function addCss( target, ...sources ) {\n\tlet source = sources.shift();\n\t\n\tfor ( const key in source ) {\n\t\tif ( !source.hasOwnProperty(key) )\n\t\t\tcontinue;\n\t\t\n\t\tif ( is.object(source[key]) ) {\n\t\t\tif ( !target[key] ) {\n\t\t\t\ttarget[key] = {};\n\t\t\t\taddCss(target[key], source[key]);\n\t\t\t}\n\t\t\telse if ( is.array(target[key]) ) {\n\t\t\t\taddCss(target[key][0], source[key]);\n\t\t\t}\n\t\t\telse addCss(target[key], source[key]);\n\t\t}\n\t\telse if ( is.array(source[key]) ) {\n\t\t\tif ( !target[key] ) {\n\t\t\t\ttarget[key] = [];\n\t\t\t}\n\t\t\telse if ( !is.array(target[key]) ) {\n\t\t\t\ttarget[key] = [target[key]];\n\t\t\t}\n\t\t\t\n\t\t\taddCss(target[key], source[key]);\n\t\t}\n\t\telse {\n\t\t\ttarget[key] = addAllType(target[key], source[key])\n\t\t}\n\t}\n\t\n\treturn sources.length && addCss(target, ...sources) || target;\n}\n\nfunction addAllType( v1, v2 ) {\n\tif ( !v1 )\n\t\treturn v2;\n\tif ( !v2 )\n\t\treturn v1;\n\tlet values1 = ('' + v1).split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig),\n\t    values2 = ('' + v2).split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig),\n\t    r       = values1.map(\n\t\t    ( val, i ) => (i % 2 ? parseFloat(val) + parseFloat(values2[i] || 0) : val)\n\t    ).filter(i => (i !== ''));\n\t\n\treturn r.length === 1 ? parseInt(r[0]) : r.join(\"\")\n}\n\nexport function extractCss( items, inverse ) {\n\tlet css = {};\n\titems   = is.array(items) ? items : items && [items] || items;\n\titems.forEach(\n\t\titem => {\n\t\t\taddCss(css, item.apply)\n\t\t}\n\t);\n\tif ( inverse )\n\t\tcss = inverseValues(css);\n\t\n\t\n\t//if ( inverse && css.hasOwnProperty('opacity') )\n\t//\tcss.opacity -= 1;\n\treturn css;\n}\n\nexport function target( items, target ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\ttarget\n\t\t\t}\n\t\t)\n\t)\n}\n\nexport function shiftTransforms( items, shift = 1 ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => {\n\t\t\tlet t = item.apply && item.apply.transform;\n\t\t\tif ( t ) {\n\t\t\t\tt = is.array(t) ? t : [t];\n\t\t\t\tfor ( let i = 0; i < shift; i++ )\n\t\t\t\t\tt.unshift({});\n\t\t\t\t\n\t\t\t\titem = { ...item, apply: { ...item.apply, transform: t } };\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\t)\n}","module.exports = require(\"d3-ease\");","module.exports = require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"is\");","module.exports = require(\"fast-deep-equal\");","module.exports = require(\"color-rgba\");","module.exports = require(\"tween-axis\");","module.exports = require(\"shortid\");","module.exports = require(\"css-box-shadow\");","module.exports = require(\"@babel/runtime/helpers/inheritsLoose\");","module.exports = require(\"@babel/runtime/helpers/extends\");","module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");"],"sourceRoot":""}